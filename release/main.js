var BQ=(Q)=>{let X=Object.entries(Q).sort((Z,$)=>Z[0].localeCompare($[0]));return X.forEach(([Z,$],W)=>{if($&&typeof $==="object"&&!Array.isArray($))X[W]=[Z,BQ($)]}),Object.fromEntries(X)},JQ=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},t=(Q)=>{if(Array.isArray(Q)){let X=[...Q],Z=[];return X.forEach(($)=>{Z.push(t($))}),Z}if(JQ(Q)){let X={...Q},Z={};return Object.keys(X).forEach(($)=>{Z[$]=t(X[$])}),Object.freeze(Z)}return Q},p=(Q)=>{if(Array.isArray(Q)){let Z=[...Q],$=[];return Z.forEach((W)=>{$.push(p(W))}),$}if(JQ(Q)){let Z={...Q},$={};return Object.keys(Z).forEach((W)=>{$[W]=p(Z[W])}),$}return Q},VQ=(Q,X="index")=>Q.map((Z,$)=>({[X]:$,value:Z})),bX=(Q,X)=>{let Z=BQ(Q),$=BQ(X),W=Object.keys(Z),J=Object.keys($);if(W.length!==J.length)return!1;for(let Y of W)if(!J.includes(Y)||!jQ(Z[Y],$[Y]))return!1;return!0},hX=(Q,X)=>{if(Q.length!==X.length)return!1;if(Q.length===0)return!0;for(let Z=0;Z<Q.length;Z++)if(!jQ(Q[Z],X[Z]))return!1;return!0},jQ=(Q,X)=>{if(typeof Q!==typeof X)return!1;if(Array.isArray(Q))return hX(Q,X);if(Q===null||X===null)return Q===X;if(typeof Q==="object"&&!(Q instanceof Set))return bX(Q,X);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===X;return Q===X},vX=(Q,X,Z)=>{let W=VQ(p(Q),"index");return VQ(p(X),"index").map((Y)=>{let U="add",G=-1,_=Y.value;return W.some((F,j)=>{if(U=jQ(F.value,Y.value)?F.index===Y.index?"idle":"shuffle":Z&&F.value[Z]!==void 0&&F.value[Z]===Y.value[Z]?"update":"add",U!=="add")return G=F.index,W.splice(j,1),!0;return!1}),{type:U,oldIndex:G,value:_}})},e=null,x=(Q)=>{let X=t(Q),Z=new Set;return{type:"source-signal",get value(){if(e)Z.add(e);return p(X)},set value($){if($===X)return;X=t($),Z.forEach((W)=>W&&W())}}},d=(Q)=>{e=Q,Q(),e=null},B=(Q)=>{let X,Z=x(X);return d(()=>{X=Q(X),Z.value=X}),{type:"derived-signal",get prevValue(){return X},get value(){return Z.value}}},q=(Q)=>OQ(Q)?Q.value:Q,b=(Q)=>["source-signal","derived-signal"].includes(Q?.type),pQ=(Q,X)=>Q?.type==="non-signal"&&(!X||!X.length||X.some((Z)=>typeof Q?.value===Z)),OQ=(Q)=>b(Q)||pQ(Q),uQ=(Q)=>pQ(Q,["string"]),rQ=(Q)=>Q?.type==="non-signal"&&Array.isArray(Q?.value)&&(Q?.value).every((X)=>typeof X==="string"),I=(Q,...X)=>{return B(()=>{let Z=X.map(($)=>q($));return Q(...Z)})},A=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...{get truthy(){return B(()=>!!X())},get falsy(){return B(()=>!X())},get truthyFalsyPair(){return B(()=>{let $=!!X();return[$,!$]})},ternary:($,W)=>B(()=>{return X()?q($):q(W)})},or:($)=>A(()=>{return!!(X()||q($))}),orNot:($)=>A(()=>{return!!(X()||!q($))}),and:($)=>A(()=>{return!!(X()&&q($))}),andNot:($)=>A(()=>{return!!(X()&&!q($))}),equals:($)=>A(()=>{return X()===q($)}),notEquals:($)=>A(()=>{return X()!==q($)}),orBothEqual:($,W)=>A(()=>{let J=X(),Y=q($)===q(W);return!!(J||Y)}),orBothUnequal:($,W)=>A(()=>{let J=X(),Y=q($)!==q(W);return!!(J||Y)}),andBothEqual:($,W)=>A(()=>{let J=X(),Y=q($)===q(W);return!!(J&&Y)}),andBothUnequal:($,W)=>A(()=>{let J=X(),Y=q($)!==q(W);return!!(J&&Y)}),orThisIsLT:($,W)=>A(()=>{let J=X(),Y=q($)<q(W);return!!(J||Y)}),orThisIsLTE:($,W)=>A(()=>{let J=X(),Y=q($)<=q(W);return!!(J||Y)}),orThisIsGT:($,W)=>A(()=>{let J=X(),Y=q($)>q(W);return!!(J||Y)}),orThisIsGTE:($,W)=>A(()=>{let J=X(),Y=q($)>=q(W);return!!(J||Y)}),andThisIsLT:($,W)=>A(()=>{let J=X(),Y=q($)<q(W);return!!(J&&Y)}),andThisIsLTE:($,W)=>A(()=>{let J=X(),Y=q($)<=q(W);return!!(J&&Y)}),andThisIsGT:($,W)=>A(()=>{let J=X(),Y=q($)>q(W);return!!(J&&Y)}),andThisIsGTE:($,W)=>A(()=>{let J=X(),Y=q($)>=q(W);return!!(J&&Y)})}},v=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...A(Q),get result(){return B(X)},add:(Z)=>v(()=>{return X()+q(Z)}),sub:(Z)=>v(()=>{return X()-q(Z)}),mul:(Z)=>v(()=>{return X()*q(Z)}),div:(Z)=>v(()=>{return X()/q(Z)}),mod:(Z)=>v(()=>{return X()%q(Z)}),pow:(Z)=>v(()=>{return X()**q(Z)}),isBetween:(Z,$,W=!0,J=!0)=>A(()=>{let Y=X(),U=q(Z),G=q($),_=W?Y>=U:Y>U,F=J?Y<=G:Y<G;return _&&F}),isLT:(Z)=>A(()=>X()<q(Z)),isLTE:(Z)=>A(()=>X()<=q(Z)),isGT:(Z)=>A(()=>X()>q(Z)),isGTE:(Z)=>A(()=>X()>=q(Z))}},cX=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...A(Q),lengthBetween:(Z,$,W=!0,J=!0)=>A(()=>{let U=X().length,G=q(Z),_=q($),F=W?U>=G:U>G,j=J?U<=_:U<_;return F&&j}),lengthEquals:(Z)=>A(()=>{return X().length===q(Z)}),lengthNotEquals:(Z)=>A(()=>{return X().length!==q(Z)}),lengthLT:(Z)=>A(()=>{return X().length<q(Z)}),lengthLTE:(Z)=>A(()=>{return X().length<=q(Z)}),lengthGT:(Z)=>A(()=>{return X().length>q(Z)}),lengthGTE:(Z)=>A(()=>{return X().length>=q(Z)})}},w=(Q)=>{let Z=(typeof Q==="function"?Q:()=>q(Q))();return typeof Z==="number"?v(Q):typeof Z==="string"||Array.isArray(Z)?cX(Q):A(Q)},AQ=(...Q)=>Q.map((X)=>q(X)),o=(Q)=>{return{get string(){return B(()=>{let X=q(Q);return X===void 0||X===null?void 0:X.toString()})},or:(X)=>B(()=>q(Q)||q(X))}},mX=(Q)=>{let Z=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce(($,W)=>{let J=(...Y)=>{return B(()=>{let U=AQ(...Y);return q(Q)[W](...U)})};return $[W]=J,$},{});return{...o(Q),...Z,concat:($)=>B(()=>q(Q).concat(q($))),every:($)=>B(()=>q(Q).every($)),filter:($)=>B(()=>q(Q).filter($)),find:($)=>B(()=>q(Q).find($)),findIndex:($)=>B(()=>q(Q).findIndex($)),findLast:($)=>B(()=>q(Q).findLast($)),findLastIndex:($)=>B(()=>q(Q).findLastIndex($)),get lastItem(){return B(()=>{return p(q(Q)).pop()})},get length(){return B(()=>q(Q).length)},map:($)=>B(()=>q(Q).map($)),partition:($)=>{let W=B(()=>q(Q).filter($)),J=B(()=>q(Q).filter((Y,U,G)=>!$(Y,U,G)));return[W,J]},reduce:($,W)=>B(()=>q(Q).reduce($,W)),reduceRight:($,W)=>B(()=>q(Q).reduceRight($,W)),get reversed(){return B(()=>q(Q).toReversed())},some:($)=>B(()=>q(Q).every($)),toSorted:($)=>B(()=>q(Q).toSorted($)),toSpliced:($,W,...J)=>B(()=>q(Q).toSpliced(q($),q(W),...J))}},pX=(Q)=>{let Z=["toExponential","toFixed","toPrecision"].reduce(($,W)=>{let J=(...Y)=>{return B(()=>{let U=AQ(...Y);return q(Q)[W](...U)})};return $[W]=J,$},{});return{...o(Q),...Z,toConfined:($,W)=>B(()=>q(Q)<q($)?q($):q(Q)>q(W)?q(W):q(Q)),toLocaleString:($,W)=>B(()=>q(Q).toLocaleString(q($),W))}},uX=(Q)=>{if(!JQ(q(Q)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...o(Q),prop:(X)=>B(()=>q(Q)[X]),get props(){return Object.keys(q(Q)).reduce((Z,$)=>{let W=$;return Z[W]=this.prop(W),Z},{})},get keys(){return B(()=>Object.keys(q(Q)))}}},dQ=(Q)=>{let Z=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce(($,W)=>{let J=(...Y)=>{return B(()=>{let U=AQ(...Y);return q(Q)[W](...U)})};return $[W]=J,$},{});return{...o(Q),...Z,get length(){return B(()=>q(Q).length)},get lowercase(){return B(()=>q(Q).toLowerCase())},get Sentencecase(){return B(()=>{let $=q(Q);return $.charAt(0).toUpperCase()+$.slice(1).toLowerCase()})},get TitleCase(){return B(()=>q(Q).toLowerCase().replace(/\b\w/g,($)=>$.toUpperCase()))},get UPPERCASE(){return B(()=>q(Q).toUpperCase())},localeCompare:($,W,J)=>B(()=>q(Q).localeCompare(q($),q(W),J)),normalize:($)=>B(()=>q(Q).normalize(q($))),replace:($,W)=>B(()=>q(Q).replace(q($),q(W))),replaceAll:($,W)=>B(()=>q(Q).replaceAll(q($),q(W))),search:($)=>B(()=>q(Q).search($)),split:($,W)=>B(()=>{let J=$ instanceof RegExp?$:q($);return q(Q).split(J,q(W))}),toLocaleLowerCase:($)=>B(()=>q(Q).toLocaleLowerCase(q($))),toLocaleUpperCase:($)=>B(()=>q(Q).toLocaleUpperCase(q($)))}},rX=x("dksjfbksjnd"),m1=dQ(rX).split(""),k=(Q)=>{return typeof q(Q)==="number"?pX(Q):typeof q(Q)==="string"?dQ(Q):Array.isArray(q(Q))?mX(Q):JQ(q(Q))?uX(Q):o(Q)},R=(Q,...X)=>B(()=>{return Q.reduce((Z,$,W)=>{let J,Y=X[W];if(typeof Y==="function")J=Y()??"";else if(OQ(Y))J=Y.value??"";else J=Y??"";return`${Z}${$}${J.toString()}`},"")}),oQ=["onmount","onunmount"],sQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],dX=[...sQ,...oQ],oX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],l,nQ=(Q)=>{if(!l)l=document.createElement("textarea");return l.innerHTML=Q,l.value},sX=(Q)=>{try{return decodeURIComponent(Q)}catch{return Q}},nX=(Q)=>{return Q.replace(/\\u[\dA-Fa-f]{4}/g,(X)=>String.fromCharCode(parseInt(X.slice(2),16))).replace(/\\x[\dA-Fa-f]{2}/g,(X)=>String.fromCharCode(parseInt(X.slice(2),16)))},iX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},iQ=iX(),L={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},lQ=(Q,X,Z)=>{let $=Q;$=nQ($),$=sX($),$=nX($);let W=$.trim().toLowerCase();for(let J of X)if(J.test(W))throw Z;return Q},lX=(Q)=>lQ(Q,[/^javascript\s*:/i,/^data\s*:/i,/^vbscript\s*:/i,/^file\s*:/i],'The href attribute value starting with one of "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),aX=(Q)=>lQ(Q,[/url\s*\(/i,/expression\s*\(/i,/javascript\s*:/i,/data\s*:/i,/vbscript\s*:/i,/file\s*:/i],'The style attribute value starting with one of "url(..", "expression(..", "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),tX=(Q,X)=>{if(Q==="href"){if(typeof X==="boolean")throw"The value of 'href' attribute should not be a boolean";return lX(X||"")}if(Q==="style"){if(typeof X==="boolean")throw"The value of 'style' attribute should not be a boolean";return aX(X||"")}return X},QQ=(Q)=>Array.isArray(Q),XQ=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,u=(Q)=>Q===void 0||typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,EQ=(Q)=>b(Q)&&u(Q.value),eX=(Q)=>u(Q)||EQ(Q),aQ=(Q)=>{return b(Q)&&(u(Q.value)||QQ(Q.value)&&Q.value.every((X)=>u(X)))},tQ=(Q)=>{return!b(Q)&&(uQ(Q)||rQ(Q)||u(Q)||QQ(Q)&&Q.every((X)=>eX(X)))},fQ=(Q)=>{return aQ(Q)||tQ(Q)},IQ=!1,Q0={},m={},X0=globalThis.MutationObserver,$0=new X0((Q)=>{Q.forEach((X)=>{if(X.type==="childList")X.addedNodes.forEach((Z)=>{if(XQ(Z)){let $=Z,W=$.elementId;if(m[W])delete m[W];else Q0[W]=$.tagName}}),X.removedNodes.forEach((Z)=>{if(XQ(Z)){let $=Z,W=$.elementId,J=$.unmountListener;if(J)m[W]={element:$,unmountListener:J}}})}),Object.entries(m).forEach(([X,Z])=>{let{element:$,unmountListener:W}=Z;eQ($,W)})}),eQ=(Q,X)=>{if(!XQ(Q))return;let Z=Q.children;for(let $=0;$<Z.length;$++){let W=Z[$];eQ(W,W.unmountListener)}if(X&&X(Q),m[Q.elementId])delete m[Q.elementId]},Z0=()=>{if(!IQ&&!L.currentIs("build"))$0.observe(document.body,{childList:!0,subtree:!0}),IQ=!0},QX=(Q,X)=>dX.includes(Q)&&X===void 0,XX=(Q,X)=>sQ.includes(Q)&&typeof X==="function",$X=(Q,X)=>oQ.includes(Q)&&typeof X==="function",W0=(Q,X)=>QX(Q,X)||XX(Q,X)||$X(Q,X),J0=(Q,X)=>{Object.entries(X).forEach(([Z,$])=>{if(QX(Z,$));else if(XX(Z,$)){let W=Z.slice(2);Q.addEventListener(W,(J)=>{if(W==="keypress")J.preventDefault();$(J)})}else if($X(Z,$)){if(Z==="onmount"&&!L.currentIs("build")){let W=$;setTimeout(()=>W(Q),0)}if(Z==="onunmount")Z0(),Q.unmountListener=$}else console.error(`Invalid event key: ${Z} for element with tagName: ${Q.tagName}`)})},gQ=(Q,X,Z)=>{let $=OQ(Z)?Z.value:Z,W=tX(X,$);if(typeof W==="boolean")if(W)Q.setAttribute(X,"");else Q.removeAttribute(X);else if(X==="value")Q.value=W||"";else Q.setAttribute(X,W||"")},Y0=(Q,X)=>{let Z={};Object.entries(X).forEach(($)=>{let[W,J]=$;if(b(J))Z[W]=J;gQ(Q,W,J)}),d(()=>{Object.entries(Z).forEach(($)=>{let[W,J]=$,Y=J.value;if(!L.currentIs("run"))return;gQ(Q,W,Y)})})},a=(Q)=>{if(EQ(Q)){let X=Q.value;return a(X)}if(!Q||typeof Q==="string")return document.createTextNode(nQ(Q||""));if(u(Q)){let X=Q();if(!XQ(X))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return X}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},z0=(Q,X)=>{if(!X)return;if(aQ(X))d(()=>{let $=X.value,W=QQ($)?$:[$];W.forEach((Y,U)=>{let G=Q.childNodes[U],_=a(Y);if(G&&_)Q.replaceChild(_,G);else if(_)Q.appendChild(_);else console.error(`No child found for node with tagName: ${Q.tagName}`)});let J=W.length;while(J<Q.childNodes.length){let Y=Q.childNodes[J];if(Y)Q.removeChild(Y)}});if(tQ(X)){let Z=uQ(X)?[X.value]:rQ(X)?X.value:QQ(X)?X:[X],$=[];if(Z.forEach((W,J)=>{if(EQ(W))$.push({index:J,childSignal:W});let Y=a(W),U=Q.childNodes[J];if(U&&Y)Q.replaceChild(Y,U);else if(!U&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)}),$.length)$.forEach(({index:W,childSignal:J})=>{d(()=>{if(!J.value)return;if(!L.currentIs("run"))return;let Y=a(J.value),U=Q.childNodes[W];if(U&&Y)Q.replaceChild(Y,U);else if(!U&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)})})}},q0=(Q,X)=>{let Z=void 0,$={},W={};return Object.entries(Q).forEach(([J,Y])=>{if(J==="children")if(fQ(Y))Z=Y;else if(Y===void 0)Z=Y;else throw new Error(`Invalid children prop for node with tagName: ${X}

 ${JSON.stringify(Y)}`);else if(W0(J,Y))$[J]=Y;else W[J]=Y}),{children:Z,eventProps:$,attributeProps:W}},U0=(Q,X)=>{let Z=()=>{let $=iQ.getNewId(),W=L.currentIs("mount")?document.querySelector(`[data-elem-id="${$}"]`):document.createElement(Q);W.elementId=$,W.unmountListener=void 0;let J=fQ(X)?{children:X}:X;if(!L.currentIs("run"))J["data-elem-id"]=W.elementId.toString();let Y=q0(J,W.tagName);if(J0(W,Y.eventProps),Y0(W,Y.attributeProps),z0(W,Y.children),!L.currentIs("build"))W.removeAttribute("data-elem-id");return W};return Z.isElementGetter=!0,Z},CQ=(Q,X,Z)=>{let $=x(X),W=x(Q),J=Z(B(()=>W.value),B(()=>$.value)),Y,U,G=!1;if(J?.isElementGetter)Y=()=>{if(G&&U)return U;return U=J(),G=!0,U},Y.isElementGetter=!0;else if(!J||typeof J==="string")Y=J||"";else throw`One of the child, ${J} passed in ForElement is invalid.`;return{indexSignal:$,itemSignal:W,mappedChild:Y}},yQ=(Q,X,Z)=>{if(X!==void 0&&X>=0&&Z){let $=X>Q.length?Q.length:X;Q.splice($,0,Z)}return Q},G0=({subject:Q,itemKey:X,map:Z,n:$,nthChild:W})=>{if(W&&$===void 0||$!==void 0&&$>-1&&!W)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let J=B(()=>{let O=q(Q);return Array.isArray(O)?O:[]});if(!X)return B(()=>yQ(J.value.map(Z),$,W));let Y=W;if(W&&typeof W!=="string"){let O=W(),P=()=>O;P.isElementGetter=!0,Y=P}let U=J.value;if(U.length&&typeof U[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let G=null,_=B((O)=>{return G=O||G,J.value}),F=B((O)=>{if(!O||!G)return _.value.map((T,D)=>CQ(T,D,Z));return vX(G,_.value,X).map((M,T)=>{let D=(O||[])[M.oldIndex];if(console.assert(M.type==="add"&&M.oldIndex===-1&&!D||M.oldIndex>-1&&!!D,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),D){if(M.type==="shuffle")D.indexSignal.value=T;if(M.type==="update")D.indexSignal.value=T,D.itemSignal.value={...M.value};return D}return CQ(M.value,T,Z)})});return B(()=>yQ(F.value.map((O)=>O.mappedChild),$,Y))},B0=({subject:Q,isTruthy:X,isFalsy:Z})=>{let $=z.Span({style:"display: none;"}),W=()=>(q(Q)?X:Z)||$;return b(Q)?B(W):W()},_0=({subject:Q,caseMatcher:X,defaultCase:Z,cases:$})=>{let W=()=>{let J=q(Q),Y=void 0;for(let[U,G]of Object.entries($))if(X&&X(Q,U)||J===U){Y=G;break}return Y||Z||z.Span({style:"display: none;"})};return b(Q)?B(W):W()},R0=oX.reduce((Q,X)=>{let Z=X.split("").map((W,J)=>!J?W.toUpperCase():W).join(""),$=(W)=>U0(X,W);return Q[Z]=$,Q},{}),F0={For:G0,If:B0,Switch:_0},z={...R0,...F0},E=(Q)=>(X)=>{for(let $ of Object.keys(X))if(X[$]===void 0)delete X[$];let Z=Object.entries(X).reduce(($,W)=>{let[J,Y]=W,U=typeof Y==="string",G=Array.isArray(Y)&&Y.every((F)=>typeof F==="string"),_=b(Y)||typeof Y==="function"?Y:U||G?{type:"non-signal",get value(){return q(Y)}}:fQ(Y)?Y:{type:"non-signal",get value(){return q(Y)}};return $[J]=_,$},{});return Q(Z)},ZX=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],K0=[1,1,1,1,1,1,1],P0=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],_Q=["Not started","Completed"],j0=[70,60,45],RQ={id:"analytics",lastInteraction:new Date().getTime()},$Q={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},bQ=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}],O0=60000,ZQ=86400000,A0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],E0=["January","February","March","April","May","June","July","August","September","October","November","December"],f0=(Q)=>Q*O0,WX=(Q,X)=>A0[Q].substring(0,X),M0=(Q,X)=>E0[Q].substring(0,X),MQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},g=(Q)=>MQ(Q).getTime(),s=(Q,X)=>g(Q)===g(X),w0=(Q,X)=>{let Z=X||new Date;return g(Q)>g(Z)},wQ=(Q,X)=>{let Z=g(Q),$=g(X);return Math.round(($-Z)/ZQ)},k0=(Q)=>wQ(new Date,Q),kQ=(Q,X)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+X),D0=(Q,X)=>{if(X<1)throw"N should be some positive integer";let Z=g(Q);return Array(X).fill(0).map(($,W)=>new Date(Z-(X-1-W)*ZQ))},N0=(Q)=>{let X=new Date;return Array(Q).fill(0).map((Z,$)=>new Date(X.getFullYear(),X.getMonth()-$,1)).reverse()},T0=(Q,X)=>{let Z=g(Q),$=g(X);if(Z===$)return[MQ(new Date(Z))];let W=Z<$?Z:$,Y=((Z<$?$:Z)-W)/ZQ;return Array(Y+1).fill(0).map((U,G)=>new Date(W+G*ZQ))},H0=(Q)=>{if(Q<1)throw"";let X=new Date,Z=X.getFullYear(),$=X.getMonth(),W=new Date(Z,$-(Q-1),1),J=new Date(Z,$+1,0);return{startDate:W,endDate:J}},JX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},x0=(Q)=>location.href=Q,YX=()=>location.href=JX.HABITS.NEW.href,L0=(Q)=>location.href=`${JX.HABITS.HABIT.href}?id=${Q}`,S0=1.6181,V0=(Q)=>P0.find((X)=>X.code===Q),zX=(Q,X)=>{return Q<0?V0(-1):{isMaxLevel:Q===X.length-1,name:X[Q],code:Q}},I0=(Q)=>({level:zX(-1,[]),date:Q}),g0=(Q,X,Z)=>({level:zX(Q,X),date:Z}),DQ=(Q,X)=>Q.find((Z)=>s(Z.date,X)),C0=(Q)=>q1().filter((X)=>{let Z=!X.isStopped,$=X.frequency[Q.getDay()],W=g(Q)>=g(new Date(X.id));return Z&&$&&W}),YQ=(Q)=>{let X=MQ(new Date(Q.id));return{...Q,startDate:X,levels:Q.levels.map((Z,$)=>({isMaxLevel:$===Q.levels.length-1,name:Z,code:$})),tracker:Q.tracker.map((Z,$)=>g0(Z,Q.levels,kQ(X,$))),milestones:b0(Q.milestones)}},y0=(Q)=>{return{...Q,levels:Q.levels.map((X)=>X.name),tracker:Q.tracker.map((X,Z)=>X.level.code),milestones:h0(Q.milestones)}},qX=()=>{let X={id:new Date().getTime(),title:"",frequency:K0,colorIndex:0,levels:_Q,tracker:[],milestones:j0,pauses:[],isStopped:!1};return YQ(X)},b0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],h0=(Q)=>Q.filter((X)=>!!X.percent).map((X)=>X.percent),UX=(Q,X)=>{let Z=Q[0];for(let $=0;$<Q.length;$++)if(Z=Q[$],Z.percent<=X)break;return{label:Z.label,icon:Z.icon,color:Z.color}},v0=(Q,X)=>{if(!Q.title)return"Title should not be empty";if(X&&U1(Q.title))return"A habit with same name already exists";if(Q.frequency.every(($)=>!$))return"Select at least one day in a week";if(!Q.levels.every(($)=>!!$.name))return"One of the levels is empty";if(Q.levels.some(($,W)=>{for(let J=W+1;J<Q.levels.length;J++)if(Q.levels[J].name===$.name)return!0;return!1}))return"Multiple levels have same name";if(!Q.milestones.every(($)=>$.percent<=100&&$.percent>=0))return"The milestones should be between 0 and 100 percents";if(!Q.milestones.every(($,W,J)=>W===0?!0:J[W-1].percent>$.percent))return"Milestones should be in order (from high to low)";return""},GX=(Q,X,Z)=>{let $=BX(Q.tracker,X,Z),W=Q.levels.length-1,J=0,Y=0,U=0,G=0,_=0,F=0;return $.forEach((j,O)=>{if(J+=j.level.code>-1?1:0,Y+=j.level.code>0?1:0,U+=j.level.code>0?j.level.code:0,O===$.length-1)return;let M=j.level.code<1;F=M?F+1:0;let D=100*((j.level.code>0?j.level.code:0)/(Q.levels.length-1));G=Math.round(D)>50?G+1:0,_=M?0:_+1}),{title:Q.title,aceStreak:G,followStreak:_,missed:F,percent:Math.round(100*(U/(J*W))),totalDays:J,workingDays:Y}},c0=(Q,X,Z)=>{let $=!!Q.length;if(!$)return{hideAddButton:!1,hideRemoveButton:X.length<3};let W=X[Z],J=!!($&&Q.find((O)=>O.name===W.name)),Y=Q.length!==X.length,U=X.length<Q.length,G=X.length>Q.length,_=!Y&&Q.length&&Q.some((O,P)=>O.name!==X[P].name);return{hideAddButton:U||_||J&&U,hideRemoveButton:U||_||J&&G}},m0=(Q,X,Z)=>{let $=!!Q.length,W=X[Z],J=!!($&&Q.find((U)=>U.name===W.name)),Y=Q.length!==X.length;return J&&Y},p0=(Q,X,Z,$=!1)=>{let W=ZX[Z],J=Q/(X-1),U=Math.trunc(Math.pow(J,S0)*255).toString(16),G=U.length===1?`0${U}`:U,_=Q<0||G==="0"?"transparent":`${W}${G}`,F=$?Q/(X-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:_,fontColor:F,peakBackgroundColor:W,levelPercent:Math.round(J*100)}},u0=(Q,X,Z)=>{let $=MX(Q.id),W=$.tracker.map((Y)=>{if(s(Y.date,Z))return{...Y,level:{...Y.level,code:X}};return Y}),J={...$,tracker:W};xQ(J)},r0=(Q,X)=>{let Z=[];for(let $ of X)if(!Q.some((J)=>{if(s(J.date,$))return Z.push(J),!0;return!1}))Z.push(I0($));return Z},BX=(Q,X,Z)=>{let $=T0(X,Z);return r0(Q,$)},d0=(Q)=>{let Z=wQ(new Date,Q);if(Z<-2)return`${-Z} days back`;if(Z===-2)return"Day before yesterday";if(Z===-1)return"Yesterday";if(Z===0)return"Today";if(Z===1)return"Tomorrow";if(Z===2)return"Day after tomorrow";return`${Z} days after`},o0=(Q)=>{let X=new Date,Z=new Date(Q),$=-k0(Z);if($===0)return"Just created this habit today";if($===1)return"This habit started from yesterday";if($>1&&$<5)return`Started following this ${$} back`;let{aceStreak:W,followStreak:J,missed:Y}=GX(MX(Q),kQ(X,-$),X);if(W>=12)return`Nailed ${W} days in a row. Woah! Don't stop.`;if(W>=4)return`Doing good for ${W} days straight! Keep it up.`;if(J>=15)return`Didn't miss for ${J} days in a row. Kudos!`;if(J>=4)return`${J} days in a row. Nice! keep going.`;if(Y)`Missed ${Y} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},s0=(Q,X,Z)=>{if(!Q.length||Q.length===X.length)return Z;let $=[...Z],W=[];return Q.forEach((J,Y)=>{let U=X.find((j)=>j.name===J.name),G=!U,_=(j)=>{let O=[];Z.forEach((P,M)=>{if(P.level.code===J.code)O.push(M)}),W.push({indices:O,newLevel:j})};if(G){if(Y===Q.length-1)_(X[X.length-1]);return}if(U.code===J.code)return;_(U)}),W.forEach((J)=>{J.indices.forEach((Y)=>{$[Y]={...$[Y],level:J.newLevel}})}),$},hQ=(Q)=>{let X=Q.length-1;for(let Z=0;Z<Q.length;Z++)Q[Z]={...Q[Z],code:Z,isMaxLevel:Z===X};return Q},n0=()=>{let Q=new Date().getTime(),X=z1();return Q-X>f0(1)},i0=(Q,X)=>{let Z=Q.map(($)=>DQ($.tracker,X));return{done:Z.reduce(($,W)=>$+(W.level.isMaxLevel?1:0),0),started:Z.reduce(($,W)=>$+(W.level.code>0&&!W.level.isMaxLevel?1:0),0),notDone:Z.reduce(($,W)=>$+(W.level.code===0?1:0),0),total:Q.reduce(($,W)=>$+W.levels.length-1,0)}},l0=(Q,X)=>{let Z=i0(Q,X);if(Z.done===0&&Z.started===0&&Z.notDone===0)return"";if(Z.done===0&&Z.started===0&&Z.notDone>0)return`Update below ${Z.notDone} tsaks for the day.`;if(Z.done>0&&Z.started===0&&Z.notDone===0)return"Great! All tasks updated.";return`
    ${Z.done?`${Z.done} done.`:""}
    ${Z.started?` ${Z.started} started.`:""}
    ${Z.notDone?` ${Z.notDone} yet to start.`:""}
  `},a0=(Q)=>[{label:"Today",icon:"calendar_month",isSelected:Q==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Q==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Q==="/settings/",href:"/settings/"}],t0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},NQ=(Q,X,Z)=>{let $=JSON.parse(Q||"{}"),W=$&&typeof $==="object",J=$[X];if(!W||!(Z?J===Z:!!J))return;return $},N=(Q)=>{return(...X)=>{return t0(),fX(new Date),Q&&Q(...X)}},_X="analytics",e0="id",Q1="analytics",RX=(Q)=>{localStorage.setItem(_X,JSON.stringify(Q))},FX=()=>{if(!L.currentIs("run"))return RQ;let Q=()=>{let $=localStorage.getItem(_X);return NQ($,e0,Q1)};if(!Q())RX(RQ);let Z=Q();if(!Z)throw"Error fetching analytics";return Z},KX=()=>{let Q=[];for(let X in localStorage){if(!localStorage.hasOwnProperty(X))continue;Q.push(X)}return Q},PX=(Q)=>Q.startsWith("h."),TQ=(Q)=>`h.${Q}`,jX=(Q)=>{if(!PX(Q))return;let X=localStorage.getItem(Q),Z=NQ(X,"title");if(!Z)return;return Z},X1=()=>{for(let Q of KX())if(PX(Q))return!1;return!0},HQ=()=>{if(!L.currentIs("run"))return[];let Q=[];for(let X of KX()){let Z=jX(X);if(!Z)continue;Q.push(Z)}return Q},OX=(Q)=>{let X=TQ(Q.id);localStorage.setItem(X,JSON.stringify(Q))},$1=(Q)=>{let X=TQ(Q);localStorage.removeItem(X)},AX="settings",Z1="id",W1="local-settings",EX=(Q)=>{localStorage.setItem(AX,JSON.stringify(Q))},J1=()=>{if(!L.currentIs("run"))return $Q;let Q=()=>{let $=localStorage.getItem(AX);return NQ($,Z1,W1)};if(!Q())EX($Q);let Z=Q();if(!Z)throw"Error fetching settings";return Y1(Z),Q()},Y1=(Q)=>{if(!Q.editPage)EX({...Q,editPage:$Q.editPage})},z1=()=>{if(!L.currentIs("run"))return RQ.lastInteraction;return FX().lastInteraction},fX=(Q)=>{let X=FX();RX({...X,lastInteraction:Q.getTime()})},MX=(Q)=>{let X=TQ(Q),Z=jX(X);if(!Z)throw`Error fetching habit with id '${Q}' from storage`;return YQ(Z)},q1=()=>{return HQ().map((X)=>YQ(X))},U1=(Q)=>{let Z=HQ().find(($)=>$.title.trim()===Q.trim());return Z?YQ(Z):void 0},wX=()=>{let Q=HQ();for(let X of Q){let Z=new Date(X.id),$=new Date,W=wQ(Z,$),J=[...X.tracker];if(W+2<=J.length)continue;let Y=J.length-1,U=new Date(Z.getFullYear(),Z.getMonth(),Z.getDate()+Y),G=U.getDay();if(s($,U)){let _=J[Y];J[Y]=X.frequency[G]?_<0?0:_:-1}for(let _=J.length;_<=W;_++){let j=new Date(Z.getFullYear(),Z.getMonth(),Z.getDate()+_).getDay();J[_]=X.frequency[j]?0:-1}X.tracker=J,OX(X)}},xQ=(Q)=>{let X=y0(Q);OX(X)},G1=(Q)=>{let X={...Q,isStopped:!0};xQ(X)},B1=(Q)=>$1(Q),_1=()=>{return J1().editPage},R1=E(({cssClasses:Q,hideRemove:X,hideAdd:Z,onRemove:$,onAdd:W})=>{let J=w(X).and(Z).ternary("bn","ba"),Y=w(Z).ternary("","br");return z.Span({class:R`br3 pb1 f4 bw1 b--light-silver dark-gray ${J} ${Q}`,children:[z.If({subject:X,isFalsy:z.Span({class:R`pointer ph2 pb1 bw1 b--light-silver ${Y}`,onclick:N($),children:"-"})}),z.If({subject:Z,isFalsy:z.Span({class:"pointer ph2 pb1",onclick:N(W),children:"+"})})]})}),y=E(({cssClasses:Q,onTap:X,children:Z})=>z.Button({class:R`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,onclick:N(()=>X()),children:Z})),p1=E(({cssClasses:Q})=>{return z.Div({class:R`bb b--light-gray ${Q}`})}),C=E(({cssClasses:Q,size:X,onClick:Z,iconName:$,title:W})=>{let J=Z?"pointer":"",Y=k(X).or(16);return z.Span({class:R`material-symbols-outlined ${J} ${Q}`,style:R`font-size: ${Y}px`,onclick:N(Z),children:$,title:W})}),FQ=E(({cssClasses:Q,href:X,target:Z,onClick:$,children:W})=>{let J=w(X).or($).ternary("pointer underline","");return z.A({...X?{href:X}:{},class:R`noselect ${J} ${Q}`,target:Z,onclick:N($),children:W})}),zQ=E(({cssClasses:Q,isOpen:X,content:Z,onTapOutside:$})=>{let W=(J)=>{setTimeout(()=>d(()=>{if(X.value)J.showModal();else J.close()}))};return z.Dialog({onmount:W,onclick:N($),class:R`pa0 br3 ${Q}`,children:[z.Div({onclick:(J)=>J.stopPropagation(),children:Z})]})}),F1=E(({cssClasses:Q,placeholder:X,num:Z,onchange:$})=>{let W=(J)=>{let Y=J.target.value,U=Number.parseFloat(Number.parseFloat(Y||"0").toFixed(2));$(U)};return z.Input({class:Q,type:"number",placeholder:X,value:k(Z).string,onchange:W})}),K1=E(({progress:Q,cssClasses:X})=>{return z.Div({class:R`br-pill bg-moon-gray ${X}`,children:z.Div({class:"br-pill bg-app-theme-color pa1",style:R`width: ${k(Q).toConfined(0,100)}%;`})})}),kX=E(({cssClasses:Q,header:X,content:Z,bottombar:$})=>{return z.Div({class:"flex-ns justify-center-ns",children:z.Div({class:R`w6-ns ${Q}`,children:[z.If({subject:X,isTruthy:z.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:X})}),Z,z.Div({class:"pv6 mt5"}),z.If({subject:$,isTruthy:z.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:$})})]})})}),u1=E(({cssClasses:Q,tabItemCssClasses:X,selectedTabCssClasses:Z,tabs:$,selectedTabIndex:W,onTabChange:J})=>{let Y=(U)=>U===W.value?`b--light-silver b black ${Z?.value}`:"pointer b--transparent b--hover-black silver pointer";return z.Div({class:R`bg-white br3 ${Q}`,children:z.Div({class:"flex items-center justify-between pa1",children:z.For({subject:$,map:(U,G)=>z.Span({class:R`
                w-100 br3 pv2dot5 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${Y(G)} ${X}`,onclick:N(()=>J(G)),children:U})})})})}),vQ=E(({cssClasses:Q,placeholder:X,disabled:Z,text:$,onmount:W,onchange:J,onkeydown:Y,onfocus:U,onblur:G})=>{let _,F=(P)=>{if(_=P,W)W(P)},j=(P)=>{let M=P.target.value;if(J)J(M)},O=(P)=>{let M=P.key.length===1?_.value+P.key:P.key==="Backspace"?_.value.slice(0,-1):_.value,T={key:P.key,text:M};if(Y)Y(T)};return z.Input({onmount:F,class:R`${Q}`,type:"text",placeholder:X,disabled:w(Z).truthy,value:$,onchange:j,onkeydown:O,onfocus:U,onblur:G})}),r1=E(({cssClasses:Q,isOn:X,onToggle:Z})=>{let $=w(X).ternary("b--transparent","b--moon-gray bg-moon-gray"),W=w(X).ternary("b--mid-gray bg-mid-gray","b--transparent");return z.Div({class:R`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,onclick:N(Z),children:[z.Div({class:R`br-100 ba bw1 b--hover-black pa1 ${$}`}),z.Div({class:"pa05"}),z.Div({class:R`br-100 ba bw1 b--hover-black pa1 ${W}`})]})}),DX=E(({cssClasses:Q,justifyCssClasses:X,label:Z})=>{let $=k(X).or("justify-end"),W=k(Z).or("Add habit");return z.Div({class:R`w-100 flex ${$} ${Q}`,children:y({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[C({cssClasses:"nl1 mr1",size:22,iconName:"add"}),W],onTap:YX})})}),qQ=E(({cssClasses:Q,dotCssClasses:X,colorIndex:Z,level:$,totalLevels:W,showText:J,textContent:Y,icon:U,iconSize:G,isRectangular:_,showHeight:F,onClick:j})=>{let O=w(_).ternary("br0","br-100"),P=w($).isLT(0).ternary("bg-transparent","bg-light-gray"),{peakBackgroundColor:M,backgroundColor:T,fontColor:D,levelPercent:h}=k(I(p0,$,W,Z,J)).props,n=k(Y).or("Î‡"),S=w(F).and(U).andThisIsGT(h,99).truthy,r=()=>{if(j&&$.value>=0)j()};return z.Span({class:R`pointer relative overflow-hidden ${O} ${P} ${Q}`,onclick:N(r),children:z.If({subject:F,isTruthy:z.Span({class:R`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${X}`,style:R`
            background-color: ${M};
            color: white;
            height: ${h}%;`,children:z.If({subject:S,isTruthy:C({iconName:U,size:G})})}),isFalsy:z.Span({class:R`flex items-center justify-around absolute absolute--fill ${X}`,style:R`
            background-color: ${T};
            color: ${D};`,children:z.If({subject:U,isTruthy:C({iconName:U,size:G}),isFalsy:z.Span(n)})})})})}),P1=E(({cssClasses:Q})=>{return y({cssClasses:R`pa3 flex items-center ${Q}`,children:[C({iconName:"arrow_back"}),z.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),d1=E(({cssClasses:Q,milestones:X,achievedMilestone:Z,completionPercent:$})=>{let W=k(Z).prop("color"),J=I((Y)=>Y>53?"Average completion":Y>43?"Avg completion":Y>35?"Completion":"",$);return z.Div({class:R`center ${Q}`,children:[z.Div({class:"pb2 w-100 relative",children:z.For({subject:X,map:(Y,U)=>{return j1({colorCss:`bg-${Y.color}`,percent:Y.upperLimit,hideUpperLimit:U===0})}})}),z.Div({class:R`nt3dot6 h1dot2 bw1 relative br b--${W}`,style:R`width: ${$}%;`,children:z.Div({class:R`relative flex items-start nt1 justify-between f7 mid-gray`,children:[z.Div(J),z.Div({class:R`absolute right-0 pr1 b f6 ${W}`,children:R`${$}%`})]})})]})}),j1=E(({colorCss:Q,hideUpperLimit:X,percent:Z})=>{let $=w(X).ternary("",R`${Z}%`),W=R`width: ${Z}%;`;return z.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:W,children:[z.Div({class:R`absolute absolute-fill h0dot15 w-100 ${Q}`}),z.Div({class:"flex justify-end w-100 pt2 f7",children:z.Div({class:"nr3 pb2 light-silver b",children:$})})]})}),O1=E(({cssClasses:Q,habit:X,date:Z,colorIndex:$,totalLevels:W})=>{let J=B(()=>{let Y=Z.value.getFullYear(),U=Z.value.getMonth(),G=new Date(Y,U,1),_=new Date(Y,U+1,0);return BX(X.value.tracker,G,_)});return z.Div({class:R`flex items-center ${Q}`,children:[z.Div({class:"f8 b w2 light-silver",children:B(()=>M0(Z.value.getMonth(),3))}),z.Div({class:"w-100 flex items-center justify-between",children:z.For({subject:J,map:(Y)=>qQ({cssClasses:"pa1",colorIndex:$,level:Y.level.code,totalLevels:W})})})]})}),o1=E(({cssClasses:Q,habit:X,months:Z,onClick:$})=>{let{milestones:W,title:J,colorIndex:Y,levels:U}=k(X).props,G=I((P,M)=>{let{startDate:T,endDate:D}=H0(P);return GX(M,T,D).percent},Z,X),_=I(UX,W,G),{icon:F,color:j}=k(_).props,O=I(N0,Z);return z.Div({class:R`pointer bg-white ${Q}`,onclick:N($),children:[z.Div({class:"flex items-center justify-between nt1 mb2",children:[z.Div({class:"f5 dark-gray b",children:J}),z.Div({class:"f6 silver b flex items-center",children:[C({cssClasses:R`mr1 ${j}`,iconName:F}),R`${G}%`]})]}),z.Div({class:"mt2 mb1",children:z.For({subject:O,map:(P)=>O1({cssClasses:"mb1",habit:X,date:P,colorIndex:Y,totalLevels:U.value.length})})})]})}),A1=E(({cssClasses:Q,editableHabit:X,editedHabit:Z,hideDescriptions:$,showFullCustomisations:W,onChange:J})=>{let Y=x(!1),U=k(W).or(Y),{title:G,frequency:_,levels:F,milestones:j,colorIndex:O}=k(Z).props,P=k(_).every((f)=>!!f),M="bg-mid-gray white",T="bg-near-white light-silver",D=w(P).ternary("bg-mid-gray white","bg-near-white light-silver"),h=w(Y).ternary("remove","add"),n=R`Show ${w(Y).ternary("Less","More")} Customisations`,S=(f)=>{J({...Z.value,title:f})},r=(f)=>{J({...Z.value,colorIndex:f})},i=(f)=>{if(f<-1||f>6)throw"Invalid day index";if(f===-1){J({...Z.value,frequency:[1,1,1,1,1,1,1]});return}let K=P.value?_.value.map((H)=>0):_.value;K[f]=P.value?1:K[f]?0:1,J({...Z.value,frequency:K})},xX=(f,K)=>{let H=F.value;H[K]={...H[K],name:f},J({...Z.value,levels:H})},LX=(f)=>{let K=F.value;K.splice(f,0,{isMaxLevel:!1,name:"",code:f}),J({...Z.value,levels:hQ(K)})},SX=(f)=>{let K=F.value;if(K.length<3)return;K.splice(f,1),J({...Z.value,levels:hQ(K)})},VX=(f,K)=>{if(K<0||K>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let H=[...Z.value.milestones];H[K]={...H[K],percent:f},J({...Z.value,milestones:H})};return z.Div({class:Q,children:[c({cssClasses:"pb1",title:"Weekdays",children:z.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:z.For({subject:Array(7).fill(0),n:0,nthChild:z.Span({class:R`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${D}`,children:"Daily",onclick:N(()=>i(-1))}),map:(f,K)=>{let H=B(()=>_.value[K]&&!P.value?"bg-mid-gray white":"bg-near-white light-silver");return z.Span({class:R`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${H}`,children:WX(K,1),onclick:N(()=>i(K))})}})})}),c({cssClasses:"pb2",title:"Title of the habit",children:vQ({cssClasses:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:G,onchange:S})}),z.If({subject:U,isTruthy:z.Div([c({cssClasses:"pb1",title:"Select a color tag",children:z.Div({class:"mb1 flex items-center",children:z.For({subject:ZX,map:(f,K)=>{let H=w(O).equals(K).ternary("#999","#f4f4f4");return z.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:R`border-color: ${H}`,onclick:N(()=>r(K)),children:z.Span({class:R`pa2 br-100`,style:`background-color: ${f}`})})}})})}),c({cssClasses:"pb3",title:"Status update levels",hideDescription:$,description:`
                  When updating a habit status in a day, we generally have only two levels - "${_Q[0]}"
                  or "${_Q[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.`,children:z.For({subject:F,map:(f,K)=>{let H=X?.value?.levels||[],SQ=F.value,{hideAddButton:IX,hideRemoveButton:gX}=c0(H,SQ,K),CX=m0(H,SQ,K);return z.Div({children:[z.Div({class:"flex items-center justify-between",children:[z.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[qQ({cssClasses:"w1 h2 br3 br--left ml1px",dotCssClasses:"br3 br--left",colorIndex:O,level:K,isRectangular:!0,totalLevels:F.value.length}),vQ({cssClasses:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${K}`,disabled:CX,text:f.name,onchange:(yX)=>xX(yX,K)})]}),R1({hideAdd:IX,hideRemove:gX,onAdd:()=>LX(K+1),onRemove:()=>SX(K)})]}),z.If({subject:w(F).lengthGT(K+1).truthy,isTruthy:z.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),c({title:"Habit completion goal",hideDescription:$,description:R`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>UX(Z.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.`,children:z.For({subject:j,n:0,nthChild:z.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[z.Span({class:"lh-copy",children:""}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),z.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(f,K)=>z.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[z.Span({class:"lh-copy flex items-center",children:[C({cssClasses:`mr2 ${f.color}`,size:20,iconName:f.icon}),f.label]}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.If({subject:K===3,isTruthy:z.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:F1({cssClasses:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:f.percent,onchange:(H)=>VX(H,K)})}),z.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),z.If({subject:W,isFalsy:y({cssClasses:"pv2 ph3 flex items-center",onTap:()=>Y.value=!Y.value,children:[C({cssClasses:"mr1",iconName:h}),n]})})]})}),s1=E(({editableHabit:Q,onMount:X})=>{let Z=x($Q.editPage),$=x(!1),W=x(!1),J=x(""),Y=x(qX()),U=I((S)=>S?`Edit '${S.title}'`:"Add new habit",Q),G=w(U).lengthGT(22).ternary("f2dot66",""),_=w(Q).ternary("Update","Add"),F=()=>$.value=!0,j=()=>$.value=!1,O=()=>{j(),history.go(-2)},P=()=>W.value=!0,M=()=>W.value=!1,T=()=>{G1(Y.value),M(),history.back()},D=(S)=>Y.value=S,h=()=>{if(J.value=v0(Y.value,!Q?.value),J.value)return;let S=Y.value,r=[...Q?.value?.levels||[]],i=s0(r,S.levels,S.tracker);xQ({...Y.value,tracker:i}),history.back()};return NX({onMount:()=>{if(X)X(),Y.value=Q?.value;Z.value=_1()},body:kX({cssClasses:"bg-white ph3",header:z.Div({class:G,children:U}),content:z.Div([z.If({subject:Q,isTruthy:z.Div([c({cssClasses:"pb2",title:"Actions",children:[f1({isOpen:$,habit:Y,onClose:j,onDone:O}),FQ({cssClasses:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:F}),w1({isOpen:W,habit:Y,onClose:M,onDone:T}),FQ({cssClasses:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:P})]})])}),A1({editableHabit:Q,editedHabit:Y,hideDescriptions:B(()=>!Z.value.showHints),showFullCustomisations:k(Z).prop("showFullCustomisation"),onChange:D})]),bottombar:z.Div({class:"bg-white w-100 pv3",children:[z.If({subject:J,isTruthy:z.Div({class:"red mb3",children:J})}),z.Div({class:"flex items-center justify-stretch",children:[P1({cssClasses:"w4dot50 w4dot25-ns"}),y({cssClasses:"w-100 pa3 ml3 b",children:_,onTap:h})]})]})})})}),E1=E(({cssClasses:Q})=>{return z.Div({class:R`flex flex-column items-center justify-around ${Q}`,children:[z.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),z.Div("Looks like, you just landed here!"),DX({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),f1=E(({isOpen:Q,habit:X,onClose:Z,onDone:$})=>{let W=()=>{B1(X.value.id),$()};return zQ({cssClasses:"bn w-30-ns",isOpen:Q,onTapOutside:Z,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:R`Delete '${()=>X.value.title}'?`}),z.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,z.Br({}),z.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),z.Div({class:"flex items-center justify-between f6",children:[y({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Z}),y({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:W})]})]})})}),M1=E(({isOpen:Q,habit:X,date:Z,showTitleInHeader:$,onClose:W,onChange:J})=>{let{title:Y,levels:U,tracker:G,colorIndex:_}=k(X).props,F=B(()=>$?.value?`Change status of  '${Y.value}'`:`Change status for ${Z.value.toDateString()}`);return zQ({cssClasses:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:W,content:z.Div({class:"mnw5",children:[z.Div({class:"f5 b tc pa3",children:F}),z.Div({class:"f5 mb1",children:z.For({subject:k(U).reversed,map:(j,O)=>{let P=U.value.length-1-O,M=R`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>DQ(G.value,Z.value)?.level.code===P?"bg-near-white black fw6":"gray fw5"}`,T=P<1?"b--light-silver":"b--transparent";return z.Div({class:M,onclick:N(()=>J(P)),children:[qQ({cssClasses:`pa1 mr3 ba b ${T}`,colorIndex:_,level:P,totalLevels:U.value.length,isRectangular:!0}),z.Span(j.name)]})}})})]})})}),w1=E(({isOpen:Q,habit:X,onClose:Z,onDone:$})=>{return zQ({cssClasses:"bn",isOpen:Q,onTapOutside:Z,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:R`Stop '${()=>X.value.title}'?`}),z.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",z.Br({}),z.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),z.Div({class:"flex items-center justify-between f6",children:[y({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:Z}),y({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:$})]})]})})}),k1=E(({cssClasses:Q,links:X})=>{return z.Div({class:R`flex items-center justify-between pv3 bg-near-white ${Q}`,children:z.For({subject:X,map:(Z)=>D1({label:Z.label,icon:Z.icon,isSelected:Z.isSelected,href:Z.href})})})}),D1=E(({cssClasses:Q,label:X,icon:Z,isSelected:$,href:W})=>{let J=w($).ternary("app-theme-color b","black");return z.Div({class:R`pointer noselect flex flex-column items-center justify-center pb2 ${J} ${Q}`,onclick:N(()=>x0(W.value)),children:[C({size:22,iconName:Z}),z.Div({class:"f7",children:X})]})}),N1=E(({cssClasses:Q,header:X,content:Z,navbarTop:$,route:W})=>{return kX({cssClasses:Q,header:X,content:Z,bottombar:z.Div({children:[z.If({subject:$,isTruthy:$}),k1({cssClasses:"nl3 nr3 ph4",links:I(a0,W)})]})})}),NX=E(({cssClasses:Q,body:X,onMount:Z})=>{return z.Html({lang:"en",children:[z.Head({children:[z.Title("Habits (by Cyfer)"),z.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),z.Meta({"http-equiv":"Content-Security-Policy",content:`
                default-src 'self';
                script-src 'self';
                style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
                font-src https://fonts.gstatic.com;
                object-src 'none';
                base-uri 'none';
              `}),z.Meta({charset:"UTF-8"}),z.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),z.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),z.Link({rel:"stylesheet",href:"/assets/styles.css"}),z.Link({rel:"manifest",href:"/manifest.json"})]}),z.Body({tabindex:"-1",class:Q,onmount:Z,children:[z.Script({src:"main.js",defer:"true"}),X]})]})}),c=E(({cssClasses:Q,contentCssClasses:X,title:Z,description:$,hideDescription:W,children:J})=>{let Y=w($).andNot(W).truthy;return z.Div({class:R`mt3 mb4 ${Q}`,children:[z.Div({class:"mb2 dark-gray f4 b",children:Z}),z.If({subject:Y,isTruthy:z.Div({class:"mb3 f6 silver fw5",children:$})}),z.Div({class:X,children:J})]})}),n1=E(({cssClasses:Q,iconSize:X,selectedOptionIndex:Z,onChange:$})=>{let W=x(!1),J=B(()=>bQ[Z.value]),Y=()=>W.value=!0,U=()=>W.value=!1,G=(F)=>F===J.value.label?"bg-near-white black fw6":"gray fw5",_=(F)=>{$(F),U()};return z.Div({class:Q,children:[cQ({cssClasses:"pointer",descending:k(J).prop("decending"),iconName:k(J).prop("icon"),size:k(X).or(20),onClick:Y}),zQ({cssClasses:"f5 normal ba bw0 outline-0",isOpen:W,onTapOutside:U,content:z.Div({children:[z.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),z.Div({class:"f5 mb1",children:z.For({subject:bQ,map:(F,j)=>z.Div({class:R`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>G(F.label)}`,onclick:N(()=>_(j)),children:[cQ({cssClasses:"ml1 mr2",descending:F.decending,iconName:F.icon,size:20}),z.Span(F.label)]})})})]})})]})}),cQ=E(({cssClasses:Q,descending:X,iconName:Z,size:$,onClick:W})=>{let J=W?"pointer":"",Y=w(X).ternary("arrow_upward","arrow_downward"),U=w($).mul(4).div(5).result;return z.Span({class:R`flex items-center ${J} ${Q}`,onclick:N(W),children:[C({cssClasses:"silver",iconName:Y,size:U}),C({size:$,iconName:Z})]})}),T1=E(({cssClasses:Q,progress:X})=>{return z.Div({class:R`flex flex-column justify-center items-center vh-100 ${Q}`,children:[z.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),z.Div({class:"f3 b mv3",children:"Habits"}),K1({cssClasses:"w-40",progress:X}),z.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),TX=new Date,KQ=x(!1),WQ=x(0),PQ=x(!1),H1=w(PQ).andThisIsLT(WQ,100).truthy,x1=D0(kQ(TX,2),7),V=x(TX),UQ=I(C0,V),L1=I(d0,V),S1=I(l0,UQ,V),V1=I((Q)=>Q.length===0?"No habit for the day! Add one.":Q.length<5?`Only ${Q.length} habits a day! Add more.`:"",UQ),GQ=x(!1),LQ=x(0),I1=k(UQ).at(LQ),HX=k(I1).or(qX()),g1=(Q)=>{GQ.value=!0,LQ.value=Q},C1=()=>{GQ.value=!1,LQ.value=0},y1=(Q)=>{u0(HX.value,Q,V.value),GQ.value=!1,V.value=new Date(V.value.getTime()+1)},b1=()=>{PQ.value=n0();let Q=setInterval(()=>{if(WQ.value+=1,WQ.value>=100)clearInterval(Q),PQ.value=!1,fX(new Date)},30)},mQ=()=>{wX(),V.value=new Date,KQ.value=X1()},h1=()=>{b1(),wX(),mQ(),window.addEventListener("pageshow",mQ)},v1=NX({cssClasses:"bg-white",onMount:h1,body:z.Div({children:[M1({isOpen:GQ,showTitleInHeader:!0,habit:HX,date:V,onClose:C1,onChange:y1}),z.If({subject:H1,isTruthy:T1({progress:WQ}),isFalsy:N1({cssClasses:"ph3 bg-white",route:"/",header:"Tasks in a day",content:z.Div(z.If({subject:KQ,isTruthy:E1({}),isFalsy:z.Div({children:[z.Div({onmount:(Q)=>Q.scrollLeft=Q.scrollWidth,class:"sticky top-3 bg-white pb2 flex items-center justify-between z-999 w-100",children:z.For({subject:x1,map:(Q)=>{let X=w0(Q),Z=s(V.value,Q),$=Z?"black b b--silver":X?"light-gray b--transparent":"light-silver pointer b--transparent",W=()=>{if(Z||X)return;V.value=Q};return z.Div({class:`bw1 ba br-pill ph2 pv3 pb2 tc ${$}`,onclick:N(W),children:[z.Div({class:"f7 ",children:WX(Q.getDay(),3)}),z.Div({class:"mt2 f4",children:("0"+Q.getDate()).slice(-2)})]})}})}),z.Div({class:"mt2 mb2 f4 b",children:L1}),z.Div({class:"mb4 pb2 silver",children:S1}),z.Div({class:"mt4",children:z.For({subject:UQ,itemKey:"id",n:1/0,nthChild:FQ({cssClasses:"flex pl5 pr3 nl3 mt4",onClick:YX,children:V1}),map:(Q,X)=>{let{id:Z,title:$,colorIndex:W,levels:J,tracker:Y}=k(Q).props,U=B(()=>{return DQ(Y.value,V.value).level.code}),G=w(U).isLT(1).ternary("b--light-silver","b--transparent");return z.Div({class:"mt4 flex items-center",children:[qQ({cssClasses:R`pa3 mr3 ba b ${G}`,colorIndex:W,level:U,totalLevels:k(J).length,icon:"check",iconSize:22,showText:w(U).isGT(0).truthy,showHeight:!0,onClick:()=>g1(X.value)}),z.Div({class:"pointer",onclick:N(()=>L0(Z.value)),children:[z.Div({class:"f5 fw6 f4-ns fw4-ns",children:$}),z.Div({class:"f6 light-silver pt05",children:o0(Z.value)})]})]})}})}),z.Div({class:"pv6"})]})})),navbarTop:z.Div(z.If({subject:KQ,isFalsy:DX({})}))})})]})}),c1=()=>{L.start("mount"),iQ.resetIdCounter(),v1(),L.start("run")};c1();

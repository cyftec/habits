var YQ=(Q)=>{const $=Object.entries(Q).sort((W,X)=>W[0].localeCompare(X[0]));return $.forEach(([W,X],Z)=>{if(X&&typeof X==="object"&&!Array.isArray(X))$[Z]=[W,YQ(X)]}),Object.fromEntries($)},t=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},s=(Q)=>{if(Array.isArray(Q)){const $=[...Q],W=[];return $.forEach((X)=>{W.push(s(X))}),W}if(t(Q)){const $={...Q},W={};return Object.keys($).forEach((X)=>{W[X]=s($[X])}),Object.freeze(W)}return Q},c=(Q)=>{if(Array.isArray(Q)){const W=[...Q],X=[];return W.forEach((Z)=>{X.push(c(Z))}),X}if(t(Q)){const W={...Q},X={};return Object.keys(W).forEach((Z)=>{X[Z]=c(W[Z])}),X}return Q},xQ=(Q,$="index")=>Q.map((W,X)=>({[$]:X,value:W})),HX=(Q,$)=>{const W=YQ(Q),X=YQ($),Z=Object.keys(W),J=Object.keys(X);if(Z.length!==J.length)return!1;for(let Y of Z)if(!J.includes(Y)||!UQ(W[Y],X[Y]))return!1;return!0},FX=(Q,$)=>{if(Q.length!==$.length)return!1;if(Q.length===0)return!0;for(let W=0;W<Q.length;W++)if(!UQ(Q[W],$[W]))return!1;return!0},UQ=(Q,$)=>{if(typeof Q!==typeof $)return!1;if(Array.isArray(Q))return FX(Q,$);if(Q===null||$===null)return Q===$;if(typeof Q==="object"&&!(Q instanceof Set))return HX(Q,$);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===$;return Q===$},KX=(Q,$,W)=>{const Z=xQ(c(Q),"index");return xQ(c($),"index").map((Y)=>{let G="add",R=-1;const U=Y.value;return Z.some((B,K)=>{if(G=UQ(B.value,Y.value)?B.index===Y.index?"idle":"shuffle":W&&B.value[W]!==void 0&&B.value[W]===Y.value[W]?"update":"add",G!=="add")return R=B.index,Z.splice(K,1),!0;return!1}),{type:G,oldIndex:R,value:U}})},PX=(Q)=>{const $=(W)=>Q((X)=>{const Z=Array.from(X);return W(Z),Z});return{copyWithin:(...W)=>$((X)=>X.copyWithin(...W)),fill:(...W)=>$((X)=>X.fill(...W)),pop:(...W)=>$((X)=>X.pop(...W)),push:(...W)=>$((X)=>X.push(...W)),remove:(...W)=>{const X=W[0],Z=(...J)=>!X(...J);W[0]=Z,Q((J)=>{return J.filter(...W)})},reverse:(...W)=>$((X)=>X.reverse(...W)),shift:(...W)=>$((X)=>X.shift(...W)),sort:(...W)=>$((X)=>X.sort(...W)),splice:(...W)=>$((X)=>X.splice(...W)),unshift:(...W)=>$((X)=>X.unshift(...W))}},AX=(Q)=>{return{set:($)=>Q((W)=>({...W,...$}))}},qQ=null,EQ=(Q)=>qQ=Q,f=(Q)=>{let $=s(Q);const W=new Set,X=()=>{W.forEach((Y)=>{if(Y.canDisposeNow){W.delete(Y);return}Y()})},Z=(Y)=>{$=Y,X()},J={type:"source-signal",get value(){if(qQ)W.add(qQ);return c($)},set value(Y){if(Y===$)return;Z(s(Y))}};return Array.isArray(Q)?Object.assign(J,PX((Y)=>Z(Y($)))):typeof Q==="object"&&Q!==null?Object.assign(J,AX((Y)=>Z(Y($)))):J},d=(Q)=>{const $=Q;return $.canDisposeNow=!1,$.dispose=()=>{$.canDisposeNow=!0},EQ($),Q(),EQ(null),$},_=(Q)=>{let $;const W=f($),X=d(()=>{$=Q($),W.value=$});return{type:"derived-signal",get prevValue(){return $},get value(){return W.value},dispose(){X.dispose()}}},O=(...Q)=>{Q.forEach(($)=>$.dispose())},MX=(Q)=>{return{type:"non-signal",value:Q}},z=(Q)=>QQ(Q)?Q.value:Q,y=(Q)=>["source-signal","derived-signal"].includes(Q?.type),e=(Q,$)=>Q?.type==="non-signal"&&(!$||!$.length||$.some((W)=>typeof Q?.value===W)),QQ=(Q)=>y(Q)||e(Q),I=(Q,...$)=>{return _(()=>{const W=$.map((X)=>z(X));return Q(...W)})},L=(Q)=>{const $=typeof Q==="function"?Q:()=>z(Q);return{...{get truthy(){return _(()=>!!$())},get falsy(){return _(()=>!$())},get truthyFalsyPair(){return _(()=>{const X=!!$();return[X,!X]})},ternary:(X,Z)=>_(()=>{return $()?z(X):z(Z)})},or:(X)=>L(()=>{return!!($()||z(X))}),orNot:(X)=>L(()=>{return!!($()||!z(X))}),and:(X)=>L(()=>{return!!($()&&z(X))}),andNot:(X)=>L(()=>{return!!($()&&!z(X))}),equals:(X)=>L(()=>{return $()===z(X)}),notEquals:(X)=>L(()=>{return $()!==z(X)}),orBothEqual:(X,Z)=>L(()=>{const J=$(),Y=z(X)===z(Z);return!!(J||Y)}),orBothUnequal:(X,Z)=>L(()=>{const J=$(),Y=z(X)!==z(Z);return!!(J||Y)}),andBothEqual:(X,Z)=>L(()=>{const J=$(),Y=z(X)===z(Z);return!!(J&&Y)}),andBothUnequal:(X,Z)=>L(()=>{const J=$(),Y=z(X)!==z(Z);return!!(J&&Y)}),orThisIsLT:(X,Z)=>L(()=>{const J=$(),Y=z(X)<z(Z);return!!(J||Y)}),orThisIsLTE:(X,Z)=>L(()=>{const J=$(),Y=z(X)<=z(Z);return!!(J||Y)}),orThisIsGT:(X,Z)=>L(()=>{const J=$(),Y=z(X)>z(Z);return!!(J||Y)}),orThisIsGTE:(X,Z)=>L(()=>{const J=$(),Y=z(X)>=z(Z);return!!(J||Y)}),andThisIsLT:(X,Z)=>L(()=>{const J=$(),Y=z(X)<z(Z);return!!(J&&Y)}),andThisIsLTE:(X,Z)=>L(()=>{const J=$(),Y=z(X)<=z(Z);return!!(J&&Y)}),andThisIsGT:(X,Z)=>L(()=>{const J=$(),Y=z(X)>z(Z);return!!(J&&Y)}),andThisIsGTE:(X,Z)=>L(()=>{const J=$(),Y=z(X)>=z(Z);return!!(J&&Y)})}},v=(Q)=>{const $=typeof Q==="function"?Q:()=>z(Q);return{...L(Q),get result(){return _($)},add:(W)=>v(()=>{return $()+z(W)}),sub:(W)=>v(()=>{return $()-z(W)}),mul:(W)=>v(()=>{return $()*z(W)}),div:(W)=>v(()=>{return $()/z(W)}),mod:(W)=>v(()=>{return $()%z(W)}),pow:(W)=>v(()=>{return $()**z(W)}),isBetween:(W,X,Z=!0,J=!0)=>L(()=>{const Y=$(),G=z(W),R=z(X),U=Z?Y>=G:Y>G,B=J?Y<=R:Y<R;return U&&B}),isLT:(W)=>L(()=>$()<z(W)),isLTE:(W)=>L(()=>$()<=z(W)),isGT:(W)=>L(()=>$()>z(W)),isGTE:(W)=>L(()=>$()>=z(W))}},LX=(Q)=>{const $=typeof Q==="function"?Q:()=>z(Q);return{...L(Q),lengthBetween:(W,X,Z=!0,J=!0)=>L(()=>{const G=$().length,R=z(W),U=z(X),B=Z?G>=R:G>R,K=J?G<=U:G<U;return B&&K}),lengthEquals:(W)=>L(()=>{return $().length===z(W)}),lengthNotEquals:(W)=>L(()=>{return $().length!==z(W)}),lengthLT:(W)=>L(()=>{return $().length<z(W)}),lengthLTE:(W)=>L(()=>{return $().length<=z(W)}),lengthGT:(W)=>L(()=>{return $().length>z(W)}),lengthGTE:(W)=>L(()=>{return $().length>=z(W)})}},E=(Q)=>{const W=(typeof Q==="function"?Q:()=>z(Q))();return typeof W==="number"?v(Q):typeof W==="string"||Array.isArray(W)?LX(Q):L(Q)},BQ=(...Q)=>Q.map(($)=>z($)),u=(Q)=>{return{get string(){return _(()=>{const $=z(Q);return $===void 0||$===null?void 0:$.toString()})},or:($)=>_(()=>z(Q)||z($))}},OX=(Q)=>{const W=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce((X,Z)=>{const J=(...Y)=>{return _(()=>{const G=BQ(...Y);return z(Q)[Z](...G)})};return X[Z]=J,X},{});return{...u(Q),...W,concat:(X)=>_(()=>z(Q).concat(z(X))),every:(X)=>_(()=>z(Q).every(X)),filter:(X)=>_(()=>z(Q).filter(X)),find:(X)=>_(()=>z(Q).find(X)),findIndex:(X)=>_(()=>z(Q).findIndex(X)),findLast:(X)=>_(()=>z(Q).findLast(X)),findLastIndex:(X)=>_(()=>z(Q).findLastIndex(X)),get lastItem(){return _(()=>{return c(z(Q)).pop()})},get length(){return _(()=>z(Q).length)},map:(X)=>_(()=>z(Q).map(X)),partition:(X)=>{const Z=_(()=>z(Q).filter(X)),J=_(()=>z(Q).filter((Y,G,R)=>!X(Y,G,R)));return[Z,J]},reduce:(X,Z)=>_(()=>z(Q).reduce(X,Z)),reduceRight:(X,Z)=>_(()=>z(Q).reduceRight(X,Z)),get reversed(){return _(()=>z(Q).toReversed())},some:(X)=>_(()=>z(Q).every(X)),toSorted:(X)=>_(()=>z(Q).toSorted(X)),toSpliced:(X,Z,...J)=>_(()=>z(Q).toSpliced(z(X),z(Z),...J))}},jX=(Q)=>{const W=["toExponential","toFixed","toPrecision"].reduce((X,Z)=>{const J=(...Y)=>{return _(()=>{const G=BQ(...Y);return z(Q)[Z](...G)})};return X[Z]=J,X},{});return{...u(Q),...W,toConfined:(X,Z)=>_(()=>z(Q)<z(X)?z(X):z(Q)>z(Z)?z(Z):z(Q)),toLocaleString:(X,Z)=>_(()=>z(Q).toLocaleString(z(X),Z))}},NX=(Q)=>{if(!t(z(Q)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...u(Q),prop:($)=>_(()=>z(Q)[$]),get props(){return Object.keys(z(Q)).reduce((W,X)=>{const Z=X;return W[Z]=this.prop(Z),W},{})},get keys(){return _(()=>Object.keys(z(Q)))}}},VQ=(Q)=>{const W=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce((X,Z)=>{const J=(...Y)=>{return _(()=>{const G=BQ(...Y);return z(Q)[Z](...G)})};return X[Z]=J,X},{});return{...u(Q),...W,get length(){return _(()=>z(Q).length)},get lowercase(){return _(()=>z(Q).toLowerCase())},get Sentencecase(){return _(()=>{const X=z(Q);return X.charAt(0).toUpperCase()+X.slice(1).toLowerCase()})},get TitleCase(){return _(()=>z(Q).toLowerCase().replace(/\b\w/g,(X)=>X.toUpperCase()))},get UPPERCASE(){return _(()=>z(Q).toUpperCase())},localeCompare:(X,Z,J)=>_(()=>z(Q).localeCompare(z(X),z(Z),J)),normalize:(X)=>_(()=>z(Q).normalize(z(X))),replace:(X,Z)=>_(()=>z(Q).replace(z(X),z(Z))),replaceAll:(X,Z)=>_(()=>z(Q).replaceAll(z(X),z(Z))),search:(X)=>_(()=>z(Q).search(X)),split:(X,Z)=>_(()=>{const J=X instanceof RegExp?X:z(X);return z(Q).split(J,z(Z))}),toLocaleLowerCase:(X)=>_(()=>z(Q).toLocaleLowerCase(z(X))),toLocaleUpperCase:(X)=>_(()=>z(Q).toLocaleUpperCase(z(X)))}},xX=f("dksjfbksjnd"),G1=VQ(xX).split(""),j=(Q)=>{return typeof z(Q)==="number"?jX(Q):typeof z(Q)==="string"?VQ(Q):Array.isArray(z(Q))?OX(Q):t(z(Q))?NX(Q):u(Q)},H=(Q,...$)=>_(()=>{return Q.reduce((W,X,Z)=>{let J;const Y=$[Z];if(typeof Y==="function")J=Y()??"";else if(QQ(Y))J=Y.value??"";else J=Y??"";return`${W}${X}${J.toString()}`},"")}),yQ=["onmount","onunmount"],gQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],EX=[...gQ,...yQ],DX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],o,bQ=(Q)=>{if(!o)o=document.createElement("textarea");return o.innerHTML=Q,o.value},TX=(Q)=>{try{return decodeURIComponent(Q)}catch{return Q}},kX=(Q)=>{return Q.replace(/\\u[\dA-Fa-f]{4}/g,($)=>String.fromCharCode(parseInt($.slice(2),16))).replace(/\\x[\dA-Fa-f]{2}/g,($)=>String.fromCharCode(parseInt($.slice(2),16)))},wX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},CQ=wX(),w={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},vQ=(Q,$,W)=>{let X=Q;X=bQ(X),X=TX(X),X=kX(X);const Z=X.trim().toLowerCase();for(let J of $)if(J.test(Z))throw W;return Q},fX=(Q)=>vQ(Q,[/^javascript\s*:/i,/^data\s*:/i,/^vbscript\s*:/i,/^file\s*:/i],'The href attribute value starting with one of "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),SX=(Q)=>vQ(Q,[/url\s*\(/i,/expression\s*\(/i,/javascript\s*:/i,/data\s*:/i,/vbscript\s*:/i,/file\s*:/i],'The style attribute value starting with one of "url(..", "expression(..", "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),IX=(Q,$)=>{if(Q==="href"){if(typeof $==="boolean")throw"The value of 'href' attribute should not be a boolean";return fX($||"")}if(Q==="style"){if(typeof $==="boolean")throw"The value of 'style' attribute should not be a boolean";return SX($||"")}return $},HQ=(Q)=>Array.isArray(Q),l=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,V=(Q)=>Q===void 0||typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,hQ=(Q)=>HQ(Q)&&Q.every(($)=>V($)),mQ=(Q)=>V(Q)||hQ(Q),cQ=(Q)=>e(Q)&&V(Q.value),zQ=(Q)=>y(Q)&&V(Q.value),VX=(Q)=>e(Q)&&mQ(Q.value),pQ=(Q)=>y(Q)&&mQ(Q.value),dQ=(Q)=>HQ(Q)&&Q.every(($)=>V($)||cQ($)||zQ($)),yX=(Q)=>!y(Q)&&(V(Q)||VX(Q)||dQ(Q)),uQ=(Q)=>yX(Q)||pQ(Q),DQ=!1,gX={},m={},bX=globalThis.MutationObserver,CX=new bX((Q)=>{Q.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((W)=>{if(l(W)){const X=W,Z=X.elementId;if(m[Z])delete m[Z];else gX[Z]=X.tagName}}),$.removedNodes.forEach((W)=>{if(l(W)){const X=W,Z=X.elementId,J=X.unmountListener;if(J)m[Z]={element:X,unmountListener:J}}})}),Object.entries(m).forEach(([$,W])=>{const{element:X,unmountListener:Z}=W;rQ(X,Z)})}),rQ=(Q,$)=>{if(!l(Q))return;const W=Q.children;for(let X=0;X<W.length;X++){const Z=W[X];rQ(Z,Z.unmountListener)}if($&&$(Q),m[Q.elementId])delete m[Q.elementId]},vX=()=>{if(!DQ&&!w.currentIs("build"))CX.observe(document.body,{childList:!0,subtree:!0}),DQ=!0},iQ=(Q,$)=>EX.includes(Q)&&$===void 0,oQ=(Q,$)=>gQ.includes(Q)&&typeof $==="function",nQ=(Q,$)=>yQ.includes(Q)&&typeof $==="function",hX=(Q,$)=>iQ(Q,$)||oQ(Q,$)||nQ(Q,$),mX=(Q,$)=>{Object.entries($).forEach(([W,X])=>{if(iQ(W,X));else if(oQ(W,X)){const Z=W.slice(2);Q.addEventListener(Z,(J)=>{if(Z==="keypress")J.preventDefault();X(J)})}else if(nQ(W,X)){if(W==="onmount"&&!w.currentIs("build")){const Z=X;setTimeout(()=>Z(Q),0)}if(W==="onunmount"){vX();const Z=Q.unmountListener;Q.unmountListener=(J)=>{if(X(J),typeof Z==="function")Z(J)}}}else console.error(`Invalid event key: ${W} for element with tagName: ${Q.tagName}`)})},TQ=(Q,$,W)=>{const X=QQ(W)?W.value:W,Z=IX($,X);if(typeof Z==="boolean")if(Z)Q.setAttribute($,"");else Q.removeAttribute($);else if($==="value")Q.value=Z||"";else Q.setAttribute($,Z||"")},cX=(Q,$)=>{const W={};Object.entries($).forEach((Z)=>{const[J,Y]=Z;if(y(Y))W[J]=Y;TQ(Q,J,Y)});const X=d(()=>{Object.entries(W).forEach((Z)=>{const[J,Y]=Z,G=Y.value;if(!w.currentIs("run"))return;TQ(Q,J,G)})});Q.effects.push(X)},pX=(Q)=>{if(!Q||typeof Q==="string")return document.createTextNode(bQ(Q||""));if(V(Q)){const $=Q();if(!l($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return $}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},WQ=(Q,$,W)=>{const X=Q.childNodes[W],Z=pX($);if(X&&Z)Q.replaceChild(Z,X);else if(Z)Q.appendChild(Z);else console.error(`No child found for node with tagName: ${Q.tagName}`)},dX=(Q,$)=>{if(!$)return;if(pQ($)){const Z=d(()=>{const J=$.value,Y=HQ(J)?J:[J];Y.forEach((R,U)=>WQ(Q,R,U));const G=Y.length;while(G<Q.childNodes.length){const R=Q.childNodes[G];if(R)Q.removeChild(R)}});Q.effects.push(Z)}const W=V($)?[$]:e($)?V($.value)?[$.value]:hQ($.value)?$.value:[]:dQ($)?$.map((Z)=>zQ(Z)?Z:cQ(Z)?Z.value:Z):[],X=[];if(W.forEach((Z,J)=>{if(zQ(Z))X.push({index:J,signalChild:Z});const Y=z(Z);WQ(Q,Y,J)}),X.length)X.forEach(({index:Z,signalChild:J})=>{const Y=d(()=>{const G=J.value;if(!w.currentIs("run"))return;WQ(Q,G,Z)});Q.effects.push(Y)})},uX=(Q,$)=>{let W=void 0;const X={},Z={};return Object.entries(Q).forEach(([J,Y])=>{if(J==="children")if(uQ(Y))W=Y;else throw new Error(`Invalid children prop for node with tagName: ${$}\n\n ${JSON.stringify(Y)}`);else if(hX(J,Y))X[J]=Y;else Z[J]=Y}),{children:W,eventProps:X,attributeProps:Z}},rX=(Q,$)=>{const W=()=>{const X=CQ.getNewId(),Z=w.currentIs("mount")?document.querySelector(`[data-elem-id="${X}"]`):document.createElement(Q);Z.elementId=X,Z.effects=[],Z.unmountListener=()=>{Z.effects.forEach((G)=>G.dispose())};const J=uQ($)?{children:$}:$;if(!w.currentIs("run"))J["data-elem-id"]=Z.elementId.toString();const Y=uX(J,Z.tagName);if(mX(Z,Y.eventProps),cX(Z,Y.attributeProps),dX(Z,Y.children),!w.currentIs("build"))Z.removeAttribute("data-elem-id");return Z};return W.isElementGetter=!0,W},kQ=(Q,$,W)=>{const X=f($),Z=f(Q),J=W(_(()=>Z.value),_(()=>X.value));let Y,G,R=!1;if(J?.isElementGetter)Y=()=>{if(R&&G)return G;return G=J(),R=!0,G},Y.isElementGetter=!0;else if(!J||typeof J==="string")Y=J||"";else throw`One of the child, ${J} passed in ForElement is invalid.`;return{indexSignal:X,itemSignal:Z,mappedChild:Y}},ZQ=(Q,$,W)=>{if($!==void 0&&$>=0&&W){const X=$>Q.length?Q.length:$;Q.splice(X,0,W)}return Q},iX=({subject:Q,itemKey:$,map:W,n:X,nthChild:Z})=>{if(Z&&X===void 0||X!==void 0&&X>-1&&!Z)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let J=Z;if(Z&&typeof Z!=="string"){const F=Z(),P=()=>F;P.isElementGetter=!0,J=P}if(!y(Q))return ZQ(z(Q).map(W),X,J);const Y=_(()=>{const F=z(Q);return Array.isArray(F)?F:[]});if(!$)return _(()=>ZQ(Y.value.map(W),X,J));const G=Y.value;if(G.length&&typeof G[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let R=null;const U=_((F)=>{return R=F||R,Y.value}),B=_((F)=>{if(!F||!R)return U.value.map((x,N)=>kQ(x,N,W));return KX(R,U.value,$).map((M,x)=>{const N=(F||[])[M.oldIndex];if(console.assert(M.type==="add"&&M.oldIndex===-1&&!N||M.oldIndex>-1&&!!N,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),N){if(M.type==="shuffle")N.indexSignal.value=x;if(M.type==="update")N.indexSignal.value=x,N.itemSignal.value={...M.value};return N}return kQ(M.value,x,W)})});return _(()=>ZQ(B.value.map((F)=>F.mappedChild),X,J))},oX=({subject:Q,isTruthy:$,isFalsy:W})=>{const X=q.Span({style:"display: none;"}),Z=()=>z(Q)?$?$(Q):X:W?W(Q):X;return y(Q)?_(Z):Z()},nX=({subject:Q,caseMatcher:$,defaultCase:W,cases:X})=>{const Z=()=>{const J=z(Q),Y=z(X);let G=void 0;for(let[R,U]of Object.entries(Y)){const B=$&&$(J,R),K=`${J}`===R;if(B||K){G=U();break}}return G||W&&W()||q.Span({style:"display: none;"})};return y(Q)?_(Z):Z()},sX=DX.reduce((Q,$)=>{const W=$.split("").map((Z,J)=>!J?Z.toUpperCase():Z).join(""),X=(Z)=>rX($,Z);return Q[W]=X,Q},{}),lX={For:iX,If:oX,Switch:nX},q={...sX,...lX},aX=(Q)=>{const $=z(Q);return Array.isArray($)&&$.some((W)=>QQ(W))},A=(Q)=>($)=>{for(let X of Object.keys($))if($[X]===void 0)delete $[X];const W=Object.entries($).reduce((X,Z)=>{const[J,Y]=Z,G=y(Y)||typeof Y==="function"?Y:aX(Y)?z(Y):MX(z(Y));return X[J]=G,X},{});return Q(W)},tX="1.3.0",eX=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],Q0=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],wQ={id:"analytics",lastInteraction:(new Date()).getTime()},a={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},sQ={total:0,spaceLeft:100,documents:{}},fQ=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var GQ=86400000,X0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],$0=["January","February","March","April","May","June","July","August","September","October","November","December"],W0=(Q,$)=>X0[Q].substring(0,$),Z0=(Q,$)=>$0[Q].substring(0,$),FQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},b=(Q)=>FQ(Q).getTime(),KQ=(Q,$)=>b(Q)===b($),J0=(Q,$)=>{const W=$||new Date;return b(Q)>b(W)},Y0=(Q,$)=>{const W=b(Q),X=b($);return Math.round((X-W)/GQ)},q0=(Q)=>Y0(new Date,Q),lQ=(Q,$)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+$),z0=(Q)=>{const $=new Date;return Array(Q).fill(0).map((W,X)=>new Date($.getFullYear(),$.getMonth()-X,1)).reverse()},G0=(Q,$)=>{const W=b(Q),X=b($);if(W===X)return[FQ(new Date(W))];const Z=W<X?W:X,Y=((W<X?X:W)-Z)/GQ;return Array(Y+1).fill(0).map((G,R)=>new Date(Z+R*GQ))},R0=(Q)=>{if(Q<1)throw"";const $=new Date,W=$.getFullYear(),X=$.getMonth(),Z=new Date(W,X-(Q-1),1),J=new Date(W,X+1,0);return{startDate:Z,endDate:J}},PQ={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},_0=(Q)=>location.href=Q,U0=()=>location.href=PQ.HABITS.NEW.href,B0=(Q)=>location.href=`${PQ.HABITS.HABIT.href}?id=${Q}`,H0=()=>location.href=PQ.SETTINGS.PRIVACY_POLICY.href,F0=1.6181,K0=(Q)=>Q0.find(($)=>$.code===Q),aQ=(Q,$)=>{return Q<0?K0(-1):{isMaxLevel:Q===$.length-1,name:$[Q],code:Q}},P0=(Q)=>({key:Q.getTime(),level:aQ(-1,[]),date:Q}),A0=(Q,$,W)=>({key:W.getTime(),level:aQ(Q,$),date:W}),tQ=(Q,$)=>Q.find((W)=>KQ(W.date,$)),M0=(Q)=>{const $=FQ(new Date(Q.id));return{...Q,startDate:$,levels:Q.levels.map((W,X)=>({isMaxLevel:X===Q.levels.length-1,name:W,code:X})),tracker:Q.tracker.map((W,X)=>A0(W,Q.levels,lQ($,X))),milestones:L0(Q.milestones)}},L0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],O0=(Q,$)=>{let W=Q[0];for(let X=0;X<Q.length;X++)if(W=Q[X],W.percent<=$)break;return{label:W.label,icon:W.icon,color:W.color}},eQ=(Q,$,W)=>{const X=QX(Q.tracker,$,W),Z=Q.levels.length-1;let J=0,Y=0,G=0,R=0,U=0,B=0;return X.forEach((K,F)=>{if(J+=K.level.code>-1?1:0,Y+=K.level.code>0?1:0,G+=K.level.code>0?K.level.code:0,F===X.length-1)return;const M=K.level.code<1;B=M?B+1:0;const N=100*((K.level.code>0?K.level.code:0)/(Q.levels.length-1));R=Math.round(N)>50?R+1:0,U=M?0:U+1}),{title:Q.title,aceStreak:R,followStreak:U,missed:B,percent:Math.round(100*(G/(J*Z))),totalDays:J,workingDays:Y}},j0=(Q,$,W,X=!1)=>{const Z=eX[W],J=Q/($-1),G=Math.trunc(Math.pow(J,F0)*255).toString(16),R=G.length===1?`0${G}`:G,U=Q<0||R==="0"?"transparent":`${Z}${R}`,B=X?Q/($-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:U,fontColor:B,peakBackgroundColor:Z,levelPercent:Math.round(J*100)}},N0=(Q,$)=>{const W=[];for(let X of $)if(!Q.some((J)=>{if(KQ(J.date,X))return W.push(J),!0;return!1}))W.push(P0(X));return W},QX=(Q,$,W)=>{const X=G0($,W);return N0(Q,X)},x0=(Q)=>{const $=new Date,W=new Date(Q),X=-q0(W);if(X===0)return"Just created this habit today";if(X===1)return"This habit started from yesterday";if(X>1&&X<5)return`Started following this ${X} back`;const{aceStreak:Z,followStreak:J,missed:Y}=eQ(h0(Q),lQ($,-X),$);if(Z>=12)return`Nailed ${Z} days in a row. Woah! Don't stop.`;if(Z>=4)return`Doing good for ${Z} days straight! Keep it up.`;if(J>=15)return`Didn't miss for ${J} days in a row. Kudos!`;if(J>=4)return`${J} days in a row. Nice! keep going.`;if(Y)`Missed ${Y} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},E0=(Q)=>[{label:"Today",icon:"calendar_month",isSelected:Q==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Q==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Q==="/settings/",href:"/settings/"}],D0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},AQ=(Q,$,W)=>{const X=JSON.parse(Q||"{}"),Z=X&&typeof X==="object",J=X[$];if(!Z||!(W?J===W:!!J))return;return X},D=(Q)=>{return(...$)=>{return D0(),C0(new Date),Q&&Q(...$)}},XX="analytics",T0="id",k0="analytics",$X=(Q)=>{localStorage.setItem(XX,JSON.stringify(Q))},w0=()=>{if(!w.currentIs("run"))return wQ;const Q=()=>{const X=localStorage.getItem(XX);return AQ(X,T0,k0)};if(!Q())$X(wQ);const W=Q();if(!W)throw"Error fetching analytics";return W},f0=()=>{const Q=[];for(let $ in localStorage){if(!localStorage.hasOwnProperty($))continue;Q.push($)}return Q},WX=(Q)=>Q.startsWith("h."),ZX=(Q)=>`h.${Q}`,S0=(Q)=>{if(!WX(Q))return;const $=localStorage.getItem(Q),W=AQ($,"title");if(!W)return;return W},I0=(Q)=>{const $=ZX(Q);localStorage.removeItem($)},JX="settings",V0="id",y0="local-settings",MQ=(Q)=>{localStorage.setItem(JX,JSON.stringify(Q))},YX=()=>{if(!w.currentIs("run"))return a;const Q=()=>{const X=localStorage.getItem(JX);return AQ(X,V0,y0)};if(!Q())MQ(a);const W=Q();if(!W)throw"Error fetching settings";return g0(W),Q()},g0=(Q)=>{if(!Q.editPage)MQ({...Q,editPage:a.editPage})},b0=()=>{const Q=sQ;if(!w.currentIs("run"))return Q;const $=1024;let W=0;const X=(Z)=>Z/$;for(let Z of f0()){const J=(localStorage[Z].length+Z.length)*2,Y=WX(Z)?"habits":Z;W+=J,Q.documents[Y]=(Q.documents[Y]?Q.documents[Y]:0)+J}return Q.total=X(W),Q.spaceLeft=100*(5242880-W)/5242880,Q},C0=(Q)=>{const $=w0();$X({...$,lastInteraction:Q.getTime()})},LQ=()=>{return YX().editPage},qX=(Q)=>{const $=YX();MQ({...$,editPage:Q})},v0=()=>b0(),h0=(Q)=>{const $=ZX(Q),W=S0($);if(!W)throw`Error fetching habit with id '${Q}' from storage`;return M0(W)},m0=(Q)=>I0(Q),c0=()=>{const Q={};for(let $ in localStorage)if(localStorage.hasOwnProperty($)){const W=localStorage.getItem($);Q[$]=JSON.parse(W)}return Q},p0=(Q)=>{for(let $ in Q){const W=Q[$],X=JSON.stringify(W);localStorage.setItem($,X)}},d0=(Q)=>{if(!(("analytics"in Q)&&("settings"in Q)))throw"Either the JSON file is corrupted or not a valid JSON file for habits data."},RQ="habits-data.json",u0=()=>{const Q=JSON.stringify(c0()),$=new File([Q],RQ,{type:"application/json"}),W=URL.createObjectURL($),X=document.createElement("a");X.href=W,X.download=RQ,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(W)},r0=(Q)=>{const $=JSON.parse(Q);d0($),p0($)},R1=A(({cssClasses:Q,hideRemove:$,hideAdd:W,onRemove:X,onAdd:Z})=>{const J=E($).and(W).ternary("bn","ba"),Y=H`br3 pb1 f4 bw1 b--light-silver dark-gray ${J} ${Q}`,G=E(W).ternary("","br"),R=H`pointer ph2 pb1 bw1 b--light-silver ${G}`,U=()=>O(J,Y,G,R);return q.Span({onunmount:U,class:Y,children:[q.If({subject:$,isFalsy:()=>q.Span({class:R,onclick:D(X),children:"-"})}),q.If({subject:W,isFalsy:()=>q.Span({class:"pointer ph2 pb1",onclick:D(Z),children:"+"})})]})}),C=A(({cssClasses:Q,onTap:$,onUnmount:W,children:X})=>{const Z=H`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,J=()=>{if(O(Z),W)W()};return q.Button({onunmount:J,class:Z,onclick:D(()=>$()),children:X})}),JQ=A(({cssClasses:Q})=>{const $=H`bb b--light-gray ${Q}`;return q.Div({onunmount:()=>O($),class:$})}),S=A(({cssClasses:Q,size:$,onClick:W,iconName:X,title:Z})=>{const Y=H`material-symbols-outlined ${W?"pointer":""} ${Q}`,G=j($).or(16),R=H`font-size: ${G}px`;return q.Span({onunmount:()=>O(Y,G,R),class:Y,style:R,onclick:D(W),children:X,title:Z})}),zX=A(({cssClasses:Q,href:$,target:W,onClick:X,children:Z})=>{const J=E($).or(X).ternary("pointer underline",""),Y=H`w-fit-content noselect ${J} ${Q}`;return q.A({onunmount:()=>O(J,Y),...$?{href:$}:{},class:Y,target:W,onclick:D(X),children:Z})}),r=A(({cssClasses:Q,isOpen:$,content:W,onTapOutside:X,onUnmount:Z})=>{const J=H`pa0 br3 ${Q}`,Y=(R)=>{setTimeout(()=>d(()=>{if($.value)R.showModal();else R.close()}))},G=()=>{if(O(J),Z)Z()};return q.Dialog({onmount:Y,onunmount:G,onclick:D(X),class:J,children:[q.Div({onclick:(R)=>R.stopPropagation(),children:W})]})}),_1=A(({cssClasses:Q,placeholder:$,num:W,onchange:X})=>{const Z=j(W).string,J=(Y)=>{const G=Y.target.value,R=Number.parseFloat(Number.parseFloat(G||"0").toFixed(2));X(R)};return q.Input({onunmount:()=>O(Z),class:Q,type:"number",placeholder:$,value:Z,onchange:J})}),i0=A(({progress:Q,cssClasses:$})=>{const W=H`br-pill bg-moon-gray ${$}`,X=H`width: ${j(Q).toConfined(0,100)}%;`;return q.Div({onunmount:()=>O(W,X),class:W,children:q.Div({class:"br-pill bg-app-theme-color pa1",style:X})})}),o0=A(({cssClasses:Q,header:$,content:W,bottombar:X})=>{const Z=H`w6-ns ${Q}`;return q.Div({onunmount:()=>O(Z),class:"flex-ns justify-center-ns",children:q.Div({class:Z,children:[q.If({subject:$,isTruthy:()=>q.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),W,q.Div({class:"pv6 mt5"}),q.If({subject:X,isTruthy:()=>q.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:X})})]})})}),U1=A(({cssClasses:Q,tabs:$,onTabChange:W})=>{const X=H`bg-white br3 ${Q}`,Z=j($).map((J)=>{return{tabClasses:`
                w-100 br3 pv2dot5 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${J.isSelected?`b--light-silver b black ${J.classes||""}`:"pointer b--transparent b--hover-black silver pointer"} ${J.classes}`,label:J.label}});return q.Div({onunmount:()=>O(X,Z),class:X,children:q.Div({class:"flex items-center justify-between pa1",children:q.For({subject:Z,itemKey:"label",map:(J,Y)=>{const{tabClasses:G,label:R}=j(J).props;return q.Span({onunmount:()=>O(G,R),onclick:D(()=>W(Y.value)),class:G,children:R})}})})})}),B1=A(({cssClasses:Q,placeholder:$,disabled:W,text:X,onmount:Z,onchange:J,onkeydown:Y,onfocus:G,onblur:R})=>{let U;const B=E(W).truthy,K=(M)=>{if(U=M,Z)Z(M)},F=(M)=>{const x=M.target.value;if(J)J(x)},P=(M)=>{const x=M.key.length===1?U.value+M.key:M.key==="Backspace"?U.value.slice(0,-1):U.value,N={key:M.key,text:x};if(Y)Y(N)};return q.Input({onmount:K,onunmount:()=>O(B),class:Q,type:"text",placeholder:$,disabled:B,value:X,onchange:F,onkeydown:P,onfocus:G,onblur:R})}),n0=A(({cssClasses:Q,isOn:$,onToggle:W})=>{const X=H`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,J=H`${"br-100 ba bw1 b--hover-black pa1"} ${()=>$.value?"b--transparent":"b--moon-gray bg-moon-gray"}`,Y=H`${"br-100 ba bw1 b--hover-black pa1"} ${()=>$.value?"b--mid-gray bg-mid-gray":"b--transparent"}`;return q.Div({onunmount:()=>O(X,J,Y),class:X,onclick:D(W),children:[q.Div({class:J}),q.Div({class:"pa05"}),q.Div({class:Y})]})}),s0=A(({cssClasses:Q,justifyCssClasses:$,label:W})=>{const X=j($).or("justify-end"),Z=j(W).or("Add habit"),J=H`w-100 flex ${X} ${Q}`;return q.Div({onunmount:()=>O(X,Z,J),class:J,children:C({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[S({cssClasses:"nl1 mr1",size:22,iconName:"add"}),Z],onTap:U0})})}),OQ=A(({cssClasses:Q,dotCssClasses:$,colorIndex:W,level:X,totalLevels:Z,showText:J,textContent:Y,icon:G,iconSize:R,isRectangular:U,showHeight:B,onClick:K})=>{const F=E(U).ternary("br0","br-100"),P=E(X).isLT(0).ternary("bg-transparent","bg-light-gray"),M=I(j0,X,Z,W,J),{peakBackgroundColor:x,backgroundColor:N,fontColor:T,levelPercent:k}=j(M).props,g=j(Y).or("\u0387"),h=E(B).and(G).andThisIsGT(k,99).truthy,XQ=H`pointer relative overflow-hidden ${F} ${P} ${Q}`,i=H`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${$}`,$Q=H`
      background-color: ${x};
      color: white;
      height: ${k}%;`,jQ=H`flex items-center justify-around absolute absolute--fill ${$}`,NQ=H`
      background-color: ${N};
      color: ${T};`,_X=()=>{if(K&&X.value>=0)K()},UX=()=>{O(F,P,M,x,N,T,k,g,h,XQ,i,$Q,jQ,NQ)};return q.Span({onunmount:UX,class:XQ,onclick:D(_X),children:q.If({subject:B,isTruthy:()=>q.Span({class:i,style:$Q,children:q.If({subject:h,isTruthy:()=>S({iconName:G,size:R})})}),isFalsy:()=>q.Span({class:jQ,style:NQ,children:q.If({subject:G,isTruthy:(BX)=>S({iconName:BX,size:R}),isFalsy:()=>q.Span(g)})})})})}),H1=A(({habit:Q,day:$,onColorDotClick:W})=>{const{id:X,title:Z,colorIndex:J,levels:Y,tracker:G}=j(Q).props,R=j(Y).length,U=_(()=>{return tQ(G.value,$.value).level.code}),B=E(U).isGT(0).truthy,K=E(U).isLT(1).ternary("b--light-silver","b--transparent"),F=H`pa3 mr3 ba b ${K}`,P=()=>O(X,Z,J,Y,G,R,U,B,K);return q.Div({onunmount:P,class:"mt4 flex items-center",children:[OQ({cssClasses:F,colorIndex:J,level:U,totalLevels:R,icon:"check",iconSize:22,showText:B,showHeight:!0,onClick:W}),q.Div({class:"pointer",onclick:D(()=>B0(X.value)),children:[q.Div({class:"f5 fw6 f4-ns fw4-ns",children:Z}),q.Div({class:"f6 light-silver pt05",children:x0(X.value)})]})]})}),F1=A(({cssClasses:Q})=>{const $=H`pa3 flex items-center ${Q}`;return C({onUnmount:()=>O($),cssClasses:$,children:[S({iconName:"arrow_back"}),q.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),K1=A(({cssClasses:Q,milestones:$,achievedMilestone:W,completionPercent:X})=>{const Z=j(W).prop("color"),J=I((F)=>F>53?"Average completion":F>43?"Avg completion":F>35?"Completion":"",X),Y=H`center ${Q}`,G=H`nt3dot6 h1dot2 bw1 relative br b--${Z}`,R=H`width: ${X}%;`,U=H`absolute right-0 pr1 b f6 ${Z}`,B=H`${X}%`,K=()=>O(Z,J,Y,G,R,U,B);return q.Div({onunmount:K,class:Y,children:[q.Div({class:"pb2 w-100 relative",children:q.For({subject:$,map:(F,P)=>{return l0({colorCss:`bg-${F.color}`,percent:F.upperLimit,hideUpperLimit:P===0})}})}),q.Div({class:G,style:R,children:q.Div({class:"relative flex items-start nt1 justify-between f7 mid-gray",children:[q.Div(J),q.Div({class:U,children:B})]})})]})}),l0=A(({colorCss:Q,hideUpperLimit:$,percent:W})=>{const X=E($).ternary("",H`${W}%`),Z=H`width: ${W}%;`,J=H`absolute absolute-fill h0dot15 w-100 ${Q}`;return q.Div({onunmount:()=>O(X,Z,J),class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:Z,children:[q.Div({class:J}),q.Div({class:"flex justify-end w-100 pt2 f7",children:q.Div({class:"nr3 pb2 light-silver b",children:X})})]})}),a0=A(({cssClasses:Q,habit:$,date:W,colorIndex:X,totalLevels:Z})=>{const J=_(()=>{const U=W.value.getFullYear(),B=W.value.getMonth(),K=new Date(U,B,1),F=new Date(U,B+1,0);return QX($.value.tracker,K,F).map((P)=>({...P,level:P.level.code}))}),Y=H`flex items-center ${Q}`,G=_(()=>Z0(W.value.getMonth(),3)),R=()=>O(J,Y,G);return q.Div({onunmount:R,class:Y,children:[q.Div({class:"f8 b w2 light-silver",children:G}),q.Div({class:"w-100 flex items-center justify-between",children:q.For({subject:J,itemKey:"key",map:(U)=>{const B=j(U).prop("level");return OQ({cssClasses:"pa1",colorIndex:X,level:B,totalLevels:Z})}})})]})}),P1=A(({cssClasses:Q,habit:$,months:W,onClick:X})=>{const{milestones:Z,title:J,colorIndex:Y,levels:G}=j($).props,R=I((T,k)=>{const{startDate:g,endDate:h}=R0(T);return eQ(k,g,h).percent},W,$),U=I(O0,Z,R),{icon:B,color:K}=j(U).props,F=I((T)=>z0(T).map((k)=>({monthFirstDate:k,index:k.getTime()})),W),P=H`pointer bg-white ${Q}`,M=H`mr1 ${K}`,x=H`${R}%`,N=()=>{O(Z,J,Y,G,R,U,B,K,F,P,M,x)};return q.Div({onunmount:N,class:P,onclick:D(X),children:[q.Div({class:"flex items-center justify-between nt1 mb2",children:[q.Div({class:"f5 dark-gray b",children:J}),q.Div({class:"f6 silver b flex items-center",children:[S({cssClasses:M,iconName:B}),x]})]}),q.Div({class:"mt2 mb1",children:q.For({subject:F,itemKey:"index",map:(T)=>{return a0({cssClasses:"mb1",habit:$,date:j(T).prop("monthFirstDate"),colorIndex:Y,totalLevels:G.value.length})}})})]})}),A1=A(({cssClasses:Q})=>{const $=H`flex flex-column items-center justify-around ${Q}`;return q.Div({onunmount:()=>O($),class:$,children:[q.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),q.Div("Looks like, you just landed here!"),s0({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),M1=A(({isOpen:Q,habit:$,onClose:W,onDone:X})=>{const Z=H`Delete '${()=>$.value.title}'?`,J=()=>{m0($.value.id),X()};return r({onUnmount:()=>O(Z),cssClasses:"bn w-30-ns",isOpen:Q,onTapOutside:W,content:q.Div({class:"pa3 f5",children:[q.Div({class:"mb3 b f4",children:Z}),q.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,q.Br({}),q.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),q.Div({class:"flex items-center justify-between f6",children:[C({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:W}),C({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:J})]})]})})}),L1=A(({isOpen:Q,habit:$,date:W,showTitleInHeader:X,onClose:Z,onChange:J})=>{const{title:Y,levels:G,tracker:R,colorIndex:U}=j($).props,B=_(()=>X?.value?`Change status of  '${Y.value}'`:`Change status for ${W.value.toDateString()}`),K=I(tQ,R,W),F=j(G).length,P=_(()=>{const x=[...G.value];return x.reverse(),x.map((N,T)=>{const k=F.value-1-T,h=`pointer flex items-center pv3 pa3 bt b--moon-gray ${K.value?.level.code===k?"bg-near-white black fw6":"gray fw5"}`,i=`pa1 mr3 ba b ${k<1?"b--light-silver":"b--transparent"}`;return{levelName:N.name,levelCode:k,levelTileCSS:h,dotClasses:i}})});return r({onUnmount:()=>O(Y,G,R,U,B,K,F,P),cssClasses:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:Z,content:q.Div({class:"mnw5",children:[q.Div({class:"f5 b tc pa3",children:B}),q.Div({class:"f5 mb1",children:q.For({subject:P,map:(x)=>{const{levelName:N,levelCode:T,levelTileCSS:k,dotClasses:g}=j(x).props;return q.Div({onunmount:()=>O(N,T,k,g),class:k,onclick:D(()=>J(T.value)),children:[OQ({cssClasses:g,colorIndex:U,level:T,totalLevels:G.value.length,isRectangular:!0}),q.Span(N)]})}})})]})})}),O1=A(({isOpen:Q,habit:$,onClose:W,onDone:X})=>{const Z=H`Stop '${()=>$.value.title}'?`;return r({onUnmount:()=>O(Z),cssClasses:"bn",isOpen:Q,onTapOutside:W,content:q.Div({class:"pa3 f5",children:[q.Div({class:"mb3 b f4",children:Z}),q.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",q.Br({}),q.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),q.Div({class:"flex items-center justify-between f6",children:[C({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:W}),C({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:X})]})]})})}),t0=A(({cssClasses:Q,links:$})=>{const W=H`flex items-center justify-between pv3 bg-near-white ${Q}`;return q.Div({onunmount:()=>O(W),class:W,children:q.For({subject:$,map:(X)=>e0({label:X.label,icon:X.icon,isSelected:X.isSelected,href:X.href})})})}),e0=A(({cssClasses:Q,label:$,icon:W,isSelected:X,href:Z})=>{const J=E(X).ternary("app-theme-color b","black"),Y=H`pointer noselect flex flex-column items-center justify-center pb2 ${J} ${Q}`;return q.Div({onunmount:()=>O(J,Y),class:Y,onclick:D(()=>_0(Z.value)),children:[S({size:22,iconName:W}),q.Div({class:"f7",children:$})]})}),Q1=A(({cssClasses:Q,header:$,content:W,navbarTop:X,route:Z})=>{return o0({cssClasses:Q,header:$,content:W,bottombar:q.Div({children:[q.If({subject:X,isTruthy:()=>X}),t0({cssClasses:"nl3 nr3 ph4",links:I(E0,Z)})]})})}),X1=A(({cssClasses:Q,body:$,onMount:W,onUnMount:X})=>{const Z=f("stylesheet");return q.Html({lang:"en",children:[q.Head({onmount:()=>Z.value="stylesheet",children:[q.Meta({"http-equiv":"Content-Security-Policy",content:`
                default-src 'self';
                script-src 'self';
                style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
                font-src https://fonts.gstatic.com;
                object-src 'none';
                base-uri 'none';
              `}),q.Meta({charset:"UTF-8"}),q.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),q.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),q.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),q.Link({rel:Z,href:"/assets/styles.css",as:"style"}),q.Link({rel:"manifest",href:"/manifest.json"}),q.Title("Habits (by Cyfer)")]}),q.Body({tabindex:"-1",class:Q,onmount:W,onunmount:X,children:[q.Script({src:"main.js",defer:!0}),$]})]})}),n=A(({cssClasses:Q,contentCssClasses:$,title:W,description:X,hideDescription:Z,children:J})=>{const Y=H`mt3 mb4 ${Q}`,G=E(X).andNot(Z).truthy;return q.Div({onunmount:()=>O(Y,G),class:Y,children:[q.Div({class:"mb2 dark-gray f4 b",children:W}),q.If({subject:G,isTruthy:()=>q.Div({class:"mb3 f6 silver fw5",children:X})}),q.Div({class:$,children:J})]})}),j1=A(({cssClasses:Q,iconSize:$,selectedOptionIndex:W,onChange:X})=>{const Z=f(!1),J=_(()=>fQ[W.value]),Y=j(J).prop("decending"),G=j(J).prop("icon"),R=j($).or(20),U=()=>Z.value=!0,B=()=>Z.value=!1,K=(P)=>P===J.value.label?"bg-near-white black fw6":"gray fw5",F=(P)=>{X(P),B()};return q.Div({onunmount:()=>O(J,Y,G,R),class:Q,children:[SQ({cssClasses:"pointer",descending:Y,iconName:G,size:R,onClick:U}),r({cssClasses:"f5 normal ba bw0 outline-0",isOpen:Z,onTapOutside:B,content:q.Div({children:[q.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),q.Div({class:"f5 mb1",children:q.For({subject:fQ,map:(P,M)=>q.Div({class:`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${K(P.label)}`,onclick:D(()=>F(M)),children:[SQ({cssClasses:"ml1 mr2",descending:P.decending,iconName:P.icon,size:20}),q.Span(P.label)]})})})]})})]})}),SQ=A(({cssClasses:Q,descending:$,iconName:W,size:X,onClick:Z})=>{const J=Z?"pointer":"",Y=E($).ternary("arrow_upward","arrow_downward"),G=E(X).mul(4).div(5).result;return q.Span({class:H`flex items-center ${J} ${Q}`,onclick:D(Z),children:[S({cssClasses:"silver",iconName:Y,size:G}),S({size:X,iconName:W})]})}),N1=A(({cssClasses:Q,progress:$})=>{const W=H`flex flex-column justify-center items-center vh-100 ${Q}`;return q.Div({onunmount:()=>O(W),class:W,children:[q.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),q.Div({class:"f3 b mv3",children:"Habits"}),i0({cssClasses:"w-40",progress:$}),q.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),x1=A(({date:Q,selectedDate:$,onChange:W})=>{const X=I(J0,Q),Z=I(KQ,$,Q),J=E(X).ternary("light-gray b--transparent","light-silver pointer b--transparent"),Y=E(Z).ternary("black b b--silver",J),G=H`bw1 ba br-pill ph2 pv3 pb2 tc ${Y}`,R=_(()=>W0(Q.value.getDay(),3)),U=_(()=>("0"+Q.value.getDate()).slice(-2)),B=()=>{if(Z.value||X.value)return;W(Q.value)},K=()=>O(X,Z,J,Y,G,R,U);return q.Div({onunmount:K,class:G,onclick:D(B),children:[q.Div({class:"f7 ",children:R}),q.Div({class:"mt2 f4",children:U})]})}),$1=A(({cssClasses:Q})=>{const W=f(!1),X={success:!1,message:""},Z=f(X),{success:J,message:Y}=j(Z).props;let G=void 0;const R=()=>W.value=!0,U=()=>W.value=!1,B=(F)=>{const P=F.target?.result;try{r0(P),Z.value={success:!0,message:`Successfully loaded '${G?.name}'`}}catch(M){Z.value={success:!1,message:M}}setTimeout(()=>{Z.value=X},1e4)},K=(F)=>{if(U(),G=F.target?.files[0],F.target)F.target.value="";if(!G)return;if(G.type!=="application/json"){Z.value={success:!1,message:`Invalid file selected '${G.name}'. It should be a JSON file titled - '${RQ}'.`},setTimeout(()=>{Z.value=X},1e4);return}const P=new FileReader;P.onload=B,P.readAsText(G)};return q.Div({class:Q,children:[r({cssClasses:"pa3",isOpen:W,onTapOutside:U,content:[q.Div({class:"b f4",children:"Warning!!!"}),q.Div({class:"mv3",children:[`Loading new data from file will wipe out all existing app data. 
                Only do this if you're sure you have some app data or backup available to load.
                `,q.Br(),q.Br(),"Are you sure, you want to delete existing data?"]}),q.Div({children:[C({cssClasses:"w-25 pv2 ph3 mr1 b",onTap:U,children:"No"}),q.Label({for:"appDataFileInput",children:q.Span({class:"ml2 pv2 ph3 b red ba bw1 br-pill b--light-silver",children:"Yes, delete and load new"})})]})]}),q.Input({id:"appDataFileInput",type:"file",class:"dn",onchange:K}),zX({cssClasses:"db mt3 f6 underline",children:"Load new app data from file",onClick:R}),q.If({subject:Y,isTruthy:(F)=>q.Div({class:E(J).ternary("mt3 green","mt3 red"),children:F})})]})}),IQ=A(({cssClasses:Q,label:$,isToggleOn:W,onToggle:X})=>{const Z=H`flex items-center justify-between ${Q}`;return q.Div({onunmount:()=>O(Z),class:Z,children:[q.Div($),n0({cssClasses:"ml3",isOn:W,onToggle:X})]})}),p=f(a.editPage),{showHints:GX,showFullCustomisation:RX}=j(p).props,_Q=f(sQ),W1=H`${()=>_Q.value.total?.toFixed(2)} KB used (${()=>_Q.value.spaceLeft?.toFixed(2)}% left)`,Z1=()=>{qX({...p.value,showHints:!GX.value}),p.value=LQ()},J1=()=>{qX({...p.value,showFullCustomisation:!RX.value}),p.value=LQ()},Y1=()=>{_Q.value=v0(),p.value=LQ()},q1=X1({cssClasses:"bg-white",onMount:Y1,body:Q1({cssClasses:"ph3 bg-white",route:"/settings/",header:"Settings",content:q.Div({children:[n({cssClasses:"pb3",title:"Data and storage",children:[W1,C({cssClasses:"db mv3 ph3 pv2",onTap:u0,children:"Download app data"}),$1({})]}),n({cssClasses:"pb3",title:"Preferences",children:[JQ({cssClasses:"mv2"}),IQ({label:"Show hints on Edit page",isToggleOn:GX,onToggle:Z1}),JQ({cssClasses:"mv2"}),IQ({label:"Always show more customisations on Edit page",isToggleOn:RX,onToggle:J1}),JQ({cssClasses:"mv2"})]}),n({cssClasses:"pb3",title:"Privacy Policy",description:`
            This app does not collect any data, nor does it store
            them remotely or send elsewhere for data persistence.
            It uses local storage of the browser for saving data. And it is safe
            for use by any age group person.`,children:zX({cssClasses:"flex items-center",onClick:H0,children:["Read complete policy here",S({cssClasses:"ml1",size:12,iconName:"call_made"})]})}),n({contentCssClasses:"flex justify-between",title:"About",children:[q.Div([q.Div({class:"",children:"Habits (by Cyfer)"}),q.Div({class:"silver mt1",children:`version ${tX}`}),q.Div({class:"silver mt1 flex items-center",children:["Made with",S({cssClasses:"mh1 gray",size:21,iconName:"volunteer_activism"}),"in Bharat"]})]),q.Div({class:"pa05 h3 bg-green ba b--light-gray relative",children:[q.Div({class:"absolute top-0 left-0 right-0 bg-white",style:"height: 66.6%;"}),q.Div({class:"absolute top-0 left-0 right-0 bg-orange",style:"height: 33.3%;"})]})]})]})})}),z1=()=>{w.start("mount"),CQ.resetIdCounter(),q1(),w.start("run")};z1();

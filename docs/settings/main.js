var YQ=(Q)=>{let X=Object.entries(Q).sort((Z,$)=>Z[0].localeCompare($[0]));return X.forEach(([Z,$],W)=>{if($&&typeof $==="object"&&!Array.isArray($))X[W]=[Z,YQ($)]}),Object.fromEntries(X)},$Q=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},a=(Q)=>{if(Array.isArray(Q)){let X=[...Q],Z=[];return X.forEach(($)=>{Z.push(a($))}),Z}if($Q(Q)){let X={...Q},Z={};return Object.keys(X).forEach(($)=>{Z[$]=a(X[$])}),Object.freeze(Z)}return Q},c=(Q)=>{if(Array.isArray(Q)){let Z=[...Q],$=[];return Z.forEach((W)=>{$.push(c(W))}),$}if($Q(Q)){let Z={...Q},$={};return Object.keys(Z).forEach((W)=>{$[W]=c(Z[W])}),$}return Q},DQ=(Q,X="index")=>Q.map((Z,$)=>({[X]:$,value:Z})),DX=(Q,X)=>{let Z=YQ(Q),$=YQ(X),W=Object.keys(Z),J=Object.keys($);if(W.length!==J.length)return!1;for(let Y of W)if(!J.includes(Y)||!UQ(Z[Y],$[Y]))return!1;return!0},EX=(Q,X)=>{if(Q.length!==X.length)return!1;if(Q.length===0)return!0;for(let Z=0;Z<Q.length;Z++)if(!UQ(Q[Z],X[Z]))return!1;return!0},UQ=(Q,X)=>{if(typeof Q!==typeof X)return!1;if(Array.isArray(Q))return EX(Q,X);if(Q===null||X===null)return Q===X;if(typeof Q==="object"&&!(Q instanceof Set))return DX(Q,X);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===X;return Q===X},OX=(Q,X,Z)=>{let W=DQ(c(Q),"index");return DQ(c(X),"index").map((Y)=>{let G="add",_=-1,F=Y.value;return W.some((B,A)=>{if(G=UQ(B.value,Y.value)?B.index===Y.index?"idle":"shuffle":Z&&B.value[Z]!==void 0&&B.value[Z]===Y.value[Z]?"update":"add",G!=="add")return _=B.index,W.splice(A,1),!0;return!1}),{type:G,oldIndex:_,value:F}})},t=null,S=(Q)=>{let X=a(Q),Z=new Set;return{type:"source-signal",get value(){if(t)Z.add(t);return c(X)},set value($){if($===X)return;X=a($),Z.forEach((W)=>W&&W())}}},r=(Q)=>{t=Q,Q(),t=null},U=(Q)=>{let X,Z=S(X);return r(()=>{X=Q(X),Z.value=X}),{type:"derived-signal",get prevValue(){return X},get value(){return Z.value}}},q=(Q)=>_Q(Q)?Q.value:Q,g=(Q)=>["source-signal","derived-signal"].includes(Q?.type),VQ=(Q,X)=>Q?.type==="non-signal"&&(!X||!X.length||X.some((Z)=>typeof Q?.value===Z)),_Q=(Q)=>g(Q)||VQ(Q),IQ=(Q)=>VQ(Q,["string"]),yQ=(Q)=>Q?.type==="non-signal"&&Array.isArray(Q?.value)&&(Q?.value).every((X)=>typeof X==="string"),v=(Q,...X)=>{return U(()=>{let Z=X.map(($)=>q($));return Q(...Z)})},D=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...{get truthy(){return U(()=>!!X())},get falsy(){return U(()=>!X())},get truthyFalsyPair(){return U(()=>{let $=!!X();return[$,!$]})},ternary:($,W)=>U(()=>{return X()?q($):q(W)})},or:($)=>D(()=>{return!!(X()||q($))}),orNot:($)=>D(()=>{return!!(X()||!q($))}),and:($)=>D(()=>{return!!(X()&&q($))}),andNot:($)=>D(()=>{return!!(X()&&!q($))}),equals:($)=>D(()=>{return X()===q($)}),notEquals:($)=>D(()=>{return X()!==q($)}),orBothEqual:($,W)=>D(()=>{let J=X(),Y=q($)===q(W);return!!(J||Y)}),orBothUnequal:($,W)=>D(()=>{let J=X(),Y=q($)!==q(W);return!!(J||Y)}),andBothEqual:($,W)=>D(()=>{let J=X(),Y=q($)===q(W);return!!(J&&Y)}),andBothUnequal:($,W)=>D(()=>{let J=X(),Y=q($)!==q(W);return!!(J&&Y)}),orThisIsLT:($,W)=>D(()=>{let J=X(),Y=q($)<q(W);return!!(J||Y)}),orThisIsLTE:($,W)=>D(()=>{let J=X(),Y=q($)<=q(W);return!!(J||Y)}),orThisIsGT:($,W)=>D(()=>{let J=X(),Y=q($)>q(W);return!!(J||Y)}),orThisIsGTE:($,W)=>D(()=>{let J=X(),Y=q($)>=q(W);return!!(J||Y)}),andThisIsLT:($,W)=>D(()=>{let J=X(),Y=q($)<q(W);return!!(J&&Y)}),andThisIsLTE:($,W)=>D(()=>{let J=X(),Y=q($)<=q(W);return!!(J&&Y)}),andThisIsGT:($,W)=>D(()=>{let J=X(),Y=q($)>q(W);return!!(J&&Y)}),andThisIsGTE:($,W)=>D(()=>{let J=X(),Y=q($)>=q(W);return!!(J&&Y)})}},b=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...D(Q),get result(){return U(X)},add:(Z)=>b(()=>{return X()+q(Z)}),sub:(Z)=>b(()=>{return X()-q(Z)}),mul:(Z)=>b(()=>{return X()*q(Z)}),div:(Z)=>b(()=>{return X()/q(Z)}),mod:(Z)=>b(()=>{return X()%q(Z)}),pow:(Z)=>b(()=>{return X()**q(Z)}),isBetween:(Z,$,W=!0,J=!0)=>D(()=>{let Y=X(),G=q(Z),_=q($),F=W?Y>=G:Y>G,B=J?Y<=_:Y<_;return F&&B}),isLT:(Z)=>D(()=>X()<q(Z)),isLTE:(Z)=>D(()=>X()<=q(Z)),isGT:(Z)=>D(()=>X()>q(Z)),isGTE:(Z)=>D(()=>X()>=q(Z))}},MX=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...D(Q),lengthBetween:(Z,$,W=!0,J=!0)=>D(()=>{let G=X().length,_=q(Z),F=q($),B=W?G>=_:G>_,A=J?G<=F:G<F;return B&&A}),lengthEquals:(Z)=>D(()=>{return X().length===q(Z)}),lengthNotEquals:(Z)=>D(()=>{return X().length!==q(Z)}),lengthLT:(Z)=>D(()=>{return X().length<q(Z)}),lengthLTE:(Z)=>D(()=>{return X().length<=q(Z)}),lengthGT:(Z)=>D(()=>{return X().length>q(Z)}),lengthGTE:(Z)=>D(()=>{return X().length>=q(Z)})}},M=(Q)=>{let Z=(typeof Q==="function"?Q:()=>q(Q))();return typeof Z==="number"?b(Q):typeof Z==="string"||Array.isArray(Z)?MX(Q):D(Q)},RQ=(...Q)=>Q.map((X)=>q(X)),s=(Q)=>{return{get string(){return U(()=>{let X=q(Q);return X===void 0||X===null?void 0:X.toString()})},or:(X)=>U(()=>q(Q)||q(X))}},kX=(Q)=>{let Z=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce(($,W)=>{let J=(...Y)=>{return U(()=>{let G=RQ(...Y);return q(Q)[W](...G)})};return $[W]=J,$},{});return{...s(Q),...Z,concat:($)=>U(()=>q(Q).concat(q($))),every:($)=>U(()=>q(Q).every($)),filter:($)=>U(()=>q(Q).filter($)),find:($)=>U(()=>q(Q).find($)),findIndex:($)=>U(()=>q(Q).findIndex($)),findLast:($)=>U(()=>q(Q).findLast($)),findLastIndex:($)=>U(()=>q(Q).findLastIndex($)),get lastItem(){return U(()=>{return c(q(Q)).pop()})},get length(){return U(()=>q(Q).length)},map:($)=>U(()=>q(Q).map($)),partition:($)=>{let W=U(()=>q(Q).filter($)),J=U(()=>q(Q).filter((Y,G,_)=>!$(Y,G,_)));return[W,J]},reduce:($,W)=>U(()=>q(Q).reduce($,W)),reduceRight:($,W)=>U(()=>q(Q).reduceRight($,W)),get reversed(){return U(()=>q(Q).toReversed())},some:($)=>U(()=>q(Q).every($)),toSorted:($)=>U(()=>q(Q).toSorted($)),toSpliced:($,W,...J)=>U(()=>q(Q).toSpliced(q($),q(W),...J))}},HX=(Q)=>{let Z=["toExponential","toFixed","toPrecision"].reduce(($,W)=>{let J=(...Y)=>{return U(()=>{let G=RQ(...Y);return q(Q)[W](...G)})};return $[W]=J,$},{});return{...s(Q),...Z,toConfined:($,W)=>U(()=>q(Q)<q($)?q($):q(Q)>q(W)?q(W):q(Q)),toLocaleString:($,W)=>U(()=>q(Q).toLocaleString(q($),W))}},NX=(Q)=>{if(!$Q(q(Q)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...s(Q),prop:(X)=>U(()=>q(Q)[X]),get props(){return Object.keys(q(Q)).reduce((Z,$)=>{let W=$;return Z[W]=this.prop(W),Z},{})},get keys(){return U(()=>Object.keys(q(Q)))}}},gQ=(Q)=>{let Z=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce(($,W)=>{let J=(...Y)=>{return U(()=>{let G=RQ(...Y);return q(Q)[W](...G)})};return $[W]=J,$},{});return{...s(Q),...Z,get length(){return U(()=>q(Q).length)},get lowercase(){return U(()=>q(Q).toLowerCase())},get Sentencecase(){return U(()=>{let $=q(Q);return $.charAt(0).toUpperCase()+$.slice(1).toLowerCase()})},get TitleCase(){return U(()=>q(Q).toLowerCase().replace(/\b\w/g,($)=>$.toUpperCase()))},get UPPERCASE(){return U(()=>q(Q).toUpperCase())},localeCompare:($,W,J)=>U(()=>q(Q).localeCompare(q($),q(W),J)),normalize:($)=>U(()=>q(Q).normalize(q($))),replace:($,W)=>U(()=>q(Q).replace(q($),q(W))),replaceAll:($,W)=>U(()=>q(Q).replaceAll(q($),q(W))),search:($)=>U(()=>q(Q).search($)),split:($,W)=>U(()=>{let J=$ instanceof RegExp?$:q($);return q(Q).split(J,q(W))}),toLocaleLowerCase:($)=>U(()=>q(Q).toLocaleLowerCase(q($))),toLocaleUpperCase:($)=>U(()=>q(Q).toLocaleUpperCase(q($)))}},TX=S("dksjfbksjnd"),G1=gQ(TX).split(""),k=(Q)=>{return typeof q(Q)==="number"?HX(Q):typeof q(Q)==="string"?gQ(Q):Array.isArray(q(Q))?kX(Q):$Q(q(Q))?NX(Q):s(Q)},R=(Q,...X)=>U(()=>{return Q.reduce((Z,$,W)=>{let J,Y=X[W];if(typeof Y==="function")J=Y()??"";else if(_Q(Y))J=Y.value??"";else J=Y??"";return`${Z}${$}${J.toString()}`},"")}),CQ=["onmount","onunmount"],bQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],wX=[...bQ,...CQ],SX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],n,xX=(Q)=>{if(!n)n=document.createElement("textarea");return n.innerHTML=Q,n.value},LX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},vQ=LX(),x={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},e=(Q)=>Array.isArray(Q),QQ=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,m=(Q)=>typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,BQ=(Q)=>g(Q)&&m(Q.value),VX=(Q)=>m(Q)||BQ(Q),hQ=(Q)=>{return g(Q)&&(m(Q.value)||e(Q.value)&&Q.value.every((X)=>m(X)))},cQ=(Q)=>{return!g(Q)&&(IQ(Q)||yQ(Q)||m(Q)||e(Q)&&Q.every((X)=>VX(X)))},FQ=(Q)=>{return hQ(Q)||cQ(Q)},EQ=!1,IX={},h={},yX=globalThis.MutationObserver,gX=new yX((Q)=>{Q.forEach((X)=>{if(X.type==="childList")X.addedNodes.forEach((Z)=>{if(QQ(Z)){let $=Z,W=$.elementId;if(h[W])delete h[W];else IX[W]=$.tagName}}),X.removedNodes.forEach((Z)=>{if(QQ(Z)){let $=Z,W=$.elementId,J=$.unmountListener;if(J)h[W]={element:$,unmountListener:J}}})}),Object.entries(h).forEach(([X,Z])=>{let{element:$,unmountListener:W}=Z;mQ($,W)})}),mQ=(Q,X)=>{if(!QQ(Q))return;let Z=Q.children;for(let $=0;$<Z.length;$++){let W=Z[$];mQ(W,W.unmountListener)}if(X&&X(Q),h[Q.elementId])delete h[Q.elementId]},CX=()=>{if(!EQ&&!x.currentIs("build"))gX.observe(document.body,{childList:!0,subtree:!0}),EQ=!0},pQ=(Q,X)=>wX.includes(Q)&&X===void 0,uQ=(Q,X)=>bQ.includes(Q)&&typeof X==="function",rQ=(Q,X)=>CQ.includes(Q)&&typeof X==="function",bX=(Q,X)=>pQ(Q,X)||uQ(Q,X)||rQ(Q,X),vX=(Q,X)=>{Object.entries(X).forEach(([Z,$])=>{if(pQ(Z,$));else if(uQ(Z,$)){let W=Z.slice(2);Q.addEventListener(W,(J)=>{if(W==="keypress")J.preventDefault();$(J)})}else if(rQ(Z,$)){if(Z==="onmount"&&!x.currentIs("build")){let W=$;setTimeout(()=>W(Q),0)}if(Z==="onunmount")CX(),Q.unmountListener=$}else console.error(`Invalid event key: ${Z} for element with tagName: ${Q.tagName}`)})},OQ=(Q,X,Z)=>{let $=(_Q(Z)?Z.value:Z)??"";if(typeof $==="boolean")if($)Q.setAttribute(X,"");else Q.removeAttribute(X);else if(X==="value")Q.value=$;else Q.setAttribute(X,$)},hX=(Q,X)=>{let Z={};Object.entries(X).forEach(($)=>{let[W,J]=$;if(g(J))Z[W]=J;OQ(Q,W,J)}),r(()=>{Object.entries(Z).forEach(($)=>{let[W,J]=$,Y=J.value;if(!x.currentIs("run"))return;OQ(Q,W,Y)})})},l=(Q)=>{if(BQ(Q)){let X=Q.value;return l(X)}if(typeof Q==="string")return document.createTextNode(xX(Q));if(m(Q)){let X=Q();if(!QQ(X))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return X}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},cX=(Q,X)=>{if(!X)return;if(hQ(X))r(()=>{let $=X.value,W=e($)?$:[$];W.forEach((Y,G)=>{let _=Q.childNodes[G],F=l(Y);if(_&&F)Q.replaceChild(F,_);else if(F)Q.appendChild(F);else console.error(`No child found for node with tagName: ${Q.tagName}`)});let J=W.length;while(J<Q.childNodes.length){let Y=Q.childNodes[J];if(Y)Q.removeChild(Y)}});if(cQ(X)){let Z=IQ(X)?[X.value]:yQ(X)?X.value:e(X)?X:[X],$=[];if(Z.forEach((W,J)=>{if(BQ(W))$.push({index:J,childSignal:W});let Y=l(W),G=Q.childNodes[J];if(G&&Y)Q.replaceChild(Y,G);else if(!G&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)}),$.length)$.forEach(({index:W,childSignal:J})=>{r(()=>{if(!J.value)return;if(!x.currentIs("run"))return;let Y=l(J.value),G=Q.childNodes[W];if(G&&Y)Q.replaceChild(Y,G);else if(!G&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)})})}},mX=(Q,X)=>{let Z=void 0,$={},W={};return Object.entries(Q).forEach(([J,Y])=>{if(J==="children")if(FQ(Y))Z=Y;else if(Y===void 0)Z=Y;else throw new Error(`Invalid children prop for node with tagName: ${X}

 ${JSON.stringify(Y)}`);else if(bX(J,Y))$[J]=Y;else W[J]=Y}),{children:Z,eventProps:$,attributeProps:W}},pX=(Q,X)=>{let Z=()=>{let $=vQ.getNewId(),W=x.currentIs("mount")?document.querySelector(`[data-elem-id="${$}"]`):document.createElement(Q);W.elementId=$,W.unmountListener=void 0;let J=FQ(X)?{children:X}:X;if(!x.currentIs("run"))J["data-elem-id"]=W.elementId.toString();let Y=mX(J,W.tagName);if(vX(W,Y.eventProps),hX(W,Y.attributeProps),cX(W,Y.children),!x.currentIs("build"))W.removeAttribute("data-elem-id");return W};return Z.isElementGetter=!0,Z},MQ=(Q,X,Z)=>{let $=S(X),W=S(Q),J=Z(U(()=>W.value),U(()=>$.value)),Y,G,_=!1;if(J?.isElementGetter)Y=()=>{if(_&&G)return G;return G=J(),_=!0,G},Y.isElementGetter=!0;else if(typeof J==="string")Y=J;else throw`One of the child, ${J} passed in ForElement is invalid.`;return{indexSignal:$,itemSignal:W,mappedChild:Y}},kQ=(Q,X,Z)=>{if(X!==void 0&&X>=0&&Z){let $=X>Q.length?Q.length:X;Q.splice($,0,Z)}return Q},uX=({subject:Q,itemKey:X,map:Z,n:$,nthChild:W})=>{if(W&&$===void 0||$!==void 0&&$>-1&&!W)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let J=U(()=>{let j=q(Q);return Array.isArray(j)?j:[]});if(!X)return U(()=>kQ(J.value.map(Z),$,W));let Y=W;if(W&&typeof W!=="string"){let j=W(),K=()=>j;K.isElementGetter=!0,Y=K}let G=J.value;if(G.length&&typeof G[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let _=null,F=U((j)=>{return _=j||_,J.value}),B=U((j)=>{if(!j||!_)return F.value.map((N,H)=>MQ(N,H,Z));return OX(_,F.value,X).map((O,N)=>{let H=(j||[])[O.oldIndex];if(console.assert(O.type==="add"&&O.oldIndex===-1&&!H||O.oldIndex>-1&&!!H,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),H){if(O.type==="shuffle")H.indexSignal.value=N;if(O.type==="update")H.indexSignal.value=N,H.itemSignal.value={...O.value};return H}return MQ(O.value,N,Z)})});return U(()=>kQ(B.value.map((j)=>j.mappedChild),$,Y))},rX=({subject:Q,isTruthy:X,isFalsy:Z})=>{let $=z.Span({style:"display: none;"}),W=()=>(q(Q)?X:Z)||$;return g(Q)?U(W):W()},dX=({subject:Q,caseMatcher:X,defaultCase:Z,cases:$})=>{let W=()=>{let J=q(Q),Y=void 0;for(let[G,_]of Object.entries($))if(X&&X(Q,G)||J===G){Y=_;break}return Y||Z||z.Span({style:"display: none;"})};return g(Q)?U(W):W()},sX=SX.reduce((Q,X)=>{let Z=X.split("").map((W,J)=>!J?W.toUpperCase():W).join(""),$=(W)=>pX(X,W);return Q[Z]=$,Q},{}),oX={For:uX,If:rX,Switch:dX},z={...sX,...oX},P=(Q)=>(X)=>{for(let $ of Object.keys(X))if(X[$]===void 0)delete X[$];let Z=Object.entries(X).reduce(($,W)=>{let[J,Y]=W,G=typeof Y==="string",_=Array.isArray(Y)&&Y.every((B)=>typeof B==="string"),F=g(Y)||typeof Y==="function"?Y:G||_?{type:"non-signal",get value(){return q(Y)}}:FQ(Y)?Y:{type:"non-signal",get value(){return q(Y)}};return $[J]=F,$},{});return Q(Z)},iX="1.1.2",dQ=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],nX=[1,1,1,1,1,1,1],lX=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],zQ=["Not started","Completed"],aX=[70,60,45],HQ={id:"analytics",lastInteraction:new Date().getTime()},d={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},sQ={total:0,spaceLeft:100,documents:{}},NQ=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var TQ=86400000,tX=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],eX=["January","February","March","April","May","June","July","August","September","October","November","December"],Q0=(Q,X)=>tX[Q].substring(0,X),X0=(Q,X)=>eX[Q].substring(0,X),fQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},XQ=(Q)=>fQ(Q).getTime(),oQ=(Q,X)=>XQ(Q)===XQ(X),$0=(Q,X)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+X),Z0=(Q)=>{let X=new Date;return Array(Q).fill(0).map((Z,$)=>new Date(X.getFullYear(),X.getMonth()-$,1)).reverse()},W0=(Q,X)=>{let Z=XQ(Q),$=XQ(X);if(Z===$)return[fQ(new Date(Z))];let W=Z<$?Z:$,Y=((Z<$?$:Z)-W)/TQ;return Array(Y+1).fill(0).map((G,_)=>new Date(W+_*TQ))},J0=(Q)=>{if(Q<1)throw"";let X=new Date,Z=X.getFullYear(),$=X.getMonth(),W=new Date(Z,$-(Q-1),1),J=new Date(Z,$+1,0);return{startDate:W,endDate:J}},iQ={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},Y0=(Q)=>location.href=Q,z0=()=>location.href=iQ.HABITS.NEW.href,q0=()=>location.href=iQ.SETTINGS.PRIVACY_POLICY.href,G0=1.6181,U0=(Q)=>lX.find((X)=>X.code===Q),nQ=(Q,X)=>{return Q<0?U0(-1):{isMaxLevel:Q===X.length-1,name:X[Q],code:Q}},_0=(Q)=>({level:nQ(-1,[]),date:Q}),R0=(Q,X,Z)=>({level:nQ(Q,X),date:Z}),B0=(Q,X)=>Q.find((Z)=>oQ(Z.date,X)),lQ=(Q)=>{let X=fQ(new Date(Q.id));return{...Q,startDate:X,levels:Q.levels.map((Z,$)=>({isMaxLevel:$===Q.levels.length-1,name:Z,code:$})),tracker:Q.tracker.map((Z,$)=>R0(Z,Q.levels,$0(X,$))),milestones:K0(Q.milestones)}},F0=(Q)=>{return{...Q,levels:Q.levels.map((X)=>X.name),tracker:Q.tracker.map((X,Z)=>X.level.code),milestones:P0(Q.milestones)}},f0=()=>{let X={id:new Date().getTime(),title:"",frequency:nX,colorIndex:0,levels:zQ,tracker:[],milestones:aX,pauses:[],isStopped:!1};return lQ(X)},K0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],P0=(Q)=>Q.filter((X)=>!!X.percent).map((X)=>X.percent),aQ=(Q,X)=>{let Z=Q[0];for(let $=0;$<Q.length;$++)if(Z=Q[$],Z.percent<=X)break;return{label:Z.label,icon:Z.icon,color:Z.color}},A0=(Q,X)=>{if(!Q.title)return"Title should not be empty";if(X&&h0(Q.title))return"A habit with same name already exists";if(Q.frequency.every(($)=>!$))return"Select at least one day in a week";if(!Q.levels.every(($)=>!!$.name))return"One of the levels is empty";if(Q.levels.some(($,W)=>{for(let J=W+1;J<Q.levels.length;J++)if(Q.levels[J].name===$.name)return!0;return!1}))return"Multiple levels have same name";if(!Q.milestones.every(($)=>$.percent<=100&&$.percent>=0))return"The milestones should be between 0 and 100 percents";if(!Q.milestones.every(($,W,J)=>W===0?!0:J[W-1].percent>$.percent))return"Milestones should be in order (from high to low)";return""},j0=(Q,X,Z)=>{let $=tQ(Q.tracker,X,Z),W=Q.levels.length-1,J=0,Y=0,G=0,_=0,F=0,B=0;return $.forEach((A,j)=>{if(J+=A.level.code>-1?1:0,Y+=A.level.code>0?1:0,G+=A.level.code>0?A.level.code:0,j===$.length-1)return;let O=A.level.code<1;B=O?B+1:0;let H=100*((A.level.code>0?A.level.code:0)/(Q.levels.length-1));_=Math.round(H)>50?_+1:0,F=O?0:F+1}),{title:Q.title,aceStreak:_,followStreak:F,missed:B,percent:Math.round(100*(G/(J*W))),totalDays:J,workingDays:Y}},D0=(Q,X,Z)=>{let $=!!Q.length;if(!$)return{hideAddButton:!1,hideRemoveButton:X.length<3};let W=X[Z],J=!!($&&Q.find((j)=>j.name===W.name)),Y=Q.length!==X.length,G=X.length<Q.length,_=X.length>Q.length,F=!Y&&Q.length&&Q.some((j,K)=>j.name!==X[K].name);return{hideAddButton:G||F||J&&G,hideRemoveButton:G||F||J&&_}},E0=(Q,X,Z)=>{let $=!!Q.length,W=X[Z],J=!!($&&Q.find((G)=>G.name===W.name)),Y=Q.length!==X.length;return J&&Y},O0=(Q,X,Z,$=!1)=>{let W=dQ[Z],J=Q/(X-1),G=Math.trunc(Math.pow(J,G0)*255).toString(16),_=G.length===1?`0${G}`:G,F=Q<0||_==="0"?"transparent":`${W}${_}`,B=$?Q/(X-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:F,fontColor:B,peakBackgroundColor:W,levelPercent:Math.round(J*100)}},M0=(Q,X)=>{let Z=[];for(let $ of X)if(!Q.some((J)=>{if(oQ(J.date,$))return Z.push(J),!0;return!1}))Z.push(_0($));return Z},tQ=(Q,X,Z)=>{let $=W0(X,Z);return M0(Q,$)},k0=(Q,X,Z)=>{if(!Q.length||Q.length===X.length)return Z;let $=[...Z],W=[];return Q.forEach((J,Y)=>{let G=X.find((A)=>A.name===J.name),_=!G,F=(A)=>{let j=[];Z.forEach((K,O)=>{if(K.level.code===J.code)j.push(O)}),W.push({indices:j,newLevel:A})};if(_){if(Y===Q.length-1)F(X[X.length-1]);return}if(G.code===J.code)return;F(G)}),W.forEach((J)=>{J.indices.forEach((Y)=>{$[Y]={...$[Y],level:J.newLevel}})}),$},wQ=(Q)=>{let X=Q.length-1;for(let Z=0;Z<Q.length;Z++)Q[Z]={...Q[Z],code:Z,isMaxLevel:Z===X};return Q},H0=(Q)=>[{label:"Today",icon:"calendar_month",isSelected:Q==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Q==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Q==="/settings/",href:"/settings/"}],N0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},KQ=(Q,X,Z)=>{let $=JSON.parse(Q||"{}"),W=$&&typeof $==="object",J=$[X];if(!W||!(Z?J===Z:!!J))return;return $},w=(Q)=>{return(...X)=>{return N0(),v0(new Date),Q&&Q(...X)}},eQ="analytics",T0="id",w0="analytics",QX=(Q)=>{localStorage.setItem(eQ,JSON.stringify(Q))},S0=()=>{if(!x.currentIs("run"))return HQ;let Q=()=>{let $=localStorage.getItem(eQ);return KQ($,T0,w0)};if(!Q())QX(HQ);let Z=Q();if(!Z)throw"Error fetching analytics";return Z},XX=()=>{let Q=[];for(let X in localStorage){if(!localStorage.hasOwnProperty(X))continue;Q.push(X)}return Q},$X=(Q)=>Q.startsWith("h."),ZX=(Q)=>`h.${Q}`,x0=(Q)=>{if(!$X(Q))return;let X=localStorage.getItem(Q),Z=KQ(X,"title");if(!Z)return;return Z},L0=()=>{if(!x.currentIs("run"))return[];let Q=[];for(let X of XX()){let Z=x0(X);if(!Z)continue;Q.push(Z)}return Q},V0=(Q)=>{let X=ZX(Q.id);localStorage.setItem(X,JSON.stringify(Q))},I0=(Q)=>{let X=ZX(Q);localStorage.removeItem(X)},WX="settings",y0="id",g0="local-settings",PQ=(Q)=>{localStorage.setItem(WX,JSON.stringify(Q))},JX=()=>{if(!x.currentIs("run"))return d;let Q=()=>{let $=localStorage.getItem(WX);return KQ($,y0,g0)};if(!Q())PQ(d);let Z=Q();if(!Z)throw"Error fetching settings";return C0(Z),Q()},C0=(Q)=>{if(!Q.editPage)PQ({...Q,editPage:d.editPage})},b0=()=>{let Q=sQ;if(!x.currentIs("run"))return Q;let X=1024,Z=0,$=(W)=>W/X;for(let W of XX()){let J=(localStorage[W].length+W.length)*2,Y=$X(W)?"habits":W;Z+=J,Q.documents[Y]=(Q.documents[Y]?Q.documents[Y]:0)+J}return Q.total=$(Z),Q.spaceLeft=100*(5242880-Z)/5242880,Q},v0=(Q)=>{let X=S0();QX({...X,lastInteraction:Q.getTime()})},h0=(Q)=>{let Z=L0().find(($)=>$.title.trim()===Q.trim());return Z?lQ(Z):void 0},YX=(Q)=>{let X=F0(Q);V0(X)},c0=(Q)=>{let X={...Q,isStopped:!0};YX(X)},m0=(Q)=>I0(Q),ZQ=()=>{return JX().editPage},zX=(Q)=>{let X=JX();PQ({...X,editPage:Q})},p0=()=>b0(),u0=P(({cssClasses:Q,hideRemove:X,hideAdd:Z,onRemove:$,onAdd:W})=>{let J=M(X).and(Z).ternary("bn","ba"),Y=M(Z).ternary("","br");return z.Span({class:R`br3 pb1 f4 bw1 b--light-silver dark-gray ${J} ${Q}`,children:[z.If({subject:X,isFalsy:z.Span({class:R`pointer ph2 pb1 bw1 b--light-silver ${Y}`,onclick:w($),children:"-"})}),z.If({subject:Z,isFalsy:z.Span({class:"pointer ph2 pb1",onclick:w(W),children:"+"})})]})}),y=P(({cssClasses:Q,onTap:X,children:Z})=>z.Button({class:R`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,onclick:w(()=>X()),children:Z})),JQ=P(({cssClasses:Q})=>{return z.Div({class:R`bb b--light-gray ${Q}`})}),L=P(({cssClasses:Q,size:X,onClick:Z,iconName:$,title:W})=>{let J=Z?"pointer":"",Y=k(X).or(16);return z.Span({class:R`material-symbols-outlined ${J} ${Q}`,style:R`font-size: ${Y}px`,onclick:w(Z),children:$,title:W})}),qQ=P(({cssClasses:Q,href:X,target:Z,onClick:$,children:W})=>{let J=M(X).or($).ternary("pointer underline","");return z.A({...X?{href:X}:{},class:R`noselect ${J} ${Q}`,target:Z,onclick:w($),children:W})}),WQ=P(({cssClasses:Q,isOpen:X,content:Z,onTapOutside:$})=>{let W=(J)=>{setTimeout(()=>r(()=>{if(X.value)J.showModal();else J.close()}))};return z.Dialog({onmount:W,onclick:w($),class:R`pa0 br3 ${Q}`,children:[z.Div({onclick:(J)=>J.stopPropagation(),children:Z})]})}),r0=P(({cssClasses:Q,placeholder:X,num:Z,onchange:$})=>{let W=(J)=>{let Y=J.target.value,G=Number.parseFloat(Number.parseFloat(Y||"0").toFixed(2));$(G)};return z.Input({class:Q,type:"number",placeholder:X,value:k(Z).string,onchange:W})}),d0=P(({progress:Q,cssClasses:X})=>{return z.Div({class:R`br-pill bg-moon-gray ${X}`,children:z.Div({class:"br-pill bg-app-theme-color pa1",style:R`width: ${k(Q).toConfined(0,100)}%;`})})}),qX=P(({cssClasses:Q,header:X,content:Z,bottombar:$})=>{return z.Div({class:"flex-ns justify-center-ns",children:z.Div({class:R`w6-ns ${Q}`,children:[z.If({subject:X,isTruthy:z.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:X})}),Z,z.Div({class:"pv6 mt5"}),z.If({subject:$,isTruthy:z.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:$})})]})})}),U1=P(({cssClasses:Q,tabItemCssClasses:X,selectedTabCssClasses:Z,tabs:$,selectedTabIndex:W,onTabChange:J})=>{let Y=(G)=>G===W.value?`b--light-silver b black ${Z?.value}`:"pointer b--transparent b--hover-black silver pointer";return z.Div({class:R`bg-white br3 ${Q}`,children:z.Div({class:"flex items-center justify-between pa1",children:z.For({subject:$,map:(G,_)=>z.Span({class:R`
                w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${Y(_)} ${X}`,onclick:w(()=>J(_)),children:G})})})})}),SQ=P(({cssClasses:Q,placeholder:X,disabled:Z,text:$,onmount:W,onchange:J,onkeydown:Y,onfocus:G,onblur:_})=>{let F,B=(K)=>{if(F=K,W)W(K)},A=(K)=>{let O=K.target.value;if(J)J(O)},j=(K)=>{let O=K.key.length===1?F.value+K.key:K.key==="Backspace"?F.value.slice(0,-1):F.value,N={key:K.key,text:O};if(Y)Y(N)};return z.Input({onmount:B,class:R`${Q}`,type:"text",placeholder:X,disabled:M(Z).truthy,value:$,onchange:A,onkeydown:j,onfocus:G,onblur:_})}),s0=P(({cssClasses:Q,isOn:X,onToggle:Z})=>{let $=M(X).ternary("b--transparent","b--moon-gray bg-moon-gray"),W=M(X).ternary("b--mid-gray bg-mid-gray","b--transparent");return z.Div({class:R`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,onclick:w(Z),children:[z.Div({class:R`br-100 ba bw1 b--hover-black pa1 ${$}`}),z.Div({class:"pa05"}),z.Div({class:R`br-100 ba bw1 b--hover-black pa1 ${W}`})]})}),o0=P(({cssClasses:Q,justifyCssClasses:X,label:Z})=>{let $=k(X).or("justify-end"),W=k(Z).or("Add habit");return z.Div({class:R`w-100 flex ${$} ${Q}`,children:y({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[L({cssClasses:"nl1 mr1",size:22,iconName:"add"}),W],onTap:z0})})}),AQ=P(({cssClasses:Q,dotCssClasses:X,colorIndex:Z,level:$,totalLevels:W,showText:J,textContent:Y,icon:G,iconSize:_,isRectangular:F,showHeight:B,onClick:A})=>{let j=M(F).ternary("br0","br-100"),K=M($).isLT(0).ternary("bg-transparent","bg-light-gray"),{peakBackgroundColor:O,backgroundColor:N,fontColor:H,levelPercent:C}=k(v(O0,$,W,Z,J)).props,o=k(Y).or("Î‡"),V=M(B).and(G).andThisIsGT(C,99).truthy,u=()=>{if(A&&$.value>=0)A()};return z.Span({class:R`pointer relative overflow-hidden ${j} ${K} ${Q}`,onclick:w(u),children:z.If({subject:B,isTruthy:z.Span({class:R`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${X}`,style:R`
            background-color: ${O};
            color: white;
            height: ${C}%;`,children:z.If({subject:V,isTruthy:L({iconName:G,size:_})})}),isFalsy:z.Span({class:R`flex items-center justify-around absolute absolute--fill ${X}`,style:R`
            background-color: ${N};
            color: ${H};`,children:z.If({subject:G,isTruthy:L({iconName:G,size:_}),isFalsy:z.Span(o)})})})})}),i0=P(({cssClasses:Q})=>{return y({cssClasses:R`pa3 flex items-center ${Q}`,children:[L({iconName:"arrow_back"}),z.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),_1=P(({cssClasses:Q,milestones:X,achievedMilestone:Z,completionPercent:$})=>{let W=k(Z).prop("color"),J=v((Y)=>Y>53?"Average completion":Y>43?"Avg completion":Y>35?"Completion":"",$);return z.Div({class:R`center ${Q}`,children:[z.Div({class:"pb2 w-100 relative",children:z.For({subject:X,map:(Y,G)=>{return n0({colorCss:`bg-${Y.color}`,percent:Y.upperLimit,hideUpperLimit:G===0})}})}),z.Div({class:R`nt3dot6 h1dot2 bw1 relative br b--${W}`,style:R`width: ${$}%;`,children:z.Div({class:R`relative flex items-start nt1 justify-between f7 mid-gray`,children:[z.Div(J),z.Div({class:R`absolute right-0 pr1 b f6 ${W}`,children:R`${$}%`})]})})]})}),n0=P(({colorCss:Q,hideUpperLimit:X,percent:Z})=>{let $=M(X).ternary("",R`${Z}%`),W=R`width: ${Z}%;`;return z.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:W,children:[z.Div({class:R`absolute absolute-fill h0dot15 w-100 ${Q}`}),z.Div({class:"flex justify-end w-100 pt2 f7",children:z.Div({class:"nr3 pb2 light-silver b",children:$})})]})}),l0=P(({cssClasses:Q,habit:X,date:Z,colorIndex:$,totalLevels:W})=>{let J=U(()=>{let Y=Z.value.getFullYear(),G=Z.value.getMonth(),_=new Date(Y,G,1),F=new Date(Y,G+1,0);return tQ(X.value.tracker,_,F)});return z.Div({class:R`flex items-center ${Q}`,children:[z.Div({class:"f8 b w2 light-silver",children:U(()=>X0(Z.value.getMonth(),3))}),z.Div({class:"w-100 flex items-center justify-between",children:z.For({subject:J,map:(Y)=>AQ({cssClasses:"pa1",colorIndex:$,level:Y.level.code,totalLevels:W})})})]})}),R1=P(({cssClasses:Q,habit:X,months:Z,onClick:$})=>{let{milestones:W,title:J,colorIndex:Y,levels:G}=k(X).props,_=v((K,O)=>{let{startDate:N,endDate:H}=J0(K);return j0(O,N,H).percent},Z,X),F=v(aQ,W,_),{icon:B,color:A}=k(F).props,j=v(Z0,Z);return z.Div({class:R`pointer bg-white ${Q}`,onclick:w($),children:[z.Div({class:"flex items-center justify-between nt1 mb2",children:[z.Div({class:"f5 dark-gray b",children:J}),z.Div({class:"f6 silver b flex items-center",children:[L({cssClasses:R`mr1 ${A}`,iconName:B}),R`${_}%`]})]}),z.Div({class:"mt2 mb1",children:z.For({subject:j,map:(K)=>l0({cssClasses:"mb1",habit:X,date:K,colorIndex:Y,totalLevels:G.value.length})})})]})}),a0=P(({cssClasses:Q,editableHabit:X,editedHabit:Z,hideDescriptions:$,showFullCustomisations:W,onChange:J})=>{let Y=S(!1),G=k(W).or(Y),{title:_,frequency:F,levels:B,milestones:A,colorIndex:j}=k(Z).props,K=k(F).every((E)=>!!E),O="bg-mid-gray white",N="bg-near-white light-silver",H=M(K).ternary("bg-mid-gray white","bg-near-white light-silver"),C=M(Y).ternary("remove","add"),o=R`Show ${M(Y).ternary("Less","More")} Customisations`,V=(E)=>{J({...Z.value,title:E})},u=(E)=>{J({...Z.value,colorIndex:E})},i=(E)=>{if(E<-1||E>6)throw"Invalid day index";if(E===-1){J({...Z.value,frequency:[1,1,1,1,1,1,1]});return}let f=K.value?F.value.map((T)=>0):F.value;f[E]=K.value?1:f[E]?0:1,J({...Z.value,frequency:f})},RX=(E,f)=>{let T=B.value;T[f]={...T[f],name:E},J({...Z.value,levels:T})},BX=(E)=>{let f=B.value;f.splice(E,0,{isMaxLevel:!1,name:"",code:E}),J({...Z.value,levels:wQ(f)})},FX=(E)=>{let f=B.value;if(f.length<3)return;f.splice(E,1),J({...Z.value,levels:wQ(f)})},fX=(E,f)=>{if(f<0||f>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let T=[...Z.value.milestones];T[f]={...T[f],percent:E},J({...Z.value,milestones:T})};return z.Div({class:Q,children:[I({cssClasses:"pb1",title:"Weekdays",children:z.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:z.For({subject:Array(7).fill(0),n:0,nthChild:z.Span({class:R`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${H}`,children:"Daily",onclick:w(()=>i(-1))}),map:(E,f)=>{let T=U(()=>F.value[f]&&!K.value?"bg-mid-gray white":"bg-near-white light-silver");return z.Span({class:R`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${T}`,children:Q0(f,1),onclick:w(()=>i(f))})}})})}),I({cssClasses:"pb2",title:"Title of the habit",children:SQ({cssClasses:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:_,onchange:V})}),z.If({subject:G,isTruthy:z.Div([I({cssClasses:"pb1",title:"Select a color tag",children:z.Div({class:"mb1 flex items-center",children:z.For({subject:dQ,map:(E,f)=>{let T=M(j).equals(f).ternary("#999","#f4f4f4");return z.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:R`border-color: ${T}`,onclick:w(()=>u(f)),children:z.Span({class:R`pa2 br-100`,style:`background-color: ${E}`})})}})})}),I({cssClasses:"pb3",title:"Status update levels",hideDescription:$,description:`
                  When updating a habit status in a day, we generally have only two levels - "${zQ[0]}"
                  or "${zQ[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.`,children:z.For({subject:B,map:(E,f)=>{let T=X?.value?.levels||[],jQ=B.value,{hideAddButton:KX,hideRemoveButton:PX}=D0(T,jQ,f),AX=E0(T,jQ,f);return z.Div({children:[z.Div({class:"flex items-center justify-between",children:[z.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[AQ({cssClasses:"w1 h2 br3 br--left ml1px",dotCssClasses:"br3 br--left",colorIndex:j,level:f,isRectangular:!0,totalLevels:B.value.length}),SQ({cssClasses:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${f}`,disabled:AX,text:E.name,onchange:(jX)=>RX(jX,f)})]}),u0({hideAdd:KX,hideRemove:PX,onAdd:()=>BX(f+1),onRemove:()=>FX(f)})]}),z.If({subject:M(B).lengthGT(f+1).truthy,isTruthy:z.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),I({title:"Habit completion goal",hideDescription:$,description:R`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>aQ(Z.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.`,children:z.For({subject:A,n:0,nthChild:z.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[z.Span({class:"lh-copy",children:""}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),z.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(E,f)=>z.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[z.Span({class:"lh-copy flex items-center",children:[L({cssClasses:`mr2 ${E.color}`,size:20,iconName:E.icon}),E.label]}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.If({subject:f===3,isTruthy:z.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:r0({cssClasses:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:E.percent,onchange:(T)=>fX(T,f)})}),z.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),z.If({subject:W,isFalsy:y({cssClasses:"pv2 ph3 flex items-center",onTap:()=>Y.value=!Y.value,children:[L({cssClasses:"mr1",iconName:C}),o]})})]})}),B1=P(({editableHabit:Q,onMount:X})=>{let Z=S(d.editPage),$=S(!1),W=S(!1),J=S(""),Y=S(f0()),G=v((V)=>V?`Edit '${V.title}'`:"Add new habit",Q),_=M(G).lengthGT(22).ternary("f2dot66",""),F=M(Q).ternary("Update","Add"),B=()=>$.value=!0,A=()=>$.value=!1,j=()=>{A(),history.go(-2)},K=()=>W.value=!0,O=()=>W.value=!1,N=()=>{c0(Y.value),O(),history.back()},H=(V)=>Y.value=V,C=()=>{if(J.value=A0(Y.value,!Q?.value),J.value)return;let V=Y.value,u=[...Q?.value?.levels||[]],i=k0(u,V.levels,V.tracker);YX({...Y.value,tracker:i}),history.back()};return GX({onMount:()=>{if(X)X(),Y.value=Q?.value;Z.value=ZQ()},body:qX({cssClasses:"bg-white ph3",header:z.Div({class:_,children:G}),content:z.Div([z.If({subject:Q,isTruthy:z.Div([I({cssClasses:"pb2",title:"Actions",children:[t0({isOpen:$,habit:Y,onClose:A,onDone:j}),qQ({cssClasses:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:B}),e0({isOpen:W,habit:Y,onClose:O,onDone:N}),qQ({cssClasses:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:K})]})])}),a0({editableHabit:Q,editedHabit:Y,hideDescriptions:U(()=>!Z.value.showHints),showFullCustomisations:k(Z).prop("showFullCustomisation"),onChange:H})]),bottombar:z.Div({class:"bg-white w-100 pv3",children:[z.If({subject:J,isTruthy:z.Div({class:"red mb3",children:J})}),z.Div({class:"flex items-center justify-stretch",children:[i0({cssClasses:"w4dot50 w4dot25-ns"}),y({cssClasses:"w-100 pa3 ml3 b",children:F,onTap:C})]})]})})})}),F1=P(({cssClasses:Q})=>{return z.Div({class:R`flex flex-column items-center justify-around ${Q}`,children:[z.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),z.Div("Looks like, you just landed here!"),o0({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),t0=P(({isOpen:Q,habit:X,onClose:Z,onDone:$})=>{let W=()=>{m0(X.value.id),$()};return WQ({cssClasses:"bn w-30-ns",isOpen:Q,onTapOutside:Z,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:R`Delete '${()=>X.value.title}'?`}),z.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,z.Br({}),z.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),z.Div({class:"flex items-center justify-between f6",children:[y({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Z}),y({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:W})]})]})})}),f1=P(({isOpen:Q,habit:X,date:Z,showTitleInHeader:$,onClose:W,onChange:J})=>{let{title:Y,levels:G,tracker:_,colorIndex:F}=k(X).props,B=U(()=>$?.value?`Change status of  '${Y.value}'`:`Change status for ${Z.value.toDateString()}`);return WQ({cssClasses:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:W,content:z.Div({class:"mnw5",children:[z.Div({class:"f5 b tc pa3",children:B}),z.Div({class:"f5 mb1",children:z.For({subject:k(G).reversed,map:(A,j)=>{let K=G.value.length-1-j,O=R`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>B0(_.value,Z.value)?.level.code===K?"bg-near-white black fw6":"gray fw5"}`,N=K<1?"b--light-silver":"b--transparent";return z.Div({class:O,onclick:w(()=>J(K)),children:[AQ({cssClasses:`pa1 mr3 ba b ${N}`,colorIndex:F,level:K,totalLevels:G.value.length,isRectangular:!0}),z.Span(A.name)]})}})})]})})}),e0=P(({isOpen:Q,habit:X,onClose:Z,onDone:$})=>{return WQ({cssClasses:"bn",isOpen:Q,onTapOutside:Z,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:R`Stop '${()=>X.value.title}'?`}),z.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",z.Br({}),z.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),z.Div({class:"flex items-center justify-between f6",children:[y({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:Z}),y({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:$})]})]})})}),Q1=P(({cssClasses:Q,links:X})=>{return z.Div({class:R`flex items-center justify-between pv3 bg-near-white ${Q}`,children:z.For({subject:X,map:(Z)=>X1({label:Z.label,icon:Z.icon,isSelected:Z.isSelected,href:Z.href})})})}),X1=P(({cssClasses:Q,label:X,icon:Z,isSelected:$,href:W})=>{let J=M($).ternary("app-theme-color b","black");return z.Div({class:R`pointer noselect flex flex-column items-center justify-center pb2 ${J} ${Q}`,onclick:w(()=>Y0(W.value)),children:[L({size:22,iconName:Z}),z.Div({class:"f7",children:X})]})}),$1=P(({cssClasses:Q,header:X,content:Z,navbarTop:$,route:W})=>{return qX({cssClasses:Q,header:X,content:Z,bottombar:z.Div({children:[z.If({subject:$,isTruthy:$}),Q1({cssClasses:"nl3 nr3 ph4",links:v(H0,W)})]})})}),GX=P(({cssClasses:Q,body:X,onMount:Z})=>{return z.Html({lang:"en",children:[z.Head({children:[z.Title("Habits (by Cyfer)"),z.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),z.Meta({"http-equiv":"Content-Security-Policy",content:`
                default-src 'self';
                script-src 'self';
                style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
                font-src https://fonts.gstatic.com;
                object-src 'none';
                base-uri 'none';
              `}),z.Meta({charset:"UTF-8"}),z.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),z.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),z.Link({rel:"stylesheet",href:"/assets/styles.css"}),z.Link({rel:"manifest",href:"/manifest.json"})]}),z.Body({tabindex:"-1",class:Q,onmount:Z,children:[z.Script({src:"main.js",defer:"true"}),X]})]})}),I=P(({cssClasses:Q,contentCssClasses:X,title:Z,description:$,hideDescription:W,children:J})=>{let Y=M($).andNot(W).truthy;return z.Div({class:R`mt3 mb4 ${Q}`,children:[z.Div({class:"mb2 dark-gray f4 b",children:Z}),z.If({subject:Y,isTruthy:z.Div({class:"mb3 f6 silver fw5",children:R`${$}`})}),z.Div({class:X,children:J})]})}),K1=P(({cssClasses:Q,iconSize:X,selectedOptionIndex:Z,onChange:$})=>{let W=S(!1),J=U(()=>NQ[Z.value]),Y=()=>W.value=!0,G=()=>W.value=!1,_=(B)=>B===J.value.label?"bg-near-white black fw6":"gray fw5",F=(B)=>{$(B),G()};return z.Div({class:Q,children:[xQ({cssClasses:"pointer",descending:k(J).prop("decending"),iconName:k(J).prop("icon"),size:k(X).or(20),onClick:Y}),WQ({cssClasses:"f5 normal ba bw0 outline-0",isOpen:W,onTapOutside:G,content:z.Div({children:[z.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),z.Div({class:"f5 mb1",children:z.For({subject:NQ,map:(B,A)=>z.Div({class:R`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>_(B.label)}`,onclick:w(()=>F(A)),children:[xQ({cssClasses:"ml1 mr2",descending:B.decending,iconName:B.icon,size:20}),z.Span(B.label)]})})})]})})]})}),xQ=P(({cssClasses:Q,descending:X,iconName:Z,size:$,onClick:W})=>{let J=W?"pointer":"",Y=M(X).ternary("arrow_upward","arrow_downward"),G=M($).mul(4).div(5).result;return z.Span({class:R`flex items-center ${J} ${Q}`,onclick:w(W),children:[L({cssClasses:"silver",iconName:Y,size:G}),L({size:$,iconName:Z})]})}),P1=P(({cssClasses:Q,progress:X})=>{return z.Div({class:R`flex flex-column justify-center items-center vh-100 ${Q}`,children:[z.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),z.Div({class:"f3 b mv3",children:"Habits"}),d0({cssClasses:"w-40",progress:X}),z.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),LQ=P(({cssClasses:Q,label:X,isToggleOn:Z,onToggle:$})=>{return z.Div({class:R`flex items-center justify-between ${Q}`,children:[z.Div(X),s0({cssClasses:"ml3",isOn:Z,onToggle:$})]})}),p=S(d.editPage),{showHints:UX,showFullCustomisation:_X}=k(p).props,GQ=S(sQ),Z1=R`${()=>GQ.value.total?.toFixed(2)} KB used (${()=>GQ.value.spaceLeft?.toFixed(2)}% left)`,W1=()=>{zX({...p.value,showHints:!UX.value}),p.value=ZQ()},J1=()=>{zX({...p.value,showFullCustomisation:!_X.value}),p.value=ZQ()},Y1=()=>{GQ.value=p0(),p.value=ZQ()},z1=GX({cssClasses:"bg-white",onMount:Y1,body:$1({cssClasses:"ph3 bg-white",route:"/settings/",header:"Settings",content:z.Div({children:[I({cssClasses:"pb3",title:"Storage space",children:Z1}),I({cssClasses:"pb3",title:"Preferences",children:[JQ({cssClasses:"mv2"}),LQ({label:"Show hints on Edit page",isToggleOn:UX,onToggle:W1}),JQ({cssClasses:"mv2"}),LQ({label:"Always show more customisations on Edit page",isToggleOn:_X,onToggle:J1}),JQ({cssClasses:"mv2"})]}),I({cssClasses:"pb3",title:"Privacy Policy",description:`
            This app does not collect any data, nor does it store
            them remotely or send elsewhere for data persistence.
            It uses local storage of the browser for saving data. And it is safe
            for use by any age group person.`,children:qQ({cssClasses:"flex items-center",onClick:q0,children:["Read complete policy here",L({cssClasses:"ml1",size:12,iconName:"call_made"})]})}),I({contentCssClasses:"flex justify-between",title:"About",children:[z.Div([z.Div({class:"",children:"Habits (by Cyfer)"}),z.Div({class:"silver mt1",children:`version ${iX}`}),z.Div({class:"silver mt1 flex items-center",children:["Made with",L({cssClasses:"mh1 gray",size:21,iconName:"volunteer_activism"}),"from Bharat"]})]),z.Div({class:"pa05 h3 bg-green ba b--blue relative",children:[z.Div({class:"absolute top-0 left-0 right-0 bg-white",style:"height: 66.6%;"}),z.Div({class:"absolute top-0 left-0 right-0 bg-orange",style:"height: 33.3%;"})]})]})]})})}),q1=()=>{x.start("mount"),vQ.resetIdCounter(),z1(),x.start("run")};q1();

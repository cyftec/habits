var JQ=(Q)=>{let X=Object.entries(Q).sort(($,Z)=>$[0].localeCompare(Z[0]));return X.forEach(([$,Z],J)=>{if(Z&&typeof Z==="object"&&!Array.isArray(Z))X[J]=[$,JQ(Z)]}),Object.fromEntries(X)},BQ=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},s=(Q)=>{if(Array.isArray(Q)){let X=[...Q],$=[];return X.forEach((Z)=>{$.push(s(Z))}),$}if(BQ(Q)){let X={...Q},$={};return Object.keys(X).forEach((Z)=>{$[Z]=s(X[Z])}),Object.freeze($)}return Q},v=(Q)=>{if(Array.isArray(Q)){let $=[...Q],Z=[];return $.forEach((J)=>{Z.push(v(J))}),Z}if(BQ(Q)){let $={...Q},Z={};return Object.keys($).forEach((J)=>{Z[J]=v($[J])}),Z}return Q},AQ=(Q,X="index")=>Q.map(($,Z)=>({[X]:Z,value:$})),AX=(Q,X)=>{let $=JQ(Q),Z=JQ(X),J=Object.keys($),z=Object.keys(Z);if(J.length!==z.length)return!1;for(let Y of J)if(!z.includes(Y)||!GQ($[Y],Z[Y]))return!1;return!0},DX=(Q,X)=>{if(Q.length!==X.length)return!1;if(Q.length===0)return!0;for(let $=0;$<Q.length;$++)if(!GQ(Q[$],X[$]))return!1;return!0},GQ=(Q,X)=>{if(typeof Q!==typeof X)return!1;if(Array.isArray(Q))return DX(Q,X);if(Q===null||X===null)return Q===X;if(typeof Q==="object"&&!(Q instanceof Set))return AX(Q,X);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===X;return Q===X},TX=(Q,X,$)=>{let J=AQ(v(Q),"index");return AQ(v(X),"index").map((Y)=>{let U="add",G=-1,q=Y.value;return J.some((_,P)=>{if(U=GQ(_.value,Y.value)?_.index===Y.index?"idle":"shuffle":$&&_.value[$]!==void 0&&_.value[$]===Y.value[$]?"update":"add",U!=="add")return G=_.index,J.splice(P,1),!0;return!1}),{type:U,oldIndex:G,value:q}})},N=(Q)=>["source-signal","derived-signal"].includes(Q?.type),bQ=(Q,X)=>Q?.type==="non-signal"&&(!X||!X.length||X.some(($)=>typeof Q?.value===$)),_Q=(Q)=>N(Q)||bQ(Q),vQ=(Q)=>bQ(Q,["string"]),hQ=(Q)=>Q?.type==="non-signal"&&Array.isArray(Q?.value)&&(Q?.value).every((X)=>typeof X==="string"),h=(Q)=>_Q(Q)?Q.value:Q,d=null,E=(Q)=>{let X=s(Q),$=new Set;return{type:"source-signal",get value(){if(d)$.add(d);return v(X)},set value(Z){if(Z===X)return;X=s(Z),$.forEach((J)=>J&&J())}}},c=(Q)=>{d=Q,Q(),d=null},R=(Q)=>{let X,$=E(X);return c(()=>{X=Q(X),$.value=X}),{type:"derived-signal",get prevValue(){return X},get value(){return $.value}}},S=(Q)=>{if(!BQ(Q.value))throw new Error("Thee argument should be a plain object or a signal of plain object");return{prop:(X)=>R(()=>Q.value[X]),get props(){return Object.keys(Q.value).reduce(($,Z)=>{let J=Z;return $[J]=this.prop(J),$},{})}}},B=(Q,...X)=>R(()=>{return Q.reduce(($,Z,J)=>{let z,Y=X[J];if(typeof Y==="function")z=Y()??"";else if(_Q(Y))z=Y.value??"";else z=Y??"";return`${$}${Z}${z.toString()}`},"")}),cQ=["onmount","onunmount"],pQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],HX=[...pQ,...cQ],xX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],u,LX=(Q)=>{if(!u)u=document.createElement("textarea");return u.innerHTML=Q,u.value},NX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},mQ=NX(),D={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},n=(Q)=>Array.isArray(Q),i=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,g=(Q)=>typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,FQ=(Q)=>N(Q)&&g(Q.value),SX=(Q)=>g(Q)||FQ(Q),uQ=(Q)=>{return N(Q)&&(g(Q.value)||n(Q.value)&&Q.value.every((X)=>g(X)))},rQ=(Q)=>{return!N(Q)&&(vQ(Q)||hQ(Q)||g(Q)||n(Q)&&Q.every((X)=>SX(X)))},PQ=(Q)=>{return uQ(Q)||rQ(Q)},DQ=!1,CX={},I={},IX=globalThis.MutationObserver,yX=new IX((Q)=>{Q.forEach((X)=>{if(X.type==="childList")X.addedNodes.forEach(($)=>{if(i($)){let Z=$,J=Z.elementId;if(I[J])delete I[J];else CX[J]=Z.tagName}}),X.removedNodes.forEach(($)=>{if(i($)){let Z=$,J=Z.elementId,z=Z.unmountListener;if(z)I[J]={element:Z,unmountListener:z}}})}),Object.entries(I).forEach(([X,$])=>{let{element:Z,unmountListener:J}=$;oQ(Z,J)})}),oQ=(Q,X)=>{if(!i(Q))return;let $=Q.children;for(let Z=0;Z<$.length;Z++){let J=$[Z];oQ(J,J.unmountListener)}if(X&&X(Q),I[Q.elementId])delete I[Q.elementId]},gX=()=>{if(!DQ&&!D.currentIs("build"))yX.observe(document.body,{childList:!0,subtree:!0}),DQ=!0},sQ=(Q,X)=>HX.includes(Q)&&X===void 0,dQ=(Q,X)=>pQ.includes(Q)&&typeof X==="function",nQ=(Q,X)=>cQ.includes(Q)&&typeof X==="function",bX=(Q,X)=>sQ(Q,X)||dQ(Q,X)||nQ(Q,X),vX=(Q,X)=>{Object.entries(X).forEach(([$,Z])=>{if(sQ($,Z));else if(dQ($,Z)){let J=$.slice(2);Q.addEventListener(J,(z)=>{if(J==="keypress")z.preventDefault();Z(z)})}else if(nQ($,Z)){if($==="onmount"&&!D.currentIs("build")){let J=Z;setTimeout(()=>J(Q),0)}if($==="onunmount")gX(),Q.unmountListener=Z}else console.error(`Invalid event key: ${$} for element with tagName: ${Q.tagName}`)})},TQ=(Q,X,$)=>{let Z=(_Q($)?$.value:$)??"";if(typeof Z==="boolean")if(Z)Q.setAttribute(X,"");else Q.removeAttribute(X);else if(X==="value")Q.value=Z;else if(Z)Q.setAttribute(X,Z)},hX=(Q,X)=>{let $={};Object.entries(X).forEach((Z)=>{let[J,z]=Z;if(N(z))$[J]=z;TQ(Q,J,z)}),c(()=>{Object.entries($).forEach((Z)=>{let[J,z]=Z,Y=z.value;if(!D.currentIs("run"))return;TQ(Q,J,Y)})})},o=(Q)=>{if(FQ(Q)){let X=Q.value;return o(X)}if(typeof Q==="string")return document.createTextNode(LX(Q));if(g(Q)){let X=Q();if(!i(X))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return X}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},cX=(Q,X)=>{if(!X)return;if(uQ(X))c(()=>{let Z=X.value,J=n(Z)?Z:[Z];J.forEach((Y,U)=>{let G=Q.childNodes[U],q=o(Y);if(G&&q)Q.replaceChild(q,G);else if(q)Q.appendChild(q);else console.error(`No child found for node with tagName: ${Q.tagName}`)});let z=J.length;while(z<Q.childNodes.length){let Y=Q.childNodes[z];if(Y)Q.removeChild(Y)}});if(rQ(X)){let $=vQ(X)?[X.value]:hQ(X)?X.value:n(X)?X:[X],Z=[];if($.forEach((J,z)=>{if(FQ(J))Z.push({index:z,childSignal:J});let Y=o(J),U=Q.childNodes[z];if(U&&Y)Q.replaceChild(Y,U);else if(!U&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)}),Z.length)Z.forEach(({index:J,childSignal:z})=>{c(()=>{if(!z.value)return;if(!D.currentIs("run"))return;let Y=o(z.value),U=Q.childNodes[J];if(U&&Y)Q.replaceChild(Y,U);else if(!U&&Y)Q.appendChild(Y);else console.error(`No child found for node with tagName: ${Q.tagName}`)})})}},pX=(Q,X)=>{let $=void 0,Z={},J={};return Object.entries(Q).forEach(([z,Y])=>{if(z==="children")if(PQ(Y))$=Y;else throw new Error(`Invalid children prop for node with tagName: ${X}

 ${JSON.stringify(Y)}`);else if(bX(z,Y))Z[z]=Y;else J[z]=Y}),{children:$,eventProps:Z,attributeProps:J}},mX=(Q,X)=>{let $=()=>{let Z=mQ.getNewId(),J=D.currentIs("mount")?document.querySelector(`[data-elem-id="${Z}"]`):document.createElement(Q);J.elementId=Z,J.unmountListener=void 0;let z=PQ(X)?{children:X}:X;if(!D.currentIs("run"))z["data-elem-id"]=J.elementId.toString();let Y=pX(z,J.tagName);if(vX(J,Y.eventProps),hX(J,Y.attributeProps),cX(J,Y.children),!D.currentIs("build"))J.removeAttribute("data-elem-id");return J};return $.isElementGetter=!0,$},HQ=(Q,X,$)=>{let Z=E(X),J=E(Q),z=$(R(()=>J.value),R(()=>Z.value)),Y,U,G=!1;if(z?.isElementGetter)Y=()=>{if(G&&U)return U;return U=z(),G=!0,U},Y.isElementGetter=!0;else if(typeof z==="string")Y=z;else throw`One of the child, ${z} passed in ForElement is invalid.`;return{indexSignal:Z,itemSignal:J,mappedChild:Y}},xQ=(Q,X,$)=>{if(X!==void 0&&X>=0&&$){let Z=X>Q.length?Q.length:X;Q.splice(Z,0,$)}return Q},uX=({subject:Q,itemKey:X,map:$,n:Z,nthChild:J})=>{if(J&&Z===void 0||Z!==void 0&&Z>-1&&!J)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let z=R(()=>{let j=h(Q);return Array.isArray(j)?j:[]});if(!X)return R(()=>xQ(z.value.map($),Z,J));let Y=J;if(J&&typeof J!=="string"){let j=J(),K=()=>j;K.isElementGetter=!0,Y=K}let U=z.value;if(U.length&&typeof U[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let G=null,q=R((j)=>{return G=j||G,z.value}),_=R((j)=>{if(!j||!G)return q.value.map((k,A)=>HQ(k,A,$));return TX(G,q.value,X).map((V,k)=>{let A=(j||[])[V.oldIndex];if(console.assert(V.type==="add"&&V.oldIndex===-1&&!A||V.oldIndex>-1&&!!A,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),A){if(V.type==="shuffle")A.indexSignal.value=k;if(V.type==="update")A.indexSignal.value=k,A.itemSignal.value={...V.value};return A}return HQ(V.value,k,$)})});return R(()=>xQ(_.value.map((j)=>j.mappedChild),Z,Y))},rX=({subject:Q,isTruthy:X,isFalsy:$})=>{let Z=W.Span({style:"display: none;"}),J=()=>(h(Q)?X:$)||Z;return N(Q)?R(J):J()},oX=({subject:Q,caseMatcher:X,defaultCase:$,cases:Z})=>{let J=()=>{let z=h(Q),Y=void 0;for(let[U,G]of Object.entries(Z))if(X&&X(Q,U)||z===U){Y=G;break}return Y||$||W.Span({style:"display: none;"})};return N(Q)?R(J):J()},sX=xX.reduce((Q,X)=>{let $=X.split("").map((J,z)=>!z?J.toUpperCase():J).join(""),Z=(J)=>mX(X,J);return Q[$]=Z,Q},{}),dX={For:uX,If:rX,Switch:oX},W={...sX,...dX},O=(Q)=>(X)=>{for(let Z of Object.keys(X))if(X[Z]===void 0)delete X[Z];let $=Object.entries(X).reduce((Z,J)=>{let[z,Y]=J,U=typeof Y==="string",G=Array.isArray(Y)&&Y.every((_)=>typeof _==="string"),q=N(Y)||typeof Y==="function"?Y:U||G?{type:"non-signal",get value(){return h(Y)}}:PQ(Y)?Y:{type:"non-signal",get value(){return h(Y)}};return Z[z]=q,Z},{});return Q($)},iQ=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],nX=[1,1,1,1,1,1,1],iX=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],WQ=["Not started","Completed"],lX=[70,60,45],zQ={id:"analytics",lastInteraction:new Date().getTime()},l={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},LQ=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}],aX=60000,a=86400000,tX=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],eX=["January","February","March","April","May","June","July","August","September","October","November","December"],Q0=(Q)=>Q*aX,lQ=(Q,X)=>tX[Q].substring(0,X),X0=(Q,X)=>eX[Q].substring(0,X),jQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},H=(Q)=>jQ(Q).getTime(),p=(Q,X)=>H(Q)===H(X),$0=(Q,X)=>{let $=X||new Date;return H(Q)>H($)},KQ=(Q,X)=>{let $=H(Q),Z=H(X);return Math.round((Z-$)/a)},Z0=(Q)=>KQ(new Date,Q),wQ=(Q,X)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+X),J0=(Q,X)=>{if(X<1)throw"N should be some positive integer";let $=H(Q);return Array(X).fill(0).map((Z,J)=>new Date($-(X-1-J)*a))},W0=(Q)=>{let X=new Date;return Array(Q).fill(0).map(($,Z)=>new Date(X.getFullYear(),X.getMonth()-Z,1)).reverse()},z0=(Q,X)=>{let $=H(Q),Z=H(X);if($===Z)return[jQ(new Date($))];let J=$<Z?$:Z,Y=(($<Z?Z:$)-J)/a;return Array(Y+1).fill(0).map((U,G)=>new Date(J+G*a))},Y0=(Q)=>{if(Q<1)throw"";let X=new Date,$=X.getFullYear(),Z=X.getMonth(),J=new Date($,Z-(Q-1),1),z=new Date($,Z+1,0);return{startDate:J,endDate:z}},aQ={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},U0=(Q)=>location.href=Q,tQ=()=>location.href=aQ.HABITS.NEW.href,q0=(Q)=>location.href=`${aQ.HABITS.HABIT.href}?id=${Q}`,R0=1.6181,B0=(Q)=>iX.find((X)=>X.code===Q),eQ=(Q,X)=>{return Q<0?B0(-1):{isMaxLevel:Q===X.length-1,name:X[Q],code:Q}},G0=(Q)=>({level:eQ(-1,[]),date:Q}),_0=(Q,X,$)=>({level:eQ(Q,X),date:$}),OQ=(Q,X)=>Q.find(($)=>p($.date,X)),F0=(Q)=>v0().filter((X)=>{let $=!X.isStopped,Z=X.frequency[Q.getDay()],J=H(Q)>=H(new Date(X.id));return $&&Z&&J}),e=(Q)=>{let X=jQ(new Date(Q.id));return{...Q,startDate:X,levels:Q.levels.map(($,Z)=>({isMaxLevel:Z===Q.levels.length-1,name:$,code:Z})),tracker:Q.tracker.map(($,Z)=>_0($,Q.levels,wQ(X,Z))),milestones:j0(Q.milestones)}},P0=(Q)=>{return{...Q,levels:Q.levels.map((X)=>X.name),tracker:Q.tracker.map((X,$)=>X.level.code),milestones:K0(Q.milestones)}},QX=()=>{let X={id:new Date().getTime(),title:"",frequency:nX,colorIndex:0,levels:WQ,tracker:[],milestones:lX,pauses:[],isStopped:!1};return e(X)},j0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],K0=(Q)=>Q.filter((X)=>!!X.percent).map((X)=>X.percent),XX=(Q,X)=>{let $=Q[0];for(let Z=0;Z<Q.length;Z++)if($=Q[Z],$.percent<=X)break;return{label:$.label,icon:$.icon,color:$.color}},w0=(Q,X)=>{if(!Q.title)return"Title should not be empty";if(X&&h0(Q.title))return"A habit with same name already exists";if(Q.frequency.every((Z)=>!Z))return"Select at least one day in a week";if(!Q.levels.every((Z)=>!!Z.name))return"One of the levels is empty";if(Q.levels.some((Z,J)=>{for(let z=J+1;z<Q.levels.length;z++)if(Q.levels[z].name===Z.name)return!0;return!1}))return"Multiple levels have same name";if(!Q.milestones.every((Z)=>Z.percent<=100&&Z.percent>=0))return"The milestones should be between 0 and 100 percents";if(!Q.milestones.every((Z,J,z)=>J===0?!0:z[J-1].percent>Z.percent))return"Milestones should be in order (from high to low)";return""},$X=(Q,X,$)=>{let Z=ZX(Q.tracker,X,$),J=Q.levels.length-1,z=0,Y=0,U=0,G=0,q=0,_=0;return Z.forEach((P,j)=>{if(z+=P.level.code>-1?1:0,Y+=P.level.code>0?1:0,U+=P.level.code>0?P.level.code:0,j===Z.length-1)return;let V=P.level.code<1;_=V?_+1:0;let A=100*((P.level.code>0?P.level.code:0)/(Q.levels.length-1));G=Math.round(A)>50?G+1:0,q=V?0:q+1}),{title:Q.title,aceStreak:G,followStreak:q,missed:_,percent:Math.round(100*(U/(z*J))),totalDays:z,workingDays:Y}},O0=(Q,X,$)=>{let Z=!!Q.length;if(!Z)return{hideAddButton:!1,hideRemoveButton:X.length<3};let J=X[$],z=!!(Z&&Q.find((j)=>j.name===J.name)),Y=Q.length!==X.length,U=X.length<Q.length,G=X.length>Q.length,q=!Y&&Q.length&&Q.some((j,K)=>j.name!==X[K].name);return{hideAddButton:U||q||z&&U,hideRemoveButton:U||q||z&&G}},V0=(Q,X,$)=>{let Z=!!Q.length,J=X[$],z=!!(Z&&Q.find((U)=>U.name===J.name)),Y=Q.length!==X.length;return z&&Y},f0=(Q,X,$,Z=!1)=>{let J=iQ[$],z=Q/(X-1),U=Math.trunc(Math.pow(z,R0)*255).toString(16),G=U.length===1?`0${U}`:U,q=Q<0||G==="0"?"transparent":`${J}${G}`,_=Z?Q/(X-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:q,fontColor:_,peakBackgroundColor:J,levelPercent:Math.round(z*100)}},M0=(Q,X,$)=>{let Z=FX(Q.id),J=Z.tracker.map((Y)=>{if(p(Y.date,$))return{...Y,level:{...Y.level,code:X}};return Y}),z={...Z,tracker:J};EQ(z)},E0=(Q,X)=>{let $=[];for(let Z of X)if(!Q.some((z)=>{if(p(z.date,Z))return $.push(z),!0;return!1}))$.push(G0(Z));return $},ZX=(Q,X,$)=>{let Z=z0(X,$);return E0(Q,Z)},k0=(Q)=>{let $=KQ(new Date,Q);if($<-2)return`${-$} days back`;if($===-2)return"Day before yesterday";if($===-1)return"Yesterday";if($===0)return"Today";if($===1)return"Tomorrow";if($===2)return"Day after tomorrow";return`${$} days after`},A0=(Q)=>{let X=new Date,$=new Date(Q),Z=-Z0($);if(Z===0)return"Just created this habit today";if(Z===1)return"This habit started from yesterday";if(Z>1&&Z<5)return`Started following this ${Z} back`;let{aceStreak:J,followStreak:z,missed:Y}=$X(FX(Q),wQ(X,-Z),X);if(J>=12)return`Nailed ${J} days in a row. Woah! Don't stop.`;if(J>=4)return`Doing good for ${J} days straight! Keep it up.`;if(z>=15)return`Didn't miss for ${z} days in a row. Kudos!`;if(z>=4)return`${z} days in a row. Nice! keep going.`;if(Y)`Missed ${Y} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},D0=(Q,X,$)=>{if(!Q.length||Q.length===X.length)return $;let Z=[...$],J=[];return Q.forEach((z,Y)=>{let U=X.find((P)=>P.name===z.name),G=!U,q=(P)=>{let j=[];$.forEach((K,V)=>{if(K.level.code===z.code)j.push(V)}),J.push({indices:j,newLevel:P})};if(G){if(Y===Q.length-1)q(X[X.length-1]);return}if(U.code===z.code)return;q(U)}),J.forEach((z)=>{z.indices.forEach((Y)=>{Z[Y]={...Z[Y],level:z.newLevel}})}),Z},NQ=(Q)=>{let X=Q.length-1;for(let $=0;$<Q.length;$++)Q[$]={...Q[$],code:$,isMaxLevel:$===X};return Q},T0=()=>{let Q=new Date().getTime(),X=b0();return Q-X>Q0(1)},H0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},VQ=(Q,X,$)=>{let Z=JSON.parse(Q||"{}"),J=Z&&typeof Z==="object",z=Z[X];if(!J||!($?z===$:!!z))return;return Z},f=(Q)=>{return(...X)=>{return H0(),_X(new Date),Q&&Q(...X)}},JX="analytics",x0="id",L0="analytics",WX=(Q)=>{localStorage.setItem(JX,JSON.stringify(Q))},zX=()=>{if(!D.currentIs("run"))return zQ;let Q=()=>{let Z=localStorage.getItem(JX);return VQ(Z,x0,L0)};if(!Q())WX(zQ);let $=Q();if(!$)throw"Error fetching analytics";return $},YX=()=>{let Q=[];for(let X in localStorage){if(!localStorage.hasOwnProperty(X))continue;Q.push(X)}return Q},UX=(Q)=>Q.startsWith("h."),fQ=(Q)=>`h.${Q}`,qX=(Q)=>{if(!UX(Q))return;let X=localStorage.getItem(Q),$=VQ(X,"title");if(!$)return;return $},N0=()=>{for(let Q of YX())if(UX(Q))return!1;return!0},MQ=()=>{if(!D.currentIs("run"))return[];let Q=[];for(let X of YX()){let $=qX(X);if(!$)continue;Q.push($)}return Q},RX=(Q)=>{let X=fQ(Q.id);localStorage.setItem(X,JSON.stringify(Q))},S0=(Q)=>{let X=fQ(Q);localStorage.removeItem(X)},BX="settings",C0="id",I0="local-settings",GX=(Q)=>{localStorage.setItem(BX,JSON.stringify(Q))},y0=()=>{if(!D.currentIs("run"))return l;let Q=()=>{let Z=localStorage.getItem(BX);return VQ(Z,C0,I0)};if(!Q())GX(l);let $=Q();if(!$)throw"Error fetching settings";return g0($),Q()},g0=(Q)=>{if(!Q.editPage)GX({...Q,editPage:l.editPage})},b0=()=>{if(!D.currentIs("run"))return zQ.lastInteraction;return zX().lastInteraction},_X=(Q)=>{let X=zX();WX({...X,lastInteraction:Q.getTime()})},FX=(Q)=>{let X=fQ(Q),$=qX(X);if(!$)throw`Error fetching habit with id '${Q}' from storage`;return e($)},v0=()=>{return MQ().map((X)=>e(X))},h0=(Q)=>{let $=MQ().find((Z)=>Z.title.trim()===Q.trim());return $?e($):void 0},PX=()=>{let Q=MQ();for(let X of Q){let $=new Date(X.id),Z=new Date,J=KQ($,Z),z=[...X.tracker];if(J+2<=z.length)continue;let Y=z.length-1,U=new Date($.getFullYear(),$.getMonth(),$.getDate()+Y),G=U.getDay();if(p(Z,U)){let q=z[Y];z[Y]=X.frequency[G]?q<0?0:q:-1}for(let q=z.length;q<=J;q++){let P=new Date($.getFullYear(),$.getMonth(),$.getDate()+q).getDay();z[q]=X.frequency[P]?0:-1}X.tracker=z,RX(X)}},EQ=(Q)=>{let X=P0(Q);RX(X)},c0=(Q)=>{let X={...Q,isStopped:!0};EQ(X)},p0=(Q)=>S0(Q),m0=()=>{return y0().editPage},u0=O(({classNames:Q,hideRemove:X,hideAdd:$,onRemove:Z,onAdd:J})=>{return W.Span({class:B`br3 pb1 f4 bw1 b--light-silver dark-gray ${()=>X?.value&&$?.value?"bn":"ba"} ${Q}`,children:[W.If({subject:X,isFalsy:W.Span({class:B`pointer ph2 pb1 bw1 b--light-silver ${()=>$?.value?"":"br"}`,onclick:f(Z),children:"-"})}),W.If({subject:$,isFalsy:W.Span({class:"pointer ph2 pb1",onclick:f(J),children:"+"})})]})}),L=O(({className:Q,onTap:X,children:$})=>W.Button({class:B`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,onclick:f(()=>X()),children:$})),x=O(({className:Q,size:X,onClick:$,iconName:Z,title:J})=>W.Span({class:B`material-symbols-outlined ${()=>$?"pointer":""} ${Q}`,style:B`font-size: ${()=>X?.value||"16"}px`,onclick:f($),children:Z,title:J})),QQ=O(({classNames:Q,dotClassNames:X,colorIndex:$,level:Z,totalLevels:J,showText:z,textContent:Y,icon:U,iconSize:G,isRectangular:q,showHeight:_,onClick:P})=>{let j=R(()=>q?.value?"br0":"br-100"),K=R(()=>Z.value<0?"bg-transparent":"bg-light-gray"),{peakBackgroundColor:V,backgroundColor:k,fontColor:A,levelPercent:b}=S(R(()=>f0(Z.value,J.value,$.value,z?.value))).props,m=R(()=>Y?.value||"Î‡"),$Q=R(()=>_?.value&&U?.value&&b.value>99),ZQ=()=>{if(P&&Z.value>=0)P()};return W.Span({class:B`pointer relative overflow-hidden ${j} ${K} ${Q}`,onclick:f(ZQ),children:W.If({subject:_,isTruthy:W.Span({class:B`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${X}`,style:B`
            background-color: ${V};
            color: white;
            height: ${b}%;
          `,children:W.If({subject:$Q,isTruthy:x({iconName:U,size:G})})}),isFalsy:W.Span({class:B`flex items-center justify-around absolute absolute--fill ${X}`,style:B`
            background-color: ${k};
            color: ${A};
          `,children:W.If({subject:U,isTruthy:x({iconName:U,size:G}),isFalsy:W.Span(m)})})})})}),Y1=O(({classNames:Q})=>{return W.Div({class:B`bb b--light-gray ${Q}`})}),YQ=O(({classNames:Q,href:X,target:$,onClick:Z,children:J})=>{return W.A({class:B`noselect ${()=>!X&&!Z?"":"pointer underline"} ${Q}`,href:X,target:$,onclick:f(Z),children:J})}),XQ=O(({classNames:Q,isOpen:X,content:$,onTapOutside:Z})=>{return W.Dialog({onmount:(J)=>setTimeout(()=>c(()=>{if(X.value)J.showModal();else J.close()})),onclick:f(Z),class:B`pa0 br3 ${Q}`,children:[W.Div({onclick:(J)=>J.stopPropagation(),children:$})]})}),r0=O(({classNames:Q,placeholder:X,num:$,onchange:Z})=>{let J=(z)=>{let Y=z.target.value,U=Number.parseFloat(Number.parseFloat(Y||"0").toFixed(2));Z(U)};return W.Input({class:Q,type:"number",placeholder:X,value:B`${()=>$.value??""}`,onchange:J})}),jX=O(({classNames:Q,body:X,onMount:$})=>{return W.Html({lang:"en",children:[W.Head({children:[W.Title("Habits (by Cyfer)"),W.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),W.Meta({charset:"UTF-8"}),W.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),W.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),W.Link({rel:"stylesheet",href:"/assets/styles.css"}),W.Link({rel:"manifest",href:"/manifest.json"})]}),W.Body({tabindex:"-1",class:Q,onmount:$,children:[W.Script({src:"main.js",defer:"true"}),X]})]})}),o0=O(({progress:Q,classNames:X})=>{let $=B`width: ${()=>Q.value<0?0:Q.value>100?100:Q.value}%;`;return W.Div({class:B`br-pill bg-moon-gray ${X}`,children:W.Div({class:"br-pill bg-app-theme-color pa1",style:$})})}),KX=O(({classNames:Q,header:X,content:$,bottombar:Z})=>{return W.Div({class:"flex-ns justify-center-ns",children:W.Div({class:B`w6-ns ${Q}`,children:[W.If({subject:X,isTruthy:W.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:X})}),$,W.Div({class:"pv6 mt5"}),W.If({subject:Z,isTruthy:W.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:Z})})]})})}),U1=O(({classNames:Q,tabItemClassNames:X,selectedTabClassNames:$,tabs:Z,selectedTabIndex:J,onTabChange:z})=>{return W.Div({class:B`bg-white br3 ${Q}`,children:W.Div({class:"flex items-center justify-between pa1",children:W.For({subject:Z,map:(Y,U)=>W.Span({class:B`w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit ${()=>U===J.value?`b--light-silver b black ${$?.value}`:"pointer b--transparent b--hover-black silver pointer"} ${X}`,onclick:f(()=>z(U)),children:Y})})})})}),SQ=O(({classNames:Q,placeholder:X,disabled:$,text:Z,onmount:J,onchange:z,onkeydown:Y,onfocus:U,onblur:G})=>{let q,_=(K)=>{if(q=K,J)J(K)},P=(K)=>{let V=K.target.value;if(z)z(V)},j=(K)=>{let V=K.key.length===1?q.value+K.key:K.key==="Backspace"?q.value.slice(0,-1):q.value,k={key:K.key,text:V};if(Y)Y(k)};return W.Input({onmount:_,class:B`${Q}`,type:"text",placeholder:X,disabled:$,value:Z,onchange:P,onkeydown:j,onfocus:U,onblur:G})}),q1=O(({classNames:Q,isOn:X,onToggle:$})=>{return W.Div({class:B`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,onclick:f($),children:[W.Div({class:B`br-100 ba bw1 b--hover-black pa1 ${()=>X?.value?"b--transparent":"b--moon-gray bg-moon-gray"}`}),W.Div({class:"pa05"}),W.Div({class:B`br-100 ba bw1 b--hover-black pa1 ${()=>X?.value?"b--mid-gray bg-mid-gray":"b--transparent"}`})]})}),CQ=O(({classNames:Q,justifyClassNames:X,label:$})=>{return W.Div({class:B`w-100 flex ${()=>X?.value||"justify-end"} ${Q}`,children:L({className:"pa3 mb3 shadow-4 b flex items-center",children:[x({className:"nl1 mr1",size:22,iconName:"add"}),R(()=>$?.value||"Add habit")],onTap:tQ})})}),s0=O(({classNames:Q})=>{return L({className:B`pa3 flex items-center ${Q}`,children:[x({iconName:"arrow_back"}),W.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),R1=O(({classNames:Q,milestones:X,achievedMilestone:$,completionPercent:Z})=>{let J=S($).prop("color");return W.Div({class:B`center ${Q}`,children:[W.Div({class:"pb2 w-100 relative",children:W.For({subject:X,map:(z,Y)=>{return d0({colorCss:`bg-${z.color}`,percent:z.upperLimit,hideUpperLimit:Y===0})}})}),W.Div({class:B`nt3dot6 h1dot2 bw1 relative br b--${J}`,style:R(()=>`width: ${Z.value}%;`),children:W.Div({class:B`relative flex items-start nt1 justify-between f7 mid-gray`,children:[W.Div(R(()=>Z.value>53?"Average completion":Z.value>43?"Avg completion":Z.value>35?"Completion":"")),W.Div({class:B`absolute right-0 pr1 b f6 ${J}`,children:R(()=>`${Z.value}%`)})]})})]})}),d0=O(({colorCss:Q,hideUpperLimit:X,percent:$})=>{return W.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:R(()=>`width: ${$.value}%;`),children:[W.Div({class:B`absolute absolute-fill h0dot15 w-100 ${Q}`}),W.Div({class:"flex justify-end w-100 pt2 f7",children:W.Div({class:"nr3 pb2 light-silver b",children:R(()=>X?.value?"":`${$.value}%`)})})]})}),n0=O(({classNames:Q,habit:X,date:$,colorIndex:Z,totalLevels:J})=>{let z=R(()=>{let Y=$.value.getFullYear(),U=$.value.getMonth(),G=new Date(Y,U,1),q=new Date(Y,U+1,0);return ZX(X.value.tracker,G,q)});return W.Div({class:B`flex items-center ${Q}`,children:[W.Div({class:"f8 b w2 light-silver",children:R(()=>X0($.value.getMonth(),3))}),W.Div({class:"w-100 flex items-center justify-between",children:W.For({subject:z,map:(Y)=>QQ({classNames:"pa1",colorIndex:Z,level:Y.level.code,totalLevels:J})})})]})}),B1=O(({classNames:Q,habit:X,months:$,onClick:Z})=>{let J=R(()=>X.value),{milestones:z,title:Y,colorIndex:U,levels:G}=S(J).props,q=R(()=>{let{startDate:V,endDate:k}=Y0($.value);return $X(X.value,V,k).percent}),_=R(()=>XX(z.value,q.value)),{icon:P,color:j}=S(_).props,K=R(()=>W0($.value));return W.Div({class:B`pointer bg-white ${Q}`,onclick:f(Z),children:[W.Div({class:"flex items-center justify-between nt1 mb2",children:[W.Div({class:"f5 dark-gray b",children:Y}),W.Div({class:"f6 silver b flex items-center",children:[x({className:B`mr1 ${j}`,iconName:P}),B`${q}%`]})]}),W.Div({class:"mt2 mb1",children:W.For({subject:K,map:(V)=>n0({classNames:"mb1",habit:X,date:V,colorIndex:U,totalLevels:G.value.length})})})]})}),i0=O(({classNames:Q,editableHabit:X,editedHabit:$,hideDescriptions:Z,showFullCustomisations:J,onChange:z})=>{let Y=E(!1),U=R(()=>{let w=Y.value;return J?.value||w}),{title:G,frequency:q,levels:_,milestones:P,colorIndex:j}=S($).props,K=R(()=>q.value.every((w)=>!!w)),V="bg-mid-gray white",k="bg-near-white light-silver",A=(w)=>{z({...$.value,title:w})},b=(w)=>{z({...$.value,colorIndex:w})},m=(w)=>{if(w<-1||w>6)throw"Invalid day index";if(w===-1){z({...$.value,frequency:[1,1,1,1,1,1,1]});return}let F=K.value?q.value.map((M)=>0):q.value;F[w]=K.value?1:F[w]?0:1,z({...$.value,frequency:F})},$Q=(w,F)=>{let M=_.value;M[F]={...M[F],name:w},z({...$.value,levels:M})},ZQ=(w)=>{let F=_.value;F.splice(w,0,{isMaxLevel:!1,name:"",code:w}),z({...$.value,levels:NQ(F)})},OX=(w)=>{let F=_.value;if(F.length<3)return;F.splice(w,1),z({...$.value,levels:NQ(F)})},VX=(w,F)=>{if(F<0||F>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let M=[...$.value.milestones];M[F]={...M[F],percent:w},z({...$.value,milestones:M})};return W.Div({class:Q,children:[C({classNames:"pb1",title:"Weekdays",children:W.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:W.For({subject:Array(7).fill(0),n:0,nthChild:W.Span({class:B`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${()=>K.value?"bg-mid-gray white":"bg-near-white light-silver"}`,children:"Daily",onclick:f(()=>m(-1))}),map:(w,F)=>{let M=R(()=>q.value[F]&&!K.value?"bg-mid-gray white":"bg-near-white light-silver");return W.Span({class:B`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${M}`,children:lQ(F,1),onclick:f(()=>m(F))})}})})}),C({classNames:"pb2",title:"Title of the habit",children:SQ({classNames:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:G,onchange:A})}),W.If({subject:U,isTruthy:W.Div([C({classNames:"pb1",title:"Select a color tag",children:W.Div({class:"mb1 flex items-center",children:W.For({subject:iQ,map:(w,F)=>{let M=R(()=>F===j.value?"#999":"#f4f4f4");return W.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:B`border-color: ${M}`,onclick:f(()=>b(F)),children:W.Span({class:B`pa2 br-100`,style:`background-color: ${w}`})})}})})}),C({classNames:"pb3",title:"Status update levels",hideDescription:Z,description:`
                  When updating a habit status in a day, we generally have only two levels - "${WQ[0]}"
                  or "${WQ[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.
                `,children:W.For({subject:_,map:(w,F)=>{let M=X?.value?.levels||[],kQ=_.value,{hideAddButton:fX,hideRemoveButton:MX}=O0(M,kQ,F),EX=V0(M,kQ,F);return W.Div({children:[W.Div({class:"flex items-center justify-between",children:[W.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[QQ({classNames:"w1 h2 br3 br--left ml1px",dotClassNames:"br3 br--left",colorIndex:j,level:F,isRectangular:!0,totalLevels:_.value.length}),SQ({classNames:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${F}`,disabled:EX,text:w.name,onchange:(kX)=>$Q(kX,F)})]}),u0({hideAdd:fX,hideRemove:MX,onAdd:()=>ZQ(F+1),onRemove:()=>OX(F)})]}),W.If({subject:F<_.value.length-1,isTruthy:W.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),C({title:"Habit completion goal",hideDescription:Z,description:B`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>XX($.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.
                `,children:W.For({subject:P,n:0,nthChild:W.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[W.Span({class:"lh-copy",children:""}),W.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[W.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),W.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(w,F)=>W.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[W.Span({class:"lh-copy flex items-center",children:[x({className:`mr2 ${w.color}`,size:20,iconName:w.icon}),w.label]}),W.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[W.If({subject:F===3,isTruthy:W.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:r0({classNames:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:w.percent,onchange:(M)=>VX(M,F)})}),W.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),W.If({subject:J,isFalsy:L({className:"pv2 ph3 flex items-center",onTap:()=>Y.value=!Y.value,children:[x({className:"mr1",iconName:R(()=>Y.value?"remove":"add")}),B`Show ${()=>Y.value?"Less":"More"} Customisations`]})})]})}),G1=O(({editableHabit:Q,onMount:X})=>{let $=E(l.editPage),Z=E(!1),J=E(!1),z=E(""),Y=E(QX()),U=R(()=>Q?.value?`Edit '${Q.value.title}'`:"Add new habit"),G=()=>Z.value=!0,q=()=>Z.value=!1,_=()=>{q(),history.go(-2)},P=()=>{if(z.value=w0(Y.value,!Q?.value),z.value)return;let K=Y.value,V=[...Q?.value?.levels||[]],k=D0(V,K.levels,K.tracker);EQ({...Y.value,tracker:k}),history.back()};return jX({onMount:()=>{if(X)X(),Y.value=Q?.value;$.value=m0()},body:KX({classNames:"bg-white ph3",header:W.Div({class:B`${()=>U.value.length>22?"f2dot66":""}`,children:U}),content:W.Div([W.If({subject:Q,isTruthy:W.Div([C({classNames:"pb2",title:"Actions",children:[l0({isOpen:Z,habit:Y,onClose:q,onDone:_}),YQ({classNames:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:G}),XQ({classNames:"bn",isOpen:J,onTapOutside:()=>J.value=!1,content:W.Div({class:"pa3 f5",children:[W.Div({class:"mb3 b f4",children:B`Stop '${()=>Y.value.title}'?`}),W.Div({class:"mb4",children:[`
                          This action is not reversible. You will not be able to resume it again.`,W.Br({}),W.Br({}),`
                          Are you sure, you want to STOP this habit permanently?
                          `]}),W.Div({class:"flex items-center justify-between f6",children:[L({className:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:()=>J.value=!1}),L({className:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:()=>{c0(Y.value),J.value=!1,history.back()}})]})]})}),YQ({classNames:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:()=>J.value=!0})]})])}),i0({editableHabit:Q,editedHabit:Y,hideDescriptions:R(()=>!$.value.showHints),showFullCustomisations:S($).prop("showFullCustomisation"),onChange:(K)=>Y.value=K})]),bottombar:W.Div({class:"bg-white w-100 pv3",children:[W.If({subject:z,isTruthy:W.Div({class:"red mb3",children:z})}),W.Div({class:"flex items-center justify-stretch",children:[s0({classNames:"w4dot50 w4dot25-ns"}),L({className:"w-100 pa3 ml3 b",children:R(()=>Q?.value?"Update":"Add"),onTap:P})]})]})})})}),l0=O(({isOpen:Q,habit:X,onClose:$,onDone:Z})=>{return XQ({classNames:"bn w-30-ns",isOpen:Q,onTapOutside:$,content:W.Div({class:"pa3 f5",children:[W.Div({class:"mb3 b f4",children:B`Delete '${()=>X.value?.title}'?`}),W.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,W.Br({}),W.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),W.Div({class:"flex items-center justify-between f6",children:[L({className:"w-25 pv2 ph3 mr1 b",children:"No",onTap:$}),L({className:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:()=>{p0(X.value.id),Z()}})]})]})})}),a0=O(({isOpen:Q,habit:X,date:$,showTitleInHeader:Z,onClose:J,onChange:z})=>{let{levels:Y,tracker:U,colorIndex:G}=S(R(()=>X.value)).props;return XQ({classNames:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:J,content:W.Div({class:"mnw5",children:[W.Div({class:"f5 b tc pa3",children:B`Change status ${()=>Z?.value?`of  '${X.value.title}'`:`for ${$.value.toDateString()}`}`}),W.Div({class:"f5 mb1",children:W.For({subject:R(()=>Y.value.slice().reverse()||[]),map:(q,_)=>{let P=Y.value.length-1-_,j=B`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>OQ(U.value,$.value)?.level.code===P?"bg-near-white black fw6":"gray fw5"}`;return W.Div({class:j,onclick:f(()=>z(P)),children:[QQ({classNames:`pa1 mr3 ba b ${P<1?"b--light-silver":"b--transparent"}`,colorIndex:G,level:P,totalLevels:Y.value.length,isRectangular:!0}),W.Span(q.name)]})}})})]})})}),t0=O(({classNames:Q,links:X})=>{return W.Div({class:B`flex items-center justify-between pv3 bg-near-white ${Q}`,children:W.For({subject:X,map:($)=>e0({label:$.label,icon:$.icon,isSelected:$.isSelected,href:$.href})})})}),e0=O(({classNames:Q,label:X,icon:$,isSelected:Z,href:J})=>{return W.Div({class:B`pointer noselect flex flex-column items-center justify-center pb2 ${()=>Z.value?"app-theme-color b":"black"} ${Q}`,onclick:f(()=>U0(J.value)),children:[x({size:22,iconName:$}),W.Div({class:"f7",children:X})]})}),Q1=O(({classNames:Q,header:X,content:$,navbarTop:Z,route:J})=>{return KX({classNames:Q,header:X,content:$,bottombar:W.Div({children:[W.If({subject:Z,isTruthy:Z}),t0({classNames:"nl3 nr3 ph4",links:R(()=>[{label:"Today",icon:"calendar_month",isSelected:J.value==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:J.value==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:J.value==="/settings/",href:"/settings/"}])})]})})}),C=O(({classNames:Q,contentClassNames:X,title:$,description:Z,hideDescription:J,children:z})=>{return W.Div({class:B`mt3 mb4 ${Q}`,children:[W.Div({class:"mb2 dark-gray f4 b",children:$}),W.If({subject:R(()=>Z?.value&&!J?.value),isTruthy:W.Div({class:"mb3 f6 silver fw5",children:B`${Z}`})}),W.Div({class:X,children:z})]})}),_1=O(({classNames:Q,iconSize:X,selectedOptionIndex:$,onChange:Z})=>{let J=E(!1),z=R(()=>LQ[$.value]),Y=(U)=>{Z(U),J.value=!1};return W.Div({class:Q,children:[IQ({classNames:"pointer",descending:R(()=>z.value.decending),iconName:R(()=>z.value.icon),size:R(()=>X?.value??20),onClick:()=>J.value=!0}),XQ({classNames:"f5 normal ba bw0 outline-0",isOpen:J,onTapOutside:()=>J.value=!1,content:W.Div({children:[W.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),W.Div({class:"f5 mb1",children:W.For({subject:LQ,map:(U,G)=>{let q=B`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>U.label===z.value.label?"bg-near-white black fw6":"gray fw5"}`;return W.Div({class:q,onclick:f(()=>Y(G)),children:[IQ({classNames:"ml1 mr2",descending:U.decending,iconName:U.icon,size:20}),W.Span(U.label)]})}})})]})})]})}),IQ=O(({classNames:Q,descending:X,iconName:$,size:Z,onClick:J})=>{return W.Span({class:B`flex items-center ${()=>J?"pointer":""} ${Q}`,onclick:f(J),children:[x({className:"silver",size:R(()=>4*Z.value/5),iconName:R(()=>X.value?"arrow_upward":"arrow_downward")}),x({className:"",size:Z,iconName:$})]})}),wX=new Date,UQ=E(!1),t=E(0),qQ=E(!1),X1=J0(wQ(wX,2),7),T=E(wX),y=R(()=>F0(T.value)),$1=R(()=>{let Q=y.value.map(($)=>OQ($.tracker,T.value)),X={done:Q.reduce(($,Z)=>$+(Z.level.isMaxLevel?1:0),0),started:Q.reduce(($,Z)=>$+(Z.level.code>0&&!Z.level.isMaxLevel?1:0),0),notDone:Q.reduce(($,Z)=>$+(Z.level.code===0?1:0),0)};if(X.done===0&&X.started===0&&X.notDone===0)return"";if(X.done===0&&X.started===0&&X.notDone>0)return`Update below ${X.notDone} tsaks for the day.`;if(X.done>0&&X.started===0&&X.notDone===0)return"Great! All tasks updated.";return`
    ${X.done?`${X.done} done.`:""}
    ${X.started?` ${X.started} started.`:""}
    ${X.notDone?` ${X.notDone} yet to start.`:""}
  `}),r=E(!1),RQ=E(0),yQ=R(()=>y.value?.[RQ.value]||QX()),Z1=()=>{qQ.value=T0();let Q=setInterval(()=>{if(t.value+=1,t.value>=100)clearInterval(Q),qQ.value=!1,_X(new Date)},30)},gQ=()=>{PX(),T.value=new Date,UQ.value=N0()},J1=()=>{Z1(),PX(),gQ(),window.addEventListener("pageshow",gQ)},W1=jX({classNames:"bg-white",onMount:J1,body:W.Div({children:[a0({isOpen:r,showTitleInHeader:!0,habit:yQ,date:T,onClose:()=>{r.value=!1,RQ.value=0},onChange:function(Q){M0(yQ.value,Q,T.value),r.value=!1,T.value=new Date(T.value.getTime()+1)}}),W.If({subject:R(()=>qQ.value&&t.value<100),isTruthy:W.Div({class:"flex flex-column justify-center items-center vh-100",children:[W.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),W.Div({class:"f3 b mv3",children:"Habits"}),o0({classNames:"w-40",progress:t}),W.Div({class:"mt7 pv4",children:"A Cyfer Product"})]}),isFalsy:Q1({classNames:"ph3 bg-white",route:"/",header:"Tasks in a day",content:W.Div(W.If({subject:UQ,isTruthy:W.Div({class:"flex flex-column items-center justify-around",children:[W.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),W.Div("Looks like, you just landed here!"),CQ({classNames:"pt5",justifyClassNames:"justify-around",label:"Add your first habit"})]}),isFalsy:W.Div({children:[W.Div({onmount:(Q)=>Q.scrollLeft=Q.scrollWidth,class:"sticky top-3 bg-white pb2 flex items-center justify-between z-999 w-100",children:W.For({subject:X1,map:(Q)=>{let X=$0(Q),$=p(T.value,Q);return W.Div({class:`bw1 ba br-pill ph2 pv3 pb2 tc ${$?"black b b--silver":X?"light-gray b--transparent":"light-silver pointer b--transparent"}`,onclick:f(()=>!($||X)&&(T.value=Q)),children:[W.Div({class:"f7 ",children:lQ(Q.getDay(),3)}),W.Div({class:"mt2 f4",children:("0"+Q.getDate()).slice(-2)})]})}})}),W.Div({class:"mt2 mb2 f4 b",children:R(()=>k0(T.value))}),W.Div({class:"mb4 pb2 silver",children:$1}),W.Div({class:"mt4",children:W.For({subject:y,n:1/0,nthChild:YQ({classNames:"flex pl5 pr3 nl3 mt4",onClick:tQ,children:R(()=>y.value.length===0?"No habit for the day! Add one.":y.value.length<5?`Only ${y.value.length} habits a day! Add more.`:"")}),map:(Q,X)=>{let $=OQ(Q.tracker,T.value);return W.Div({class:"mt4 flex items-center",children:[QQ({classNames:`pa3 mr3 ba b ${$.level.code<1?"b--light-silver":"b--transparent"}`,colorIndex:Q.colorIndex,level:$.level.code,totalLevels:Q.levels.length,icon:"check",iconSize:22,showText:$.level.code>0,showHeight:!0,onClick:()=>{r.value=!0,RQ.value=X}}),W.Div({class:"pointer",onclick:f(()=>q0(Q.id)),children:[W.Div({class:"f5 fw6 f4-ns fw4-ns",children:Q.title}),W.Div({class:"f6 light-silver pt05",children:R(()=>A0(Q.id))})]})]})}})}),W.Div({class:"pv6"})]})})),navbarTop:W.Div(W.If({subject:UQ,isFalsy:CQ({})}))})})]})}),z1=()=>{D.start("mount"),mQ.resetIdCounter(),W1(),D.start("run")};z1();

var BQ=(Q)=>{let X=Object.entries(Q).sort((Z,$)=>Z[0].localeCompare($[0]));return X.forEach(([Z,$],J)=>{if($&&typeof $==="object"&&!Array.isArray($))X[J]=[Z,BQ($)]}),Object.fromEntries(X)},WQ=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},t=(Q)=>{if(Array.isArray(Q)){let X=[...Q],Z=[];return X.forEach(($)=>{Z.push(t($))}),Z}if(WQ(Q)){let X={...Q},Z={};return Object.keys(X).forEach(($)=>{Z[$]=t(X[$])}),Object.freeze(Z)}return Q},p=(Q)=>{if(Array.isArray(Q)){let Z=[...Q],$=[];return Z.forEach((J)=>{$.push(p(J))}),$}if(WQ(Q)){let Z={...Q},$={};return Object.keys(Z).forEach((J)=>{$[J]=p(Z[J])}),$}return Q},SQ=(Q,X="index")=>Q.map((Z,$)=>({[X]:$,value:Z})),yX=(Q,X)=>{let Z=BQ(Q),$=BQ(X),J=Object.keys(Z),W=Object.keys($);if(J.length!==W.length)return!1;for(let z of J)if(!W.includes(z)||!jQ(Z[z],$[z]))return!1;return!0},CX=(Q,X)=>{if(Q.length!==X.length)return!1;if(Q.length===0)return!0;for(let Z=0;Z<Q.length;Z++)if(!jQ(Q[Z],X[Z]))return!1;return!0},jQ=(Q,X)=>{if(typeof Q!==typeof X)return!1;if(Array.isArray(Q))return CX(Q,X);if(Q===null||X===null)return Q===X;if(typeof Q==="object"&&!(Q instanceof Set))return yX(Q,X);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===X;return Q===X},bX=(Q,X,Z)=>{let J=SQ(p(Q),"index");return SQ(p(X),"index").map((z)=>{let U="add",G=-1,_=z.value;return J.some((F,j)=>{if(U=jQ(F.value,z.value)?F.index===z.index?"idle":"shuffle":Z&&F.value[Z]!==void 0&&F.value[Z]===z.value[Z]?"update":"add",U!=="add")return G=F.index,J.splice(j,1),!0;return!1}),{type:U,oldIndex:G,value:_}})},e=null,x=(Q)=>{let X=t(Q),Z=new Set;return{type:"source-signal",get value(){if(e)Z.add(e);return p(X)},set value($){if($===X)return;X=t($),Z.forEach((J)=>J&&J())}}},d=(Q)=>{e=Q,Q(),e=null},B=(Q)=>{let X,Z=x(X);return d(()=>{X=Q(X),Z.value=X}),{type:"derived-signal",get prevValue(){return X},get value(){return Z.value}}},q=(Q)=>OQ(Q)?Q.value:Q,b=(Q)=>["source-signal","derived-signal"].includes(Q?.type),pQ=(Q,X)=>Q?.type==="non-signal"&&(!X||!X.length||X.some((Z)=>typeof Q?.value===Z)),OQ=(Q)=>b(Q)||pQ(Q),uQ=(Q)=>pQ(Q,["string"]),rQ=(Q)=>Q?.type==="non-signal"&&Array.isArray(Q?.value)&&(Q?.value).every((X)=>typeof X==="string"),I=(Q,...X)=>{return B(()=>{let Z=X.map(($)=>q($));return Q(...Z)})},A=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...{get truthy(){return B(()=>!!X())},get falsy(){return B(()=>!X())},get truthyFalsyPair(){return B(()=>{let $=!!X();return[$,!$]})},ternary:($,J)=>B(()=>{return X()?q($):q(J)})},or:($)=>A(()=>{return!!(X()||q($))}),orNot:($)=>A(()=>{return!!(X()||!q($))}),and:($)=>A(()=>{return!!(X()&&q($))}),andNot:($)=>A(()=>{return!!(X()&&!q($))}),equals:($)=>A(()=>{return X()===q($)}),notEquals:($)=>A(()=>{return X()!==q($)}),orBothEqual:($,J)=>A(()=>{let W=X(),z=q($)===q(J);return!!(W||z)}),orBothUnequal:($,J)=>A(()=>{let W=X(),z=q($)!==q(J);return!!(W||z)}),andBothEqual:($,J)=>A(()=>{let W=X(),z=q($)===q(J);return!!(W&&z)}),andBothUnequal:($,J)=>A(()=>{let W=X(),z=q($)!==q(J);return!!(W&&z)}),orThisIsLT:($,J)=>A(()=>{let W=X(),z=q($)<q(J);return!!(W||z)}),orThisIsLTE:($,J)=>A(()=>{let W=X(),z=q($)<=q(J);return!!(W||z)}),orThisIsGT:($,J)=>A(()=>{let W=X(),z=q($)>q(J);return!!(W||z)}),orThisIsGTE:($,J)=>A(()=>{let W=X(),z=q($)>=q(J);return!!(W||z)}),andThisIsLT:($,J)=>A(()=>{let W=X(),z=q($)<q(J);return!!(W&&z)}),andThisIsLTE:($,J)=>A(()=>{let W=X(),z=q($)<=q(J);return!!(W&&z)}),andThisIsGT:($,J)=>A(()=>{let W=X(),z=q($)>q(J);return!!(W&&z)}),andThisIsGTE:($,J)=>A(()=>{let W=X(),z=q($)>=q(J);return!!(W&&z)})}},v=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...A(Q),get result(){return B(X)},add:(Z)=>v(()=>{return X()+q(Z)}),sub:(Z)=>v(()=>{return X()-q(Z)}),mul:(Z)=>v(()=>{return X()*q(Z)}),div:(Z)=>v(()=>{return X()/q(Z)}),mod:(Z)=>v(()=>{return X()%q(Z)}),pow:(Z)=>v(()=>{return X()**q(Z)}),isBetween:(Z,$,J=!0,W=!0)=>A(()=>{let z=X(),U=q(Z),G=q($),_=J?z>=U:z>U,F=W?z<=G:z<G;return _&&F}),isLT:(Z)=>A(()=>X()<q(Z)),isLTE:(Z)=>A(()=>X()<=q(Z)),isGT:(Z)=>A(()=>X()>q(Z)),isGTE:(Z)=>A(()=>X()>=q(Z))}},hX=(Q)=>{let X=typeof Q==="function"?Q:()=>q(Q);return{...A(Q),lengthBetween:(Z,$,J=!0,W=!0)=>A(()=>{let U=X().length,G=q(Z),_=q($),F=J?U>=G:U>G,j=W?U<=_:U<_;return F&&j}),lengthEquals:(Z)=>A(()=>{return X().length===q(Z)}),lengthNotEquals:(Z)=>A(()=>{return X().length!==q(Z)}),lengthLT:(Z)=>A(()=>{return X().length<q(Z)}),lengthLTE:(Z)=>A(()=>{return X().length<=q(Z)}),lengthGT:(Z)=>A(()=>{return X().length>q(Z)}),lengthGTE:(Z)=>A(()=>{return X().length>=q(Z)})}},w=(Q)=>{let Z=(typeof Q==="function"?Q:()=>q(Q))();return typeof Z==="number"?v(Q):typeof Z==="string"||Array.isArray(Z)?hX(Q):A(Q)},AQ=(...Q)=>Q.map((X)=>q(X)),o=(Q)=>{return{get string(){return B(()=>{let X=q(Q);return X===void 0||X===null?void 0:X.toString()})},or:(X)=>B(()=>q(Q)||q(X))}},vX=(Q)=>{let Z=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce(($,J)=>{let W=(...z)=>{return B(()=>{let U=AQ(...z);return q(Q)[J](...U)})};return $[J]=W,$},{});return{...o(Q),...Z,concat:($)=>B(()=>q(Q).concat(q($))),every:($)=>B(()=>q(Q).every($)),filter:($)=>B(()=>q(Q).filter($)),find:($)=>B(()=>q(Q).find($)),findIndex:($)=>B(()=>q(Q).findIndex($)),findLast:($)=>B(()=>q(Q).findLast($)),findLastIndex:($)=>B(()=>q(Q).findLastIndex($)),get lastItem(){return B(()=>{return p(q(Q)).pop()})},get length(){return B(()=>q(Q).length)},map:($)=>B(()=>q(Q).map($)),partition:($)=>{let J=B(()=>q(Q).filter($)),W=B(()=>q(Q).filter((z,U,G)=>!$(z,U,G)));return[J,W]},reduce:($,J)=>B(()=>q(Q).reduce($,J)),reduceRight:($,J)=>B(()=>q(Q).reduceRight($,J)),get reversed(){return B(()=>q(Q).toReversed())},some:($)=>B(()=>q(Q).every($)),toSorted:($)=>B(()=>q(Q).toSorted($)),toSpliced:($,J,...W)=>B(()=>q(Q).toSpliced(q($),q(J),...W))}},cX=(Q)=>{let Z=["toExponential","toFixed","toPrecision"].reduce(($,J)=>{let W=(...z)=>{return B(()=>{let U=AQ(...z);return q(Q)[J](...U)})};return $[J]=W,$},{});return{...o(Q),...Z,toConfined:($,J)=>B(()=>q(Q)<q($)?q($):q(Q)>q(J)?q(J):q(Q)),toLocaleString:($,J)=>B(()=>q(Q).toLocaleString(q($),J))}},mX=(Q)=>{if(!WQ(q(Q)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...o(Q),prop:(X)=>B(()=>q(Q)[X]),get props(){return Object.keys(q(Q)).reduce((Z,$)=>{let J=$;return Z[J]=this.prop(J),Z},{})},get keys(){return B(()=>Object.keys(q(Q)))}}},dQ=(Q)=>{let Z=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce(($,J)=>{let W=(...z)=>{return B(()=>{let U=AQ(...z);return q(Q)[J](...U)})};return $[J]=W,$},{});return{...o(Q),...Z,get length(){return B(()=>q(Q).length)},get lowercase(){return B(()=>q(Q).toLowerCase())},get Sentencecase(){return B(()=>{let $=q(Q);return $.charAt(0).toUpperCase()+$.slice(1).toLowerCase()})},get TitleCase(){return B(()=>q(Q).toLowerCase().replace(/\b\w/g,($)=>$.toUpperCase()))},get UPPERCASE(){return B(()=>q(Q).toUpperCase())},localeCompare:($,J,W)=>B(()=>q(Q).localeCompare(q($),q(J),W)),normalize:($)=>B(()=>q(Q).normalize(q($))),replace:($,J)=>B(()=>q(Q).replace(q($),q(J))),replaceAll:($,J)=>B(()=>q(Q).replaceAll(q($),q(J))),search:($)=>B(()=>q(Q).search($)),split:($,J)=>B(()=>{let W=$ instanceof RegExp?$:q($);return q(Q).split(W,q(J))}),toLocaleLowerCase:($)=>B(()=>q(Q).toLocaleLowerCase(q($))),toLocaleUpperCase:($)=>B(()=>q(Q).toLocaleUpperCase(q($)))}},pX=x("dksjfbksjnd"),y1=dQ(pX).split(""),k=(Q)=>{return typeof q(Q)==="number"?cX(Q):typeof q(Q)==="string"?dQ(Q):Array.isArray(q(Q))?vX(Q):WQ(q(Q))?mX(Q):o(Q)},R=(Q,...X)=>B(()=>{return Q.reduce((Z,$,J)=>{let W,z=X[J];if(typeof z==="function")W=z()??"";else if(OQ(z))W=z.value??"";else W=z??"";return`${Z}${$}${W.toString()}`},"")}),oQ=["onmount","onunmount"],sQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],uX=[...sQ,...oQ],rX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],l,dX=(Q)=>{if(!l)l=document.createElement("textarea");return l.innerHTML=Q,l.value},oX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},nQ=oX(),L={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},QQ=(Q)=>Array.isArray(Q),XQ=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,u=(Q)=>typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,fQ=(Q)=>b(Q)&&u(Q.value),sX=(Q)=>u(Q)||fQ(Q),iQ=(Q)=>{return b(Q)&&(u(Q.value)||QQ(Q.value)&&Q.value.every((X)=>u(X)))},lQ=(Q)=>{return!b(Q)&&(uQ(Q)||rQ(Q)||u(Q)||QQ(Q)&&Q.every((X)=>sX(X)))},EQ=(Q)=>{return iQ(Q)||lQ(Q)},IQ=!1,nX={},m={},iX=globalThis.MutationObserver,lX=new iX((Q)=>{Q.forEach((X)=>{if(X.type==="childList")X.addedNodes.forEach((Z)=>{if(XQ(Z)){let $=Z,J=$.elementId;if(m[J])delete m[J];else nX[J]=$.tagName}}),X.removedNodes.forEach((Z)=>{if(XQ(Z)){let $=Z,J=$.elementId,W=$.unmountListener;if(W)m[J]={element:$,unmountListener:W}}})}),Object.entries(m).forEach(([X,Z])=>{let{element:$,unmountListener:J}=Z;aQ($,J)})}),aQ=(Q,X)=>{if(!XQ(Q))return;let Z=Q.children;for(let $=0;$<Z.length;$++){let J=Z[$];aQ(J,J.unmountListener)}if(X&&X(Q),m[Q.elementId])delete m[Q.elementId]},aX=()=>{if(!IQ&&!L.currentIs("build"))lX.observe(document.body,{childList:!0,subtree:!0}),IQ=!0},tQ=(Q,X)=>uX.includes(Q)&&X===void 0,eQ=(Q,X)=>sQ.includes(Q)&&typeof X==="function",QX=(Q,X)=>oQ.includes(Q)&&typeof X==="function",tX=(Q,X)=>tQ(Q,X)||eQ(Q,X)||QX(Q,X),eX=(Q,X)=>{Object.entries(X).forEach(([Z,$])=>{if(tQ(Z,$));else if(eQ(Z,$)){let J=Z.slice(2);Q.addEventListener(J,(W)=>{if(J==="keypress")W.preventDefault();$(W)})}else if(QX(Z,$)){if(Z==="onmount"&&!L.currentIs("build")){let J=$;setTimeout(()=>J(Q),0)}if(Z==="onunmount")aX(),Q.unmountListener=$}else console.error(`Invalid event key: ${Z} for element with tagName: ${Q.tagName}`)})},gQ=(Q,X,Z)=>{let $=(OQ(Z)?Z.value:Z)??"";if(typeof $==="boolean")if($)Q.setAttribute(X,"");else Q.removeAttribute(X);else if(X==="value")Q.value=$;else Q.setAttribute(X,$)},Q0=(Q,X)=>{let Z={};Object.entries(X).forEach(($)=>{let[J,W]=$;if(b(W))Z[J]=W;gQ(Q,J,W)}),d(()=>{Object.entries(Z).forEach(($)=>{let[J,W]=$,z=W.value;if(!L.currentIs("run"))return;gQ(Q,J,z)})})},a=(Q)=>{if(fQ(Q)){let X=Q.value;return a(X)}if(typeof Q==="string")return document.createTextNode(dX(Q));if(u(Q)){let X=Q();if(!XQ(X))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return X}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},X0=(Q,X)=>{if(!X)return;if(iQ(X))d(()=>{let $=X.value,J=QQ($)?$:[$];J.forEach((z,U)=>{let G=Q.childNodes[U],_=a(z);if(G&&_)Q.replaceChild(_,G);else if(_)Q.appendChild(_);else console.error(`No child found for node with tagName: ${Q.tagName}`)});let W=J.length;while(W<Q.childNodes.length){let z=Q.childNodes[W];if(z)Q.removeChild(z)}});if(lQ(X)){let Z=uQ(X)?[X.value]:rQ(X)?X.value:QQ(X)?X:[X],$=[];if(Z.forEach((J,W)=>{if(fQ(J))$.push({index:W,childSignal:J});let z=a(J),U=Q.childNodes[W];if(U&&z)Q.replaceChild(z,U);else if(!U&&z)Q.appendChild(z);else console.error(`No child found for node with tagName: ${Q.tagName}`)}),$.length)$.forEach(({index:J,childSignal:W})=>{d(()=>{if(!W.value)return;if(!L.currentIs("run"))return;let z=a(W.value),U=Q.childNodes[J];if(U&&z)Q.replaceChild(z,U);else if(!U&&z)Q.appendChild(z);else console.error(`No child found for node with tagName: ${Q.tagName}`)})})}},$0=(Q,X)=>{let Z=void 0,$={},J={};return Object.entries(Q).forEach(([W,z])=>{if(W==="children")if(EQ(z))Z=z;else if(z===void 0)Z=z;else throw new Error(`Invalid children prop for node with tagName: ${X}

 ${JSON.stringify(z)}`);else if(tX(W,z))$[W]=z;else J[W]=z}),{children:Z,eventProps:$,attributeProps:J}},Z0=(Q,X)=>{let Z=()=>{let $=nQ.getNewId(),J=L.currentIs("mount")?document.querySelector(`[data-elem-id="${$}"]`):document.createElement(Q);J.elementId=$,J.unmountListener=void 0;let W=EQ(X)?{children:X}:X;if(!L.currentIs("run"))W["data-elem-id"]=J.elementId.toString();let z=$0(W,J.tagName);if(eX(J,z.eventProps),Q0(J,z.attributeProps),X0(J,z.children),!L.currentIs("build"))J.removeAttribute("data-elem-id");return J};return Z.isElementGetter=!0,Z},yQ=(Q,X,Z)=>{let $=x(X),J=x(Q),W=Z(B(()=>J.value),B(()=>$.value)),z,U,G=!1;if(W?.isElementGetter)z=()=>{if(G&&U)return U;return U=W(),G=!0,U},z.isElementGetter=!0;else if(typeof W==="string")z=W;else throw`One of the child, ${W} passed in ForElement is invalid.`;return{indexSignal:$,itemSignal:J,mappedChild:z}},CQ=(Q,X,Z)=>{if(X!==void 0&&X>=0&&Z){let $=X>Q.length?Q.length:X;Q.splice($,0,Z)}return Q},J0=({subject:Q,itemKey:X,map:Z,n:$,nthChild:J})=>{if(J&&$===void 0||$!==void 0&&$>-1&&!J)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let W=B(()=>{let O=q(Q);return Array.isArray(O)?O:[]});if(!X)return B(()=>CQ(W.value.map(Z),$,J));let z=J;if(J&&typeof J!=="string"){let O=J(),P=()=>O;P.isElementGetter=!0,z=P}let U=W.value;if(U.length&&typeof U[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let G=null,_=B((O)=>{return G=O||G,W.value}),F=B((O)=>{if(!O||!G)return _.value.map((T,D)=>yQ(T,D,Z));return bX(G,_.value,X).map((M,T)=>{let D=(O||[])[M.oldIndex];if(console.assert(M.type==="add"&&M.oldIndex===-1&&!D||M.oldIndex>-1&&!!D,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),D){if(M.type==="shuffle")D.indexSignal.value=T;if(M.type==="update")D.indexSignal.value=T,D.itemSignal.value={...M.value};return D}return yQ(M.value,T,Z)})});return B(()=>CQ(F.value.map((O)=>O.mappedChild),$,z))},W0=({subject:Q,isTruthy:X,isFalsy:Z})=>{let $=Y.Span({style:"display: none;"}),J=()=>(q(Q)?X:Z)||$;return b(Q)?B(J):J()},z0=({subject:Q,caseMatcher:X,defaultCase:Z,cases:$})=>{let J=()=>{let W=q(Q),z=void 0;for(let[U,G]of Object.entries($))if(X&&X(Q,U)||W===U){z=G;break}return z||Z||Y.Span({style:"display: none;"})};return b(Q)?B(J):J()},Y0=rX.reduce((Q,X)=>{let Z=X.split("").map((J,W)=>!W?J.toUpperCase():J).join(""),$=(J)=>Z0(X,J);return Q[Z]=$,Q},{}),q0={For:J0,If:W0,Switch:z0},Y={...Y0,...q0},f=(Q)=>(X)=>{for(let $ of Object.keys(X))if(X[$]===void 0)delete X[$];let Z=Object.entries(X).reduce(($,J)=>{let[W,z]=J,U=typeof z==="string",G=Array.isArray(z)&&z.every((F)=>typeof F==="string"),_=b(z)||typeof z==="function"?z:U||G?{type:"non-signal",get value(){return q(z)}}:EQ(z)?z:{type:"non-signal",get value(){return q(z)}};return $[W]=_,$},{});return Q(Z)},XX=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],U0=[1,1,1,1,1,1,1],G0=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],_Q=["Not started","Completed"],B0=[70,60,45],RQ={id:"analytics",lastInteraction:new Date().getTime()},$Q={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},bQ=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}],_0=60000,ZQ=86400000,R0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],F0=["January","February","March","April","May","June","July","August","September","October","November","December"],K0=(Q)=>Q*_0,$X=(Q,X)=>R0[Q].substring(0,X),P0=(Q,X)=>F0[Q].substring(0,X),MQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},g=(Q)=>MQ(Q).getTime(),s=(Q,X)=>g(Q)===g(X),j0=(Q,X)=>{let Z=X||new Date;return g(Q)>g(Z)},wQ=(Q,X)=>{let Z=g(Q),$=g(X);return Math.round(($-Z)/ZQ)},O0=(Q)=>wQ(new Date,Q),kQ=(Q,X)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+X),A0=(Q,X)=>{if(X<1)throw"N should be some positive integer";let Z=g(Q);return Array(X).fill(0).map(($,J)=>new Date(Z-(X-1-J)*ZQ))},f0=(Q)=>{let X=new Date;return Array(Q).fill(0).map((Z,$)=>new Date(X.getFullYear(),X.getMonth()-$,1)).reverse()},E0=(Q,X)=>{let Z=g(Q),$=g(X);if(Z===$)return[MQ(new Date(Z))];let J=Z<$?Z:$,z=((Z<$?$:Z)-J)/ZQ;return Array(z+1).fill(0).map((U,G)=>new Date(J+G*ZQ))},M0=(Q)=>{if(Q<1)throw"";let X=new Date,Z=X.getFullYear(),$=X.getMonth(),J=new Date(Z,$-(Q-1),1),W=new Date(Z,$+1,0);return{startDate:J,endDate:W}},ZX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},w0=(Q)=>location.href=Q,JX=()=>location.href=ZX.HABITS.NEW.href,k0=(Q)=>location.href=`${ZX.HABITS.HABIT.href}?id=${Q}`,D0=1.6181,N0=(Q)=>G0.find((X)=>X.code===Q),WX=(Q,X)=>{return Q<0?N0(-1):{isMaxLevel:Q===X.length-1,name:X[Q],code:Q}},T0=(Q)=>({level:WX(-1,[]),date:Q}),H0=(Q,X,Z)=>({level:WX(Q,X),date:Z}),DQ=(Q,X)=>Q.find((Z)=>s(Z.date,X)),x0=(Q)=>$1().filter((X)=>{let Z=!X.isStopped,$=X.frequency[Q.getDay()],J=g(Q)>=g(new Date(X.id));return Z&&$&&J}),zQ=(Q)=>{let X=MQ(new Date(Q.id));return{...Q,startDate:X,levels:Q.levels.map((Z,$)=>({isMaxLevel:$===Q.levels.length-1,name:Z,code:$})),tracker:Q.tracker.map((Z,$)=>H0(Z,Q.levels,kQ(X,$))),milestones:V0(Q.milestones)}},L0=(Q)=>{return{...Q,levels:Q.levels.map((X)=>X.name),tracker:Q.tracker.map((X,Z)=>X.level.code),milestones:S0(Q.milestones)}},zX=()=>{let X={id:new Date().getTime(),title:"",frequency:U0,colorIndex:0,levels:_Q,tracker:[],milestones:B0,pauses:[],isStopped:!1};return zQ(X)},V0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],S0=(Q)=>Q.filter((X)=>!!X.percent).map((X)=>X.percent),YX=(Q,X)=>{let Z=Q[0];for(let $=0;$<Q.length;$++)if(Z=Q[$],Z.percent<=X)break;return{label:Z.label,icon:Z.icon,color:Z.color}},I0=(Q,X)=>{if(!Q.title)return"Title should not be empty";if(X&&Z1(Q.title))return"A habit with same name already exists";if(Q.frequency.every(($)=>!$))return"Select at least one day in a week";if(!Q.levels.every(($)=>!!$.name))return"One of the levels is empty";if(Q.levels.some(($,J)=>{for(let W=J+1;W<Q.levels.length;W++)if(Q.levels[W].name===$.name)return!0;return!1}))return"Multiple levels have same name";if(!Q.milestones.every(($)=>$.percent<=100&&$.percent>=0))return"The milestones should be between 0 and 100 percents";if(!Q.milestones.every(($,J,W)=>J===0?!0:W[J-1].percent>$.percent))return"Milestones should be in order (from high to low)";return""},qX=(Q,X,Z)=>{let $=UX(Q.tracker,X,Z),J=Q.levels.length-1,W=0,z=0,U=0,G=0,_=0,F=0;return $.forEach((j,O)=>{if(W+=j.level.code>-1?1:0,z+=j.level.code>0?1:0,U+=j.level.code>0?j.level.code:0,O===$.length-1)return;let M=j.level.code<1;F=M?F+1:0;let D=100*((j.level.code>0?j.level.code:0)/(Q.levels.length-1));G=Math.round(D)>50?G+1:0,_=M?0:_+1}),{title:Q.title,aceStreak:G,followStreak:_,missed:F,percent:Math.round(100*(U/(W*J))),totalDays:W,workingDays:z}},g0=(Q,X,Z)=>{let $=!!Q.length;if(!$)return{hideAddButton:!1,hideRemoveButton:X.length<3};let J=X[Z],W=!!($&&Q.find((O)=>O.name===J.name)),z=Q.length!==X.length,U=X.length<Q.length,G=X.length>Q.length,_=!z&&Q.length&&Q.some((O,P)=>O.name!==X[P].name);return{hideAddButton:U||_||W&&U,hideRemoveButton:U||_||W&&G}},y0=(Q,X,Z)=>{let $=!!Q.length,J=X[Z],W=!!($&&Q.find((U)=>U.name===J.name)),z=Q.length!==X.length;return W&&z},C0=(Q,X,Z,$=!1)=>{let J=XX[Z],W=Q/(X-1),U=Math.trunc(Math.pow(W,D0)*255).toString(16),G=U.length===1?`0${U}`:U,_=Q<0||G==="0"?"transparent":`${J}${G}`,F=$?Q/(X-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:_,fontColor:F,peakBackgroundColor:J,levelPercent:Math.round(W*100)}},b0=(Q,X,Z)=>{let $=fX(Q.id),J=$.tracker.map((z)=>{if(s(z.date,Z))return{...z,level:{...z.level,code:X}};return z}),W={...$,tracker:J};xQ(W)},h0=(Q,X)=>{let Z=[];for(let $ of X)if(!Q.some((W)=>{if(s(W.date,$))return Z.push(W),!0;return!1}))Z.push(T0($));return Z},UX=(Q,X,Z)=>{let $=E0(X,Z);return h0(Q,$)},v0=(Q)=>{let Z=wQ(new Date,Q);if(Z<-2)return`${-Z} days back`;if(Z===-2)return"Day before yesterday";if(Z===-1)return"Yesterday";if(Z===0)return"Today";if(Z===1)return"Tomorrow";if(Z===2)return"Day after tomorrow";return`${Z} days after`},c0=(Q)=>{let X=new Date,Z=new Date(Q),$=-O0(Z);if($===0)return"Just created this habit today";if($===1)return"This habit started from yesterday";if($>1&&$<5)return`Started following this ${$} back`;let{aceStreak:J,followStreak:W,missed:z}=qX(fX(Q),kQ(X,-$),X);if(J>=12)return`Nailed ${J} days in a row. Woah! Don't stop.`;if(J>=4)return`Doing good for ${J} days straight! Keep it up.`;if(W>=15)return`Didn't miss for ${W} days in a row. Kudos!`;if(W>=4)return`${W} days in a row. Nice! keep going.`;if(z)`Missed ${z} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},m0=(Q,X,Z)=>{if(!Q.length||Q.length===X.length)return Z;let $=[...Z],J=[];return Q.forEach((W,z)=>{let U=X.find((j)=>j.name===W.name),G=!U,_=(j)=>{let O=[];Z.forEach((P,M)=>{if(P.level.code===W.code)O.push(M)}),J.push({indices:O,newLevel:j})};if(G){if(z===Q.length-1)_(X[X.length-1]);return}if(U.code===W.code)return;_(U)}),J.forEach((W)=>{W.indices.forEach((z)=>{$[z]={...$[z],level:W.newLevel}})}),$},hQ=(Q)=>{let X=Q.length-1;for(let Z=0;Z<Q.length;Z++)Q[Z]={...Q[Z],code:Z,isMaxLevel:Z===X};return Q},p0=()=>{let Q=new Date().getTime(),X=X1();return Q-X>K0(1)},u0=(Q,X)=>{let Z=Q.map(($)=>DQ($.tracker,X));return{done:Z.reduce(($,J)=>$+(J.level.isMaxLevel?1:0),0),started:Z.reduce(($,J)=>$+(J.level.code>0&&!J.level.isMaxLevel?1:0),0),notDone:Z.reduce(($,J)=>$+(J.level.code===0?1:0),0),total:Q.reduce(($,J)=>$+J.levels.length-1,0)}},r0=(Q,X)=>{let Z=u0(Q,X);if(Z.done===0&&Z.started===0&&Z.notDone===0)return"";if(Z.done===0&&Z.started===0&&Z.notDone>0)return`Update below ${Z.notDone} tsaks for the day.`;if(Z.done>0&&Z.started===0&&Z.notDone===0)return"Great! All tasks updated.";return`
    ${Z.done?`${Z.done} done.`:""}
    ${Z.started?` ${Z.started} started.`:""}
    ${Z.notDone?` ${Z.notDone} yet to start.`:""}
  `},d0=(Q)=>[{label:"Today",icon:"calendar_month",isSelected:Q==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Q==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Q==="/settings/",href:"/settings/"}],o0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},NQ=(Q,X,Z)=>{let $=JSON.parse(Q||"{}"),J=$&&typeof $==="object",W=$[X];if(!J||!(Z?W===Z:!!W))return;return $},N=(Q)=>{return(...X)=>{return o0(),AX(new Date),Q&&Q(...X)}},GX="analytics",s0="id",n0="analytics",BX=(Q)=>{localStorage.setItem(GX,JSON.stringify(Q))},_X=()=>{if(!L.currentIs("run"))return RQ;let Q=()=>{let $=localStorage.getItem(GX);return NQ($,s0,n0)};if(!Q())BX(RQ);let Z=Q();if(!Z)throw"Error fetching analytics";return Z},RX=()=>{let Q=[];for(let X in localStorage){if(!localStorage.hasOwnProperty(X))continue;Q.push(X)}return Q},FX=(Q)=>Q.startsWith("h."),TQ=(Q)=>`h.${Q}`,KX=(Q)=>{if(!FX(Q))return;let X=localStorage.getItem(Q),Z=NQ(X,"title");if(!Z)return;return Z},i0=()=>{for(let Q of RX())if(FX(Q))return!1;return!0},HQ=()=>{if(!L.currentIs("run"))return[];let Q=[];for(let X of RX()){let Z=KX(X);if(!Z)continue;Q.push(Z)}return Q},PX=(Q)=>{let X=TQ(Q.id);localStorage.setItem(X,JSON.stringify(Q))},l0=(Q)=>{let X=TQ(Q);localStorage.removeItem(X)},jX="settings",a0="id",t0="local-settings",OX=(Q)=>{localStorage.setItem(jX,JSON.stringify(Q))},e0=()=>{if(!L.currentIs("run"))return $Q;let Q=()=>{let $=localStorage.getItem(jX);return NQ($,a0,t0)};if(!Q())OX($Q);let Z=Q();if(!Z)throw"Error fetching settings";return Q1(Z),Q()},Q1=(Q)=>{if(!Q.editPage)OX({...Q,editPage:$Q.editPage})},X1=()=>{if(!L.currentIs("run"))return RQ.lastInteraction;return _X().lastInteraction},AX=(Q)=>{let X=_X();BX({...X,lastInteraction:Q.getTime()})},fX=(Q)=>{let X=TQ(Q),Z=KX(X);if(!Z)throw`Error fetching habit with id '${Q}' from storage`;return zQ(Z)},$1=()=>{return HQ().map((X)=>zQ(X))},Z1=(Q)=>{let Z=HQ().find(($)=>$.title.trim()===Q.trim());return Z?zQ(Z):void 0},EX=()=>{let Q=HQ();for(let X of Q){let Z=new Date(X.id),$=new Date,J=wQ(Z,$),W=[...X.tracker];if(J+2<=W.length)continue;let z=W.length-1,U=new Date(Z.getFullYear(),Z.getMonth(),Z.getDate()+z),G=U.getDay();if(s($,U)){let _=W[z];W[z]=X.frequency[G]?_<0?0:_:-1}for(let _=W.length;_<=J;_++){let j=new Date(Z.getFullYear(),Z.getMonth(),Z.getDate()+_).getDay();W[_]=X.frequency[j]?0:-1}X.tracker=W,PX(X)}},xQ=(Q)=>{let X=L0(Q);PX(X)},J1=(Q)=>{let X={...Q,isStopped:!0};xQ(X)},W1=(Q)=>l0(Q),z1=()=>{return e0().editPage},Y1=f(({cssClasses:Q,hideRemove:X,hideAdd:Z,onRemove:$,onAdd:J})=>{let W=w(X).and(Z).ternary("bn","ba"),z=w(Z).ternary("","br");return Y.Span({class:R`br3 pb1 f4 bw1 b--light-silver dark-gray ${W} ${Q}`,children:[Y.If({subject:X,isFalsy:Y.Span({class:R`pointer ph2 pb1 bw1 b--light-silver ${z}`,onclick:N($),children:"-"})}),Y.If({subject:Z,isFalsy:Y.Span({class:"pointer ph2 pb1",onclick:N(J),children:"+"})})]})}),C=f(({cssClasses:Q,onTap:X,children:Z})=>Y.Button({class:R`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,onclick:N(()=>X()),children:Z})),C1=f(({cssClasses:Q})=>{return Y.Div({class:R`bb b--light-gray ${Q}`})}),y=f(({cssClasses:Q,size:X,onClick:Z,iconName:$,title:J})=>{let W=Z?"pointer":"",z=k(X).or(16);return Y.Span({class:R`material-symbols-outlined ${W} ${Q}`,style:R`font-size: ${z}px`,onclick:N(Z),children:$,title:J})}),FQ=f(({cssClasses:Q,href:X,target:Z,onClick:$,children:J})=>{let W=w(X).or($).ternary("pointer underline","");return Y.A({...X?{href:X}:{},class:R`noselect ${W} ${Q}`,target:Z,onclick:N($),children:J})}),YQ=f(({cssClasses:Q,isOpen:X,content:Z,onTapOutside:$})=>{let J=(W)=>{setTimeout(()=>d(()=>{if(X.value)W.showModal();else W.close()}))};return Y.Dialog({onmount:J,onclick:N($),class:R`pa0 br3 ${Q}`,children:[Y.Div({onclick:(W)=>W.stopPropagation(),children:Z})]})}),q1=f(({cssClasses:Q,placeholder:X,num:Z,onchange:$})=>{let J=(W)=>{let z=W.target.value,U=Number.parseFloat(Number.parseFloat(z||"0").toFixed(2));$(U)};return Y.Input({class:Q,type:"number",placeholder:X,value:k(Z).string,onchange:J})}),U1=f(({progress:Q,cssClasses:X})=>{return Y.Div({class:R`br-pill bg-moon-gray ${X}`,children:Y.Div({class:"br-pill bg-app-theme-color pa1",style:R`width: ${k(Q).toConfined(0,100)}%;`})})}),MX=f(({cssClasses:Q,header:X,content:Z,bottombar:$})=>{return Y.Div({class:"flex-ns justify-center-ns",children:Y.Div({class:R`w6-ns ${Q}`,children:[Y.If({subject:X,isTruthy:Y.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:X})}),Z,Y.Div({class:"pv6 mt5"}),Y.If({subject:$,isTruthy:Y.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:$})})]})})}),b1=f(({cssClasses:Q,tabItemCssClasses:X,selectedTabCssClasses:Z,tabs:$,selectedTabIndex:J,onTabChange:W})=>{let z=(U)=>U===J.value?`b--light-silver b black ${Z?.value}`:"pointer b--transparent b--hover-black silver pointer";return Y.Div({class:R`bg-white br3 ${Q}`,children:Y.Div({class:"flex items-center justify-between pa1",children:Y.For({subject:$,map:(U,G)=>Y.Span({class:R`
                w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${z(G)} ${X}`,onclick:N(()=>W(G)),children:U})})})})}),vQ=f(({cssClasses:Q,placeholder:X,disabled:Z,text:$,onmount:J,onchange:W,onkeydown:z,onfocus:U,onblur:G})=>{let _,F=(P)=>{if(_=P,J)J(P)},j=(P)=>{let M=P.target.value;if(W)W(M)},O=(P)=>{let M=P.key.length===1?_.value+P.key:P.key==="Backspace"?_.value.slice(0,-1):_.value,T={key:P.key,text:M};if(z)z(T)};return Y.Input({onmount:F,class:R`${Q}`,type:"text",placeholder:X,disabled:w(Z).truthy,value:$,onchange:j,onkeydown:O,onfocus:U,onblur:G})}),h1=f(({cssClasses:Q,isOn:X,onToggle:Z})=>{let $=w(X).ternary("b--transparent","b--moon-gray bg-moon-gray"),J=w(X).ternary("b--mid-gray bg-mid-gray","b--transparent");return Y.Div({class:R`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,onclick:N(Z),children:[Y.Div({class:R`br-100 ba bw1 b--hover-black pa1 ${$}`}),Y.Div({class:"pa05"}),Y.Div({class:R`br-100 ba bw1 b--hover-black pa1 ${J}`})]})}),wX=f(({cssClasses:Q,justifyCssClasses:X,label:Z})=>{let $=k(X).or("justify-end"),J=k(Z).or("Add habit");return Y.Div({class:R`w-100 flex ${$} ${Q}`,children:C({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[y({cssClasses:"nl1 mr1",size:22,iconName:"add"}),J],onTap:JX})})}),qQ=f(({cssClasses:Q,dotCssClasses:X,colorIndex:Z,level:$,totalLevels:J,showText:W,textContent:z,icon:U,iconSize:G,isRectangular:_,showHeight:F,onClick:j})=>{let O=w(_).ternary("br0","br-100"),P=w($).isLT(0).ternary("bg-transparent","bg-light-gray"),{peakBackgroundColor:M,backgroundColor:T,fontColor:D,levelPercent:h}=k(I(C0,$,J,Z,W)).props,n=k(z).or("Î‡"),V=w(F).and(U).andThisIsGT(h,99).truthy,r=()=>{if(j&&$.value>=0)j()};return Y.Span({class:R`pointer relative overflow-hidden ${O} ${P} ${Q}`,onclick:N(r),children:Y.If({subject:F,isTruthy:Y.Span({class:R`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${X}`,style:R`
            background-color: ${M};
            color: white;
            height: ${h}%;`,children:Y.If({subject:V,isTruthy:y({iconName:U,size:G})})}),isFalsy:Y.Span({class:R`flex items-center justify-around absolute absolute--fill ${X}`,style:R`
            background-color: ${T};
            color: ${D};`,children:Y.If({subject:U,isTruthy:y({iconName:U,size:G}),isFalsy:Y.Span(n)})})})})}),G1=f(({cssClasses:Q})=>{return C({cssClasses:R`pa3 flex items-center ${Q}`,children:[y({iconName:"arrow_back"}),Y.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),v1=f(({cssClasses:Q,milestones:X,achievedMilestone:Z,completionPercent:$})=>{let J=k(Z).prop("color"),W=I((z)=>z>53?"Average completion":z>43?"Avg completion":z>35?"Completion":"",$);return Y.Div({class:R`center ${Q}`,children:[Y.Div({class:"pb2 w-100 relative",children:Y.For({subject:X,map:(z,U)=>{return B1({colorCss:`bg-${z.color}`,percent:z.upperLimit,hideUpperLimit:U===0})}})}),Y.Div({class:R`nt3dot6 h1dot2 bw1 relative br b--${J}`,style:R`width: ${$}%;`,children:Y.Div({class:R`relative flex items-start nt1 justify-between f7 mid-gray`,children:[Y.Div(W),Y.Div({class:R`absolute right-0 pr1 b f6 ${J}`,children:R`${$}%`})]})})]})}),B1=f(({colorCss:Q,hideUpperLimit:X,percent:Z})=>{let $=w(X).ternary("",R`${Z}%`),J=R`width: ${Z}%;`;return Y.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:J,children:[Y.Div({class:R`absolute absolute-fill h0dot15 w-100 ${Q}`}),Y.Div({class:"flex justify-end w-100 pt2 f7",children:Y.Div({class:"nr3 pb2 light-silver b",children:$})})]})}),_1=f(({cssClasses:Q,habit:X,date:Z,colorIndex:$,totalLevels:J})=>{let W=B(()=>{let z=Z.value.getFullYear(),U=Z.value.getMonth(),G=new Date(z,U,1),_=new Date(z,U+1,0);return UX(X.value.tracker,G,_)});return Y.Div({class:R`flex items-center ${Q}`,children:[Y.Div({class:"f8 b w2 light-silver",children:B(()=>P0(Z.value.getMonth(),3))}),Y.Div({class:"w-100 flex items-center justify-between",children:Y.For({subject:W,map:(z)=>qQ({cssClasses:"pa1",colorIndex:$,level:z.level.code,totalLevels:J})})})]})}),c1=f(({cssClasses:Q,habit:X,months:Z,onClick:$})=>{let{milestones:J,title:W,colorIndex:z,levels:U}=k(X).props,G=I((P,M)=>{let{startDate:T,endDate:D}=M0(P);return qX(M,T,D).percent},Z,X),_=I(YX,J,G),{icon:F,color:j}=k(_).props,O=I(f0,Z);return Y.Div({class:R`pointer bg-white ${Q}`,onclick:N($),children:[Y.Div({class:"flex items-center justify-between nt1 mb2",children:[Y.Div({class:"f5 dark-gray b",children:W}),Y.Div({class:"f6 silver b flex items-center",children:[y({cssClasses:R`mr1 ${j}`,iconName:F}),R`${G}%`]})]}),Y.Div({class:"mt2 mb1",children:Y.For({subject:O,map:(P)=>_1({cssClasses:"mb1",habit:X,date:P,colorIndex:z,totalLevels:U.value.length})})})]})}),R1=f(({cssClasses:Q,editableHabit:X,editedHabit:Z,hideDescriptions:$,showFullCustomisations:J,onChange:W})=>{let z=x(!1),U=k(J).or(z),{title:G,frequency:_,levels:F,milestones:j,colorIndex:O}=k(Z).props,P=k(_).every((E)=>!!E),M="bg-mid-gray white",T="bg-near-white light-silver",D=w(P).ternary("bg-mid-gray white","bg-near-white light-silver"),h=w(z).ternary("remove","add"),n=R`Show ${w(z).ternary("Less","More")} Customisations`,V=(E)=>{W({...Z.value,title:E})},r=(E)=>{W({...Z.value,colorIndex:E})},i=(E)=>{if(E<-1||E>6)throw"Invalid day index";if(E===-1){W({...Z.value,frequency:[1,1,1,1,1,1,1]});return}let K=P.value?_.value.map((H)=>0):_.value;K[E]=P.value?1:K[E]?0:1,W({...Z.value,frequency:K})},TX=(E,K)=>{let H=F.value;H[K]={...H[K],name:E},W({...Z.value,levels:H})},HX=(E)=>{let K=F.value;K.splice(E,0,{isMaxLevel:!1,name:"",code:E}),W({...Z.value,levels:hQ(K)})},xX=(E)=>{let K=F.value;if(K.length<3)return;K.splice(E,1),W({...Z.value,levels:hQ(K)})},LX=(E,K)=>{if(K<0||K>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let H=[...Z.value.milestones];H[K]={...H[K],percent:E},W({...Z.value,milestones:H})};return Y.Div({class:Q,children:[c({cssClasses:"pb1",title:"Weekdays",children:Y.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:Y.For({subject:Array(7).fill(0),n:0,nthChild:Y.Span({class:R`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${D}`,children:"Daily",onclick:N(()=>i(-1))}),map:(E,K)=>{let H=B(()=>_.value[K]&&!P.value?"bg-mid-gray white":"bg-near-white light-silver");return Y.Span({class:R`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${H}`,children:$X(K,1),onclick:N(()=>i(K))})}})})}),c({cssClasses:"pb2",title:"Title of the habit",children:vQ({cssClasses:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:G,onchange:V})}),Y.If({subject:U,isTruthy:Y.Div([c({cssClasses:"pb1",title:"Select a color tag",children:Y.Div({class:"mb1 flex items-center",children:Y.For({subject:XX,map:(E,K)=>{let H=w(O).equals(K).ternary("#999","#f4f4f4");return Y.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:R`border-color: ${H}`,onclick:N(()=>r(K)),children:Y.Span({class:R`pa2 br-100`,style:`background-color: ${E}`})})}})})}),c({cssClasses:"pb3",title:"Status update levels",hideDescription:$,description:`
                  When updating a habit status in a day, we generally have only two levels - "${_Q[0]}"
                  or "${_Q[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.`,children:Y.For({subject:F,map:(E,K)=>{let H=X?.value?.levels||[],VQ=F.value,{hideAddButton:VX,hideRemoveButton:SX}=g0(H,VQ,K),IX=y0(H,VQ,K);return Y.Div({children:[Y.Div({class:"flex items-center justify-between",children:[Y.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[qQ({cssClasses:"w1 h2 br3 br--left ml1px",dotCssClasses:"br3 br--left",colorIndex:O,level:K,isRectangular:!0,totalLevels:F.value.length}),vQ({cssClasses:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${K}`,disabled:IX,text:E.name,onchange:(gX)=>TX(gX,K)})]}),Y1({hideAdd:VX,hideRemove:SX,onAdd:()=>HX(K+1),onRemove:()=>xX(K)})]}),Y.If({subject:w(F).lengthGT(K+1).truthy,isTruthy:Y.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),c({title:"Habit completion goal",hideDescription:$,description:R`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>YX(Z.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.`,children:Y.For({subject:j,n:0,nthChild:Y.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[Y.Span({class:"lh-copy",children:""}),Y.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[Y.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),Y.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(E,K)=>Y.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[Y.Span({class:"lh-copy flex items-center",children:[y({cssClasses:`mr2 ${E.color}`,size:20,iconName:E.icon}),E.label]}),Y.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[Y.If({subject:K===3,isTruthy:Y.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:q1({cssClasses:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:E.percent,onchange:(H)=>LX(H,K)})}),Y.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),Y.If({subject:J,isFalsy:C({cssClasses:"pv2 ph3 flex items-center",onTap:()=>z.value=!z.value,children:[y({cssClasses:"mr1",iconName:h}),n]})})]})}),m1=f(({editableHabit:Q,onMount:X})=>{let Z=x($Q.editPage),$=x(!1),J=x(!1),W=x(""),z=x(zX()),U=I((V)=>V?`Edit '${V.title}'`:"Add new habit",Q),G=w(U).lengthGT(22).ternary("f2dot66",""),_=w(Q).ternary("Update","Add"),F=()=>$.value=!0,j=()=>$.value=!1,O=()=>{j(),history.go(-2)},P=()=>J.value=!0,M=()=>J.value=!1,T=()=>{J1(z.value),M(),history.back()},D=(V)=>z.value=V,h=()=>{if(W.value=I0(z.value,!Q?.value),W.value)return;let V=z.value,r=[...Q?.value?.levels||[]],i=m0(r,V.levels,V.tracker);xQ({...z.value,tracker:i}),history.back()};return kX({onMount:()=>{if(X)X(),z.value=Q?.value;Z.value=z1()},body:MX({cssClasses:"bg-white ph3",header:Y.Div({class:G,children:U}),content:Y.Div([Y.If({subject:Q,isTruthy:Y.Div([c({cssClasses:"pb2",title:"Actions",children:[K1({isOpen:$,habit:z,onClose:j,onDone:O}),FQ({cssClasses:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:F}),j1({isOpen:J,habit:z,onClose:M,onDone:T}),FQ({cssClasses:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:P})]})])}),R1({editableHabit:Q,editedHabit:z,hideDescriptions:B(()=>!Z.value.showHints),showFullCustomisations:k(Z).prop("showFullCustomisation"),onChange:D})]),bottombar:Y.Div({class:"bg-white w-100 pv3",children:[Y.If({subject:W,isTruthy:Y.Div({class:"red mb3",children:W})}),Y.Div({class:"flex items-center justify-stretch",children:[G1({cssClasses:"w4dot50 w4dot25-ns"}),C({cssClasses:"w-100 pa3 ml3 b",children:_,onTap:h})]})]})})})}),F1=f(({cssClasses:Q})=>{return Y.Div({class:R`flex flex-column items-center justify-around ${Q}`,children:[Y.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),Y.Div("Looks like, you just landed here!"),wX({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),K1=f(({isOpen:Q,habit:X,onClose:Z,onDone:$})=>{let J=()=>{W1(X.value.id),$()};return YQ({cssClasses:"bn w-30-ns",isOpen:Q,onTapOutside:Z,content:Y.Div({class:"pa3 f5",children:[Y.Div({class:"mb3 b f4",children:R`Delete '${()=>X.value.title}'?`}),Y.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,Y.Br({}),Y.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),Y.Div({class:"flex items-center justify-between f6",children:[C({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Z}),C({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:J})]})]})})}),P1=f(({isOpen:Q,habit:X,date:Z,showTitleInHeader:$,onClose:J,onChange:W})=>{let{title:z,levels:U,tracker:G,colorIndex:_}=k(X).props,F=B(()=>$?.value?`Change status of  '${z.value}'`:`Change status for ${Z.value.toDateString()}`);return YQ({cssClasses:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:J,content:Y.Div({class:"mnw5",children:[Y.Div({class:"f5 b tc pa3",children:F}),Y.Div({class:"f5 mb1",children:Y.For({subject:k(U).reversed,map:(j,O)=>{let P=U.value.length-1-O,M=R`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>DQ(G.value,Z.value)?.level.code===P?"bg-near-white black fw6":"gray fw5"}`,T=P<1?"b--light-silver":"b--transparent";return Y.Div({class:M,onclick:N(()=>W(P)),children:[qQ({cssClasses:`pa1 mr3 ba b ${T}`,colorIndex:_,level:P,totalLevels:U.value.length,isRectangular:!0}),Y.Span(j.name)]})}})})]})})}),j1=f(({isOpen:Q,habit:X,onClose:Z,onDone:$})=>{return YQ({cssClasses:"bn",isOpen:Q,onTapOutside:Z,content:Y.Div({class:"pa3 f5",children:[Y.Div({class:"mb3 b f4",children:R`Stop '${()=>X.value.title}'?`}),Y.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",Y.Br({}),Y.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),Y.Div({class:"flex items-center justify-between f6",children:[C({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:Z}),C({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:$})]})]})})}),O1=f(({cssClasses:Q,links:X})=>{return Y.Div({class:R`flex items-center justify-between pv3 bg-near-white ${Q}`,children:Y.For({subject:X,map:(Z)=>A1({label:Z.label,icon:Z.icon,isSelected:Z.isSelected,href:Z.href})})})}),A1=f(({cssClasses:Q,label:X,icon:Z,isSelected:$,href:J})=>{let W=w($).ternary("app-theme-color b","black");return Y.Div({class:R`pointer noselect flex flex-column items-center justify-center pb2 ${W} ${Q}`,onclick:N(()=>w0(J.value)),children:[y({size:22,iconName:Z}),Y.Div({class:"f7",children:X})]})}),f1=f(({cssClasses:Q,header:X,content:Z,navbarTop:$,route:J})=>{return MX({cssClasses:Q,header:X,content:Z,bottombar:Y.Div({children:[Y.If({subject:$,isTruthy:$}),O1({cssClasses:"nl3 nr3 ph4",links:I(d0,J)})]})})}),kX=f(({cssClasses:Q,body:X,onMount:Z})=>{return Y.Html({lang:"en",children:[Y.Head({children:[Y.Title("Habits (by Cyfer)"),Y.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),Y.Meta({charset:"UTF-8"}),Y.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),Y.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),Y.Link({rel:"stylesheet",href:"/assets/styles.css"}),Y.Link({rel:"manifest",href:"/manifest.json"})]}),Y.Body({tabindex:"-1",class:Q,onmount:Z,children:[Y.Script({src:"main.js",defer:"true"}),X]})]})}),c=f(({cssClasses:Q,contentCssClasses:X,title:Z,description:$,hideDescription:J,children:W})=>{let z=w($).andNot(J).truthy;return Y.Div({class:R`mt3 mb4 ${Q}`,children:[Y.Div({class:"mb2 dark-gray f4 b",children:Z}),Y.If({subject:z,isTruthy:Y.Div({class:"mb3 f6 silver fw5",children:R`${$}`})}),Y.Div({class:X,children:W})]})}),p1=f(({cssClasses:Q,iconSize:X,selectedOptionIndex:Z,onChange:$})=>{let J=x(!1),W=B(()=>bQ[Z.value]),z=()=>J.value=!0,U=()=>J.value=!1,G=(F)=>F===W.value.label?"bg-near-white black fw6":"gray fw5",_=(F)=>{$(F),U()};return Y.Div({class:Q,children:[cQ({cssClasses:"pointer",descending:k(W).prop("decending"),iconName:k(W).prop("icon"),size:k(X).or(20),onClick:z}),YQ({cssClasses:"f5 normal ba bw0 outline-0",isOpen:J,onTapOutside:U,content:Y.Div({children:[Y.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),Y.Div({class:"f5 mb1",children:Y.For({subject:bQ,map:(F,j)=>Y.Div({class:R`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>G(F.label)}`,onclick:N(()=>_(j)),children:[cQ({cssClasses:"ml1 mr2",descending:F.decending,iconName:F.icon,size:20}),Y.Span(F.label)]})})})]})})]})}),cQ=f(({cssClasses:Q,descending:X,iconName:Z,size:$,onClick:J})=>{let W=J?"pointer":"",z=w(X).ternary("arrow_upward","arrow_downward"),U=w($).mul(4).div(5).result;return Y.Span({class:R`flex items-center ${W} ${Q}`,onclick:N(J),children:[y({cssClasses:"silver",iconName:z,size:U}),y({size:$,iconName:Z})]})}),E1=f(({cssClasses:Q,progress:X})=>{return Y.Div({class:R`flex flex-column justify-center items-center vh-100 ${Q}`,children:[Y.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),Y.Div({class:"f3 b mv3",children:"Habits"}),U1({cssClasses:"w-40",progress:X}),Y.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),DX=new Date,KQ=x(!1),JQ=x(0),PQ=x(!1),M1=w(PQ).andThisIsLT(JQ,100).truthy,w1=A0(kQ(DX,2),7),S=x(DX),UQ=I(x0,S),k1=I(v0,S),D1=I(r0,UQ,S),N1=I((Q)=>Q.length===0?"No habit for the day! Add one.":Q.length<5?`Only ${Q.length} habits a day! Add more.`:"",UQ),GQ=x(!1),LQ=x(0),T1=k(UQ).at(LQ),NX=k(T1).or(zX()),H1=(Q)=>{GQ.value=!0,LQ.value=Q},x1=()=>{GQ.value=!1,LQ.value=0},L1=(Q)=>{b0(NX.value,Q,S.value),GQ.value=!1,S.value=new Date(S.value.getTime()+1)},V1=()=>{PQ.value=p0();let Q=setInterval(()=>{if(JQ.value+=1,JQ.value>=100)clearInterval(Q),PQ.value=!1,AX(new Date)},30)},mQ=()=>{EX(),S.value=new Date,KQ.value=i0()},S1=()=>{V1(),EX(),mQ(),window.addEventListener("pageshow",mQ)},I1=kX({cssClasses:"bg-white",onMount:S1,body:Y.Div({children:[P1({isOpen:GQ,showTitleInHeader:!0,habit:NX,date:S,onClose:x1,onChange:L1}),Y.If({subject:M1,isTruthy:E1({progress:JQ}),isFalsy:f1({cssClasses:"ph3 bg-white",route:"/",header:"Tasks in a day",content:Y.Div(Y.If({subject:KQ,isTruthy:F1({}),isFalsy:Y.Div({children:[Y.Div({onmount:(Q)=>Q.scrollLeft=Q.scrollWidth,class:"sticky top-3 bg-white pb2 flex items-center justify-between z-999 w-100",children:Y.For({subject:w1,map:(Q)=>{let X=j0(Q),Z=s(S.value,Q),$=Z?"black b b--silver":X?"light-gray b--transparent":"light-silver pointer b--transparent",J=()=>{if(Z||X)return;S.value=Q};return Y.Div({class:`bw1 ba br-pill ph2 pv3 pb2 tc ${$}`,onclick:N(J),children:[Y.Div({class:"f7 ",children:$X(Q.getDay(),3)}),Y.Div({class:"mt2 f4",children:("0"+Q.getDate()).slice(-2)})]})}})}),Y.Div({class:"mt2 mb2 f4 b",children:k1}),Y.Div({class:"mb4 pb2 silver",children:D1}),Y.Div({class:"mt4",children:Y.For({subject:UQ,itemKey:"id",n:1/0,nthChild:FQ({cssClasses:"flex pl5 pr3 nl3 mt4",onClick:JX,children:N1}),map:(Q,X)=>{let{id:Z,title:$,colorIndex:J,levels:W,tracker:z}=k(Q).props,U=B(()=>{return DQ(z.value,S.value).level.code}),G=w(U).isLT(1).ternary("b--light-silver","b--transparent");return Y.Div({class:"mt4 flex items-center",children:[qQ({cssClasses:R`pa3 mr3 ba b ${G}`,colorIndex:J,level:U,totalLevels:k(W).length,icon:"check",iconSize:22,showText:w(U).isGT(0).truthy,showHeight:!0,onClick:()=>H1(X.value)}),Y.Div({class:"pointer",onclick:N(()=>k0(Z.value)),children:[Y.Div({class:"f5 fw6 f4-ns fw4-ns",children:$}),Y.Div({class:"f6 light-silver pt05",children:c0(Z.value)})]})]})}})}),Y.Div({class:"pv6"})]})})),navbarTop:Y.Div(Y.If({subject:KQ,isFalsy:wX({})}))})})]})}),g1=()=>{L.start("mount"),nQ.resetIdCounter(),I1(),L.start("run")};g1();

var WX=(X)=>{let $=Object.entries(X).sort((Q,J)=>Q[0].localeCompare(J[0]));return $.forEach(([Q,J],W)=>{if(J&&typeof J==="object"&&!Array.isArray(J))$[W]=[Q,WX(J)]}),Object.fromEntries($)},BX=(X)=>{if(typeof X!=="object"||X===null||Array.isArray(X))return!1;return Object.prototype.toString.call(X)==="[object Object]"},d=(X)=>{if(Array.isArray(X)){let $=[...X],Q=[];return $.forEach((J)=>{Q.push(d(J))}),Q}if(BX(X)){let $={...X},Q={};return Object.keys($).forEach((J)=>{Q[J]=d($[J])}),Object.freeze(Q)}return X},v=(X)=>{if(Array.isArray(X)){let Q=[...X],J=[];return Q.forEach((W)=>{J.push(v(W))}),J}if(BX(X)){let Q={...X},J={};return Object.keys(Q).forEach((W)=>{J[W]=v(Q[W])}),J}return X},EX=(X,$="index")=>X.map((Q,J)=>({[$]:J,value:Q})),A0=(X,$)=>{let Q=WX(X),J=WX($),W=Object.keys(Q),Z=Object.keys(J);if(W.length!==Z.length)return!1;for(let Y of W)if(!Z.includes(Y)||!GX(Q[Y],J[Y]))return!1;return!0},E0=(X,$)=>{if(X.length!==$.length)return!1;if(X.length===0)return!0;for(let Q=0;Q<X.length;Q++)if(!GX(X[Q],$[Q]))return!1;return!0},GX=(X,$)=>{if(typeof X!==typeof $)return!1;if(Array.isArray(X))return E0(X,$);if(X===null||$===null)return X===$;if(typeof X==="object"&&!(X instanceof Set))return A0(X,$);if(typeof X==="bigint"||typeof X==="number"||typeof X==="string"||typeof X==="boolean")return X===$;return X===$},T0=(X,$,Q)=>{let W=EX(v(X),"index");return EX(v($),"index").map((Y)=>{let q="add",G=-1,U=Y.value;return W.some((F,P)=>{if(q=GX(F.value,Y.value)?F.index===Y.index?"idle":"shuffle":Q&&F.value[Q]!==void 0&&F.value[Q]===Y.value[Q]?"update":"add",q!=="add")return G=F.index,W.splice(P,1),!0;return!1}),{type:q,oldIndex:G,value:U}})},N=(X)=>["source-signal","derived-signal"].includes(X?.type),gX=(X,$)=>X?.type==="non-signal"&&(!$||!$.length||$.some((Q)=>typeof X?.value===Q)),FX=(X)=>N(X)||gX(X),bX=(X)=>gX(X,["string"]),vX=(X)=>X?.type==="non-signal"&&Array.isArray(X?.value)&&(X?.value).every(($)=>typeof $==="string"),h=(X)=>FX(X)?X.value:X,s=null,k=(X)=>{let $=d(X),Q=new Set;return{type:"source-signal",get value(){if(s)Q.add(s);return v($)},set value(J){if(J===$)return;$=d(J),Q.forEach((W)=>W&&W())}}},c=(X)=>{s=X,X(),s=null},R=(X)=>{let $,Q=k($);return c(()=>{$=X($),Q.value=$}),{type:"derived-signal",get prevValue(){return $},get value(){return Q.value}}},S=(X)=>{if(!BX(X.value))throw new Error("Thee argument should be a plain object or a signal of plain object");return{prop:($)=>R(()=>X.value[$]),get props(){return Object.keys(X.value).reduce((Q,J)=>{let W=J;return Q[W]=this.prop(W),Q},{})}}},B=(X,...$)=>R(()=>{return X.reduce((Q,J,W)=>{let Z,Y=$[W];if(typeof Y==="function")Z=Y()??"";else if(FX(Y))Z=Y.value??"";else Z=Y??"";return`${Q}${J}${Z.toString()}`},"")}),hX=["onmount","onunmount"],cX=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],D0=[...cX,...hX],L0=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],m,H0=(X)=>{if(!m)m=document.createElement("textarea");return m.innerHTML=X,m.value},x0=()=>{let X=0;return{getNewId:()=>++X,resetIdCounter:()=>X=0}},pX=x0(),T={currentIs:(X)=>window._currentAppPhase===X,start:(X)=>{window._currentAppPhase=X,console.log(`Current phase is ${X}`)}},n=(X)=>Array.isArray(X),i=(X)=>!isNaN(X?.elementId)&&X?.elementId>0,g=(X)=>typeof X==="string"||typeof X==="function"&&X.isElementGetter,_X=(X)=>N(X)&&g(X.value),N0=(X)=>g(X)||_X(X),uX=(X)=>{return N(X)&&(g(X.value)||n(X.value)&&X.value.every(($)=>g($)))},mX=(X)=>{return!N(X)&&(bX(X)||vX(X)||g(X)||n(X)&&X.every(($)=>N0($)))},jX=(X)=>{return uX(X)||mX(X)},TX=!1,S0={},I={},C0=globalThis.MutationObserver,I0=new C0((X)=>{X.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((Q)=>{if(i(Q)){let J=Q,W=J.elementId;if(I[W])delete I[W];else S0[W]=J.tagName}}),$.removedNodes.forEach((Q)=>{if(i(Q)){let J=Q,W=J.elementId,Z=J.unmountListener;if(Z)I[W]={element:J,unmountListener:Z}}})}),Object.entries(I).forEach(([$,Q])=>{let{element:J,unmountListener:W}=Q;rX(J,W)})}),rX=(X,$)=>{if(!i(X))return;let Q=X.children;for(let J=0;J<Q.length;J++){let W=Q[J];rX(W,W.unmountListener)}if($&&$(X),I[X.elementId])delete I[X.elementId]},y0=()=>{if(!TX&&!T.currentIs("build"))I0.observe(document.body,{childList:!0,subtree:!0}),TX=!0},oX=(X,$)=>D0.includes(X)&&$===void 0,dX=(X,$)=>cX.includes(X)&&typeof $==="function",sX=(X,$)=>hX.includes(X)&&typeof $==="function",g0=(X,$)=>oX(X,$)||dX(X,$)||sX(X,$),b0=(X,$)=>{Object.entries($).forEach(([Q,J])=>{if(oX(Q,J));else if(dX(Q,J)){let W=Q.slice(2);X.addEventListener(W,(Z)=>{if(W==="keypress")Z.preventDefault();J(Z)})}else if(sX(Q,J)){if(Q==="onmount"&&!T.currentIs("build")){let W=J;setTimeout(()=>W(X),0)}if(Q==="onunmount")y0(),X.unmountListener=J}else console.error(`Invalid event key: ${Q} for element with tagName: ${X.tagName}`)})},DX=(X,$,Q)=>{let J=(FX(Q)?Q.value:Q)??"";if(typeof J==="boolean")if(J)X.setAttribute($,"");else X.removeAttribute($);else if($==="value")X.value=J;else if(J)X.setAttribute($,J)},v0=(X,$)=>{let Q={};Object.entries($).forEach((J)=>{let[W,Z]=J;if(N(Z))Q[W]=Z;DX(X,W,Z)}),c(()=>{Object.entries(Q).forEach((J)=>{let[W,Z]=J,Y=Z.value;if(!T.currentIs("run"))return;DX(X,W,Y)})})},o=(X)=>{if(_X(X)){let $=X.value;return o($)}if(typeof X==="string")return document.createTextNode(H0(X));if(g(X)){let $=X();if(!i($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof X}`);return $}throw new Error(`Invalid child. Type of child: ${typeof X}`)},h0=(X,$)=>{if(!$)return;if(uX($))c(()=>{let J=$.value,W=n(J)?J:[J];W.forEach((Y,q)=>{let G=X.childNodes[q],U=o(Y);if(G&&U)X.replaceChild(U,G);else if(U)X.appendChild(U);else console.error(`No child found for node with tagName: ${X.tagName}`)});let Z=W.length;while(Z<X.childNodes.length){let Y=X.childNodes[Z];if(Y)X.removeChild(Y)}});if(mX($)){let Q=bX($)?[$.value]:vX($)?$.value:n($)?$:[$],J=[];if(Q.forEach((W,Z)=>{if(_X(W))J.push({index:Z,childSignal:W});let Y=o(W),q=X.childNodes[Z];if(q&&Y)X.replaceChild(Y,q);else if(!q&&Y)X.appendChild(Y);else console.error(`No child found for node with tagName: ${X.tagName}`)}),J.length)J.forEach(({index:W,childSignal:Z})=>{c(()=>{if(!Z.value)return;if(!T.currentIs("run"))return;let Y=o(Z.value),q=X.childNodes[W];if(q&&Y)X.replaceChild(Y,q);else if(!q&&Y)X.appendChild(Y);else console.error(`No child found for node with tagName: ${X.tagName}`)})})}},c0=(X,$)=>{let Q=void 0,J={},W={};return Object.entries(X).forEach(([Z,Y])=>{if(Z==="children")if(jX(Y))Q=Y;else throw new Error(`Invalid children prop for node with tagName: ${$}

 ${JSON.stringify(Y)}`);else if(g0(Z,Y))J[Z]=Y;else W[Z]=Y}),{children:Q,eventProps:J,attributeProps:W}},p0=(X,$)=>{let Q=()=>{let J=pX.getNewId(),W=T.currentIs("mount")?document.querySelector(`[data-elem-id="${J}"]`):document.createElement(X);W.elementId=J,W.unmountListener=void 0;let Z=jX($)?{children:$}:$;if(!T.currentIs("run"))Z["data-elem-id"]=W.elementId.toString();let Y=c0(Z,W.tagName);if(b0(W,Y.eventProps),v0(W,Y.attributeProps),h0(W,Y.children),!T.currentIs("build"))W.removeAttribute("data-elem-id");return W};return Q.isElementGetter=!0,Q},LX=(X,$,Q)=>{let J=k($),W=k(X),Z=Q(R(()=>W.value),R(()=>J.value)),Y,q,G=!1;if(Z?.isElementGetter)Y=()=>{if(G&&q)return q;return q=Z(),G=!0,q},Y.isElementGetter=!0;else if(typeof Z==="string")Y=Z;else throw`One of the child, ${Z} passed in ForElement is invalid.`;return{indexSignal:J,itemSignal:W,mappedChild:Y}},HX=(X,$,Q)=>{if($!==void 0&&$>=0&&Q){let J=$>X.length?X.length:$;X.splice(J,0,Q)}return X},u0=({subject:X,itemKey:$,map:Q,n:J,nthChild:W})=>{if(W&&J===void 0||J!==void 0&&J>-1&&!W)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let Z=R(()=>{let f=h(X);return Array.isArray(f)?f:[]});if(!$)return R(()=>HX(Z.value.map(Q),J,W));let Y=W;if(W&&typeof W!=="string"){let f=W(),K=()=>f;K.isElementGetter=!0,Y=K}let q=Z.value;if(q.length&&typeof q[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let G=null,U=R((f)=>{return G=f||G,Z.value}),F=R((f)=>{if(!f||!G)return U.value.map((A,E)=>LX(A,E,Q));return T0(G,U.value,$).map((V,A)=>{let E=(f||[])[V.oldIndex];if(console.assert(V.type==="add"&&V.oldIndex===-1&&!E||V.oldIndex>-1&&!!E,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),E){if(V.type==="shuffle")E.indexSignal.value=A;if(V.type==="update")E.indexSignal.value=A,E.itemSignal.value={...V.value};return E}return LX(V.value,A,Q)})});return R(()=>HX(F.value.map((f)=>f.mappedChild),J,Y))},m0=({subject:X,isTruthy:$,isFalsy:Q})=>{let J=z.Span({style:"display: none;"}),W=()=>(h(X)?$:Q)||J;return N(X)?R(W):W()},r0=({subject:X,caseMatcher:$,defaultCase:Q,cases:J})=>{let W=()=>{let Z=h(X),Y=void 0;for(let[q,G]of Object.entries(J))if($&&$(X,q)||Z===q){Y=G;break}return Y||Q||z.Span({style:"display: none;"})};return N(X)?R(W):W()},o0=L0.reduce((X,$)=>{let Q=$.split("").map((W,Z)=>!Z?W.toUpperCase():W).join(""),J=(W)=>p0($,W);return X[Q]=J,X},{}),d0={For:u0,If:m0,Switch:r0},z={...o0,...d0},w=(X)=>($)=>{for(let J of Object.keys($))if($[J]===void 0)delete $[J];let Q=Object.entries($).reduce((J,W)=>{let[Z,Y]=W,q=typeof Y==="string",G=Array.isArray(Y)&&Y.every((F)=>typeof F==="string"),U=N(Y)||typeof Y==="function"?Y:q||G?{type:"non-signal",get value(){return h(Y)}}:jX(Y)?Y:{type:"non-signal",get value(){return h(Y)}};return J[Z]=U,J},{});return X(Q)},nX=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],s0=[1,1,1,1,1,1,1],n0=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],zX=["Not started","Completed"],i0=[70,60,45],ZX={id:"analytics",lastInteraction:new Date().getTime()},l={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},xX=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}],l0=60000,a=86400000,a0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t0=["January","February","March","April","May","June","July","August","September","October","November","December"],e0=(X)=>X*l0,iX=(X,$)=>a0[X].substring(0,$),X1=(X,$)=>t0[X].substring(0,$),PX=(X)=>{return new Date(X.getFullYear(),X.getMonth(),X.getDate())},L=(X)=>PX(X).getTime(),p=(X,$)=>L(X)===L($),$1=(X,$)=>{let Q=$||new Date;return L(X)>L(Q)},KX=(X,$)=>{let Q=L(X),J=L($);return Math.round((J-Q)/a)},Q1=(X)=>KX(new Date,X),wX=(X,$)=>new Date(X.getFullYear(),X.getMonth(),X.getDate()+$),J1=(X,$)=>{if($<1)throw"N should be some positive integer";let Q=L(X);return Array($).fill(0).map((J,W)=>new Date(Q-($-1-W)*a))},W1=(X)=>{let $=new Date;return Array(X).fill(0).map((Q,J)=>new Date($.getFullYear(),$.getMonth()-J,1)).reverse()},z1=(X,$)=>{let Q=L(X),J=L($);if(Q===J)return[PX(new Date(Q))];let W=Q<J?Q:J,Y=((Q<J?J:Q)-W)/a;return Array(Y+1).fill(0).map((q,G)=>new Date(W+G*a))},Z1=(X)=>{if(X<1)throw"";let $=new Date,Q=$.getFullYear(),J=$.getMonth(),W=new Date(Q,J-(X-1),1),Z=new Date(Q,J+1,0);return{startDate:W,endDate:Z}},lX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},Y1=(X)=>location.href=X,aX=()=>location.href=lX.HABITS.NEW.href,q1=(X)=>location.href=`${lX.HABITS.HABIT.href}?id=${X}`,U1=1.6181,R1=(X)=>n0.find(($)=>$.code===X),tX=(X,$)=>{return X<0?R1(-1):{isMaxLevel:X===$.length-1,name:$[X],code:X}},B1=(X)=>({level:tX(-1,[]),date:X}),G1=(X,$,Q)=>({level:tX(X,$),date:Q}),fX=(X,$)=>X.find((Q)=>p(Q.date,$)),F1=(X)=>b1().filter(($)=>{let Q=!$.isStopped,J=$.frequency[X.getDay()],W=L(X)>=L(new Date($.id));return Q&&J&&W}),e=(X)=>{let $=PX(new Date(X.id));return{...X,startDate:$,levels:X.levels.map((Q,J)=>({isMaxLevel:J===X.levels.length-1,name:Q,code:J})),tracker:X.tracker.map((Q,J)=>G1(Q,X.levels,wX($,J))),milestones:j1(X.milestones)}},_1=(X)=>{return{...X,levels:X.levels.map(($)=>$.name),tracker:X.tracker.map(($,Q)=>$.level.code),milestones:P1(X.milestones)}},eX=()=>{let $={id:new Date().getTime(),title:"",frequency:s0,colorIndex:0,levels:zX,tracker:[],milestones:i0,pauses:[],isStopped:!1};return e($)},j1=(X)=>[{label:"Successful",upperLimit:100,percent:X[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:X[0],percent:X[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:X[1],percent:X[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:X[2],percent:0,icon:"close",color:"red"}],P1=(X)=>X.filter(($)=>!!$.percent).map(($)=>$.percent),X0=(X,$)=>{let Q=X[0];for(let J=0;J<X.length;J++)if(Q=X[J],Q.percent<=$)break;return{label:Q.label,icon:Q.icon,color:Q.color}},K1=(X,$)=>{if(!X.title)return"Title should not be empty";if($&&v1(X.title))return"A habit with same name already exists";if(X.frequency.every((J)=>!J))return"Select at least one day in a week";if(!X.levels.every((J)=>!!J.name))return"One of the levels is empty";if(X.levels.some((J,W)=>{for(let Z=W+1;Z<X.levels.length;Z++)if(X.levels[Z].name===J.name)return!0;return!1}))return"Multiple levels have same name";if(!X.milestones.every((J)=>J.percent<=100&&J.percent>=0))return"The milestones should be between 0 and 100 percents";if(!X.milestones.every((J,W,Z)=>W===0?!0:Z[W-1].percent>J.percent))return"Milestones should be in order (from high to low)";return""},$0=(X,$,Q)=>{let J=Q0(X.tracker,$,Q),W=X.levels.length-1,Z=0,Y=0,q=0,G=0,U=0,F=0;return J.forEach((P,f)=>{if(Z+=P.level.code>-1?1:0,Y+=P.level.code>0?1:0,q+=P.level.code>0?P.level.code:0,f===J.length-1)return;let V=P.level.code<1;F=V?F+1:0;let E=100*((P.level.code>0?P.level.code:0)/(X.levels.length-1));G=Math.round(E)>50?G+1:0,U=V?0:U+1}),{title:X.title,aceStreak:G,followStreak:U,missed:F,percent:Math.round(100*(q/(Z*W))),totalDays:Z,workingDays:Y}},w1=(X,$,Q)=>{let J=!!X.length;if(!J)return{hideAddButton:!1,hideRemoveButton:$.length<3};let W=$[Q],Z=!!(J&&X.find((f)=>f.name===W.name)),Y=X.length!==$.length,q=$.length<X.length,G=$.length>X.length,U=!Y&&X.length&&X.some((f,K)=>f.name!==$[K].name);return{hideAddButton:q||U||Z&&q,hideRemoveButton:q||U||Z&&G}},f1=(X,$,Q)=>{let J=!!X.length,W=$[Q],Z=!!(J&&X.find((q)=>q.name===W.name)),Y=X.length!==$.length;return Z&&Y},V1=(X,$,Q,J=!1)=>{let W=nX[Q],Z=X/($-1),q=Math.trunc(Math.pow(Z,U1)*255).toString(16),G=q.length===1?`0${q}`:q,U=X<0||G==="0"?"transparent":`${W}${G}`,F=J?X/($-1)>0.5?"white":"black":X<0?"lightgray":"transparent";return{backgroundColor:U,fontColor:F,peakBackgroundColor:W,levelPercent:Math.round(Z*100)}},O1=(X,$,Q)=>{let J=F0(X.id),W=J.tracker.map((Y)=>{if(p(Y.date,Q))return{...Y,level:{...Y.level,code:$}};return Y}),Z={...J,tracker:W};kX(Z)},M1=(X,$)=>{let Q=[];for(let J of $)if(!X.some((Z)=>{if(p(Z.date,J))return Q.push(Z),!0;return!1}))Q.push(B1(J));return Q},Q0=(X,$,Q)=>{let J=z1($,Q);return M1(X,J)},k1=(X)=>{let Q=KX(new Date,X);if(Q<-2)return`${-Q} days back`;if(Q===-2)return"Day before yesterday";if(Q===-1)return"Yesterday";if(Q===0)return"Today";if(Q===1)return"Tomorrow";if(Q===2)return"Day after tomorrow";return`${Q} days after`},A1=(X)=>{let $=new Date,Q=new Date(X),J=-Q1(Q);if(J===0)return"Just created this habit today";if(J===1)return"This habit started from yesterday";if(J>1&&J<5)return`Started following this ${J} back`;let{aceStreak:W,followStreak:Z,missed:Y}=$0(F0(X),wX($,-J),$);if(W>=12)return`Nailed ${W} days in a row. Woah! Don't stop.`;if(W>=4)return`Doing good for ${W} days straight! Keep it up.`;if(Z>=15)return`Didn't miss for ${Z} days in a row. Kudos!`;if(Z>=4)return`${Z} days in a row. Nice! keep going.`;if(Y)`Missed ${Y} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},E1=(X,$,Q)=>{if(!X.length||X.length===$.length)return Q;let J=[...Q],W=[];return X.forEach((Z)=>{let Y=$.find((F)=>F.name===Z.name);if(!Y)return;if(Y.code===Z.code)return;let U=[];Q.forEach((F,P)=>{if(F.level.code===Z.code)U.push(P)}),W.push({indices:U,newLevel:Y})}),W.forEach((Z)=>{Z.indices.forEach((Y)=>{J[Y]={...J[Y],level:Z.newLevel}})}),J},T1=()=>{let X=new Date().getTime(),$=g1();return X-$>e0(1)},D1=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},VX=(X,$,Q)=>{let J=JSON.parse(X||"{}"),W=J&&typeof J==="object",Z=J[$];if(!W||!(Q?Z===Q:!!Z))return;return J},M=(X)=>{return(...$)=>{return D1(),G0(new Date),X&&X(...$)}},J0="analytics",L1="id",H1="analytics",W0=(X)=>{localStorage.setItem(J0,JSON.stringify(X))},z0=()=>{if(!T.currentIs("run"))return ZX;let X=()=>{let J=localStorage.getItem(J0);return VX(J,L1,H1)};if(!X())W0(ZX);let Q=X();if(!Q)throw"Error fetching analytics";return Q},Z0=()=>{let X=[];for(let $ in localStorage){if(!localStorage.hasOwnProperty($))continue;X.push($)}return X},Y0=(X)=>X.startsWith("h."),OX=(X)=>`h.${X}`,q0=(X)=>{if(!Y0(X))return;let $=localStorage.getItem(X),Q=VX($,"title");if(!Q)return;return Q},x1=()=>{for(let X of Z0())if(Y0(X))return!1;return!0},MX=()=>{if(!T.currentIs("run"))return[];let X=[];for(let $ of Z0()){let Q=q0($);if(!Q)continue;X.push(Q)}return X},U0=(X)=>{let $=OX(X.id);localStorage.setItem($,JSON.stringify(X))},N1=(X)=>{let $=OX(X);localStorage.removeItem($)},R0="settings",S1="id",C1="local-settings",B0=(X)=>{localStorage.setItem(R0,JSON.stringify(X))},I1=()=>{if(!T.currentIs("run"))return l;let X=()=>{let J=localStorage.getItem(R0);return VX(J,S1,C1)};if(!X())B0(l);let Q=X();if(!Q)throw"Error fetching settings";return y1(Q),X()},y1=(X)=>{if(!X.editPage)B0({...X,editPage:l.editPage})},g1=()=>{if(!T.currentIs("run"))return ZX.lastInteraction;return z0().lastInteraction},G0=(X)=>{let $=z0();W0({...$,lastInteraction:X.getTime()})},F0=(X)=>{let $=OX(X),Q=q0($);if(!Q)throw`Error fetching habit with id '${X}' from storage`;return e(Q)},b1=()=>{return MX().map(($)=>e($))},v1=(X)=>{let Q=MX().find((J)=>J.title.trim()===X.trim());return Q?e(Q):void 0},_0=()=>{let X=MX();for(let $ of X){let Q=new Date($.id),J=new Date,W=KX(Q,J),Z=[...$.tracker];if(W+2<=Z.length)continue;let Y=Z.length-1,q=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+Y),G=q.getDay();if(p(J,q)){let U=Z[Y];Z[Y]=$.frequency[G]?U<0?0:U:-1}for(let U=Z.length;U<=W;U++){let P=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+U).getDay();Z[U]=$.frequency[P]?0:-1}$.tracker=Z,U0($)}},kX=(X)=>{let $=_1(X);U0($)},h1=(X)=>{let $={...X,isStopped:!0};kX($)},c1=(X)=>N1(X),p1=()=>{return I1().editPage},u1=w(({classNames:X,hideRemove:$,hideAdd:Q,onRemove:J,onAdd:W})=>{return z.Span({class:B`br3 pb1 f4 bw1 b--light-silver dark-gray ${()=>$?.value&&Q?.value?"bn":"ba"} ${X}`,children:[z.If({subject:$,isFalsy:z.Span({class:B`pointer ph2 pb1 bw1 b--light-silver ${()=>Q?.value?"":"br"}`,onclick:M(J),children:"-"})}),z.If({subject:Q,isFalsy:z.Span({class:"pointer ph2 pb1",onclick:M(W),children:"+"})})]})}),x=w(({className:X,onTap:$,children:Q})=>z.Button({class:B`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${X}`,onclick:M(()=>$()),children:Q})),H=w(({className:X,size:$,onClick:Q,iconName:J,title:W})=>z.Span({class:B`material-symbols-outlined ${()=>Q?"pointer":""} ${X}`,style:B`font-size: ${()=>$?.value||"16"}px`,onclick:M(Q),children:J,title:W})),XX=w(({classNames:X,dotClassNames:$,colorIndex:Q,level:J,totalLevels:W,showText:Z,textContent:Y,icon:q,iconSize:G,isRectangular:U,showHeight:F,onClick:P})=>{let f=R(()=>U?.value?"br0":"br-100"),K=R(()=>J.value<0?"bg-transparent":"bg-light-gray"),{peakBackgroundColor:V,backgroundColor:A,fontColor:E,levelPercent:b}=S(R(()=>V1(J.value,W.value,Q.value,Z?.value))).props,u=R(()=>Y?.value||"Î‡"),QX=R(()=>F?.value&&q?.value&&b.value>99),JX=()=>{if(P&&J.value>=0)P()};return z.Span({class:B`pointer relative overflow-hidden ${f} ${K} ${X}`,onclick:M(JX),children:z.If({subject:F,isTruthy:z.Span({class:B`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${$}`,style:B`
            background-color: ${V};
            color: white;
            height: ${b}%;
          `,children:z.If({subject:QX,isTruthy:H({iconName:q,size:G})})}),isFalsy:z.Span({class:B`flex items-center justify-around absolute absolute--fill ${$}`,style:B`
            background-color: ${A};
            color: ${E};
          `,children:z.If({subject:q,isTruthy:H({iconName:q,size:G}),isFalsy:z.Span(u)})})})})}),Z5=w(({classNames:X})=>{return z.Div({class:B`bb b--light-gray ${X}`})}),YX=w(({classNames:X,href:$,target:Q,onClick:J,children:W})=>{return z.A({class:B`noselect ${()=>!$&&!J?"":"pointer underline"} ${X}`,href:$,target:Q,onclick:M(J),children:W})}),$X=w(({classNames:X,isOpen:$,content:Q,onTapOutside:J})=>{return z.Dialog({onmount:(W)=>setTimeout(()=>c(()=>{if($.value)W.showModal();else W.close()})),onclick:M(J),class:B`pa0 br3 ${X}`,children:[z.Div({onclick:(W)=>W.stopPropagation(),children:Q})]})}),m1=w(({classNames:X,placeholder:$,num:Q,onchange:J})=>{let W=(Z)=>{let Y=Z.target.value,q=Number.parseFloat(Number.parseFloat(Y||"0").toFixed(2));J(q)};return z.Input({class:X,type:"number",placeholder:$,value:B`${()=>Q.value??""}`,onchange:W})}),j0=w(({classNames:X,body:$,onMount:Q})=>{return z.Html({lang:"en",children:[z.Head({children:[z.Title("Habits (by Cyfer)"),z.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),z.Meta({charset:"UTF-8"}),z.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),z.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),z.Link({rel:"stylesheet",href:"/assets/styles.css"}),z.Link({rel:"manifest",href:"/manifest.json"})]}),z.Body({tabindex:"-1",class:X,onmount:Q,children:[z.Script({src:"main.js",defer:"true"}),$]})]})}),r1=w(({progress:X,classNames:$})=>{let Q=B`width: ${()=>X.value<0?0:X.value>100?100:X.value}%;`;return z.Div({class:B`br-pill bg-moon-gray ${$}`,children:z.Div({class:"br-pill bg-app-theme-color pa1",style:Q})})}),P0=w(({classNames:X,header:$,content:Q,bottombar:J})=>{return z.Div({class:"flex-ns justify-center-ns",children:z.Div({class:B`w6-ns ${X}`,children:[z.If({subject:$,isTruthy:z.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),Q,z.Div({class:"pv6 mt5"}),z.If({subject:J,isTruthy:z.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:J})})]})})}),Y5=w(({classNames:X,tabItemClassNames:$,selectedTabClassNames:Q,tabs:J,selectedTabIndex:W,onTabChange:Z})=>{return z.Div({class:B`bg-white br3 ${X}`,children:z.Div({class:"flex items-center justify-between pa1",children:z.For({subject:J,map:(Y,q)=>z.Span({class:B`w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit ${()=>q===W.value?`b--light-silver b black ${Q?.value}`:"pointer b--transparent b--hover-black silver pointer"} ${$}`,onclick:M(()=>Z(q)),children:Y})})})})}),NX=w(({classNames:X,placeholder:$,disabled:Q,text:J,onmount:W,onchange:Z,onkeydown:Y,onfocus:q,onblur:G})=>{let U,F=(K)=>{if(U=K,W)W(K)},P=(K)=>{let V=K.target.value;if(Z)Z(V)},f=(K)=>{let V=K.key.length===1?U.value+K.key:K.key==="Backspace"?U.value.slice(0,-1):U.value,A={key:K.key,text:V};if(Y)Y(A)};return z.Input({onmount:F,class:B`${X}`,type:"text",placeholder:$,disabled:Q,value:J,onchange:P,onkeydown:f,onfocus:q,onblur:G})}),q5=w(({classNames:X,isOn:$,onToggle:Q})=>{return z.Div({class:B`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${X}`,onclick:M(Q),children:[z.Div({class:B`br-100 ba bw1 b--hover-black pa1 ${()=>$?.value?"b--transparent":"b--moon-gray bg-moon-gray"}`}),z.Div({class:"pa05"}),z.Div({class:B`br-100 ba bw1 b--hover-black pa1 ${()=>$?.value?"b--mid-gray bg-mid-gray":"b--transparent"}`})]})}),SX=w(({classNames:X,justifyClassNames:$,label:Q})=>{return z.Div({class:B`w-100 flex ${()=>$?.value||"justify-end"} ${X}`,children:x({className:"pa3 mb3 shadow-4 b flex items-center",children:[H({className:"nl1 mr1",size:22,iconName:"add"}),R(()=>Q?.value||"Add habit")],onTap:aX})})}),o1=w(({classNames:X})=>{return x({className:B`pa3 flex items-center ${X}`,children:[H({iconName:"arrow_back"}),z.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),U5=w(({classNames:X,milestones:$,achievedMilestone:Q,completionPercent:J})=>{let W=S(Q).prop("color");return z.Div({class:B`center ${X}`,children:[z.Div({class:"pb2 w-100 relative",children:z.For({subject:$,map:(Z,Y)=>{return d1({colorCss:`bg-${Z.color}`,percent:Z.upperLimit,hideUpperLimit:Y===0})}})}),z.Div({class:B`nt3dot6 h1dot2 bw1 relative br b--${W}`,style:R(()=>`width: ${J.value}%;`),children:z.Div({class:B`relative flex items-start nt1 justify-between f7 mid-gray`,children:[z.Div(R(()=>J.value>53?"Average completion":J.value>43?"Avg completion":J.value>35?"Completion":"")),z.Div({class:B`absolute right-0 pr1 b f6 ${W}`,children:R(()=>`${J.value}%`)})]})})]})}),d1=w(({colorCss:X,hideUpperLimit:$,percent:Q})=>{return z.Div({class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:R(()=>`width: ${Q.value}%;`),children:[z.Div({class:B`absolute absolute-fill h0dot15 w-100 ${X}`}),z.Div({class:"flex justify-end w-100 pt2 f7",children:z.Div({class:"nr3 pb2 light-silver b",children:R(()=>$?.value?"":`${Q.value}%`)})})]})}),s1=w(({classNames:X,habit:$,date:Q,colorIndex:J,totalLevels:W})=>{let Z=R(()=>{let Y=Q.value.getFullYear(),q=Q.value.getMonth(),G=new Date(Y,q,1),U=new Date(Y,q+1,0);return Q0($.value.tracker,G,U)});return z.Div({class:B`flex items-center ${X}`,children:[z.Div({class:"f8 b w2 light-silver",children:R(()=>X1(Q.value.getMonth(),3))}),z.Div({class:"w-100 flex items-center justify-between",children:z.For({subject:Z,map:(Y)=>XX({classNames:"pa1",colorIndex:J,level:Y.level.code,totalLevels:W})})})]})}),R5=w(({classNames:X,habit:$,months:Q,onClick:J})=>{let W=R(()=>$.value),{milestones:Z,title:Y,colorIndex:q,levels:G}=S(W).props,U=R(()=>{let{startDate:V,endDate:A}=Z1(Q.value);return $0($.value,V,A).percent}),F=R(()=>X0(Z.value,U.value)),{icon:P,color:f}=S(F).props,K=R(()=>W1(Q.value));return z.Div({class:B`pointer bg-white ${X}`,onclick:M(J),children:[z.Div({class:"flex items-center justify-between nt1 mb2",children:[z.Div({class:"f5 dark-gray b",children:Y}),z.Div({class:"f6 silver b flex items-center",children:[H({className:B`mr1 ${f}`,iconName:P}),B`${U}%`]})]}),z.Div({class:"mt2 mb1",children:z.For({subject:K,map:(V)=>s1({classNames:"mb1",habit:$,date:V,colorIndex:q,totalLevels:G.value.length})})})]})}),n1=w(({classNames:X,editableHabit:$,editedHabit:Q,hideDescriptions:J,showFullCustomisations:W,onChange:Z})=>{let Y=k(!1),q=R(()=>{let j=Y.value;return W?.value||j}),{title:G,frequency:U,levels:F,milestones:P,colorIndex:f}=S(Q).props,K=R(()=>U.value.every((j)=>!!j)),V="bg-mid-gray white",A="bg-near-white light-silver",E=(j)=>{Z({...Q.value,title:j})},b=(j)=>{Z({...Q.value,colorIndex:j})},u=(j)=>{if(j<-1||j>6)throw"Invalid day index";if(j===-1){Z({...Q.value,frequency:[1,1,1,1,1,1,1]});return}let _=K.value?U.value.map((O)=>0):U.value;_[j]=K.value?1:_[j]?0:1,Z({...Q.value,frequency:_})},QX=(j,_)=>{let O=F.value;O[_]={...O[_],name:j},Z({...Q.value,levels:O})},JX=(j)=>{let _=F.value,O=j>=_.length;_.splice(j,0,{isMaxLevel:O,name:"",code:j}),Z({...Q.value,levels:_})},w0=(j)=>{let _=F.value;if(_.length<3)return;_.splice(j,1);let O=_.length-1;_[O]={..._[O],isMaxLevel:!0},Z({...Q.value,levels:_})},f0=(j,_)=>{if(_<0||_>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let O=[...Q.value.milestones];O[_]={...O[_],percent:j},Z({...Q.value,milestones:O})};return z.Div({class:X,children:[C({classNames:"pb1",title:"Weekdays",children:z.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:z.For({subject:Array(7).fill(0),n:0,nthChild:z.Span({class:B`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${()=>K.value?"bg-mid-gray white":"bg-near-white light-silver"}`,children:"Daily",onclick:M(()=>u(-1))}),map:(j,_)=>{let O=R(()=>U.value[_]&&!K.value?"bg-mid-gray white":"bg-near-white light-silver");return z.Span({class:B`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${O}`,children:iX(_,1),onclick:M(()=>u(_))})}})})}),C({classNames:"pb2",title:"Title of the habit",children:NX({classNames:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:G,onchange:E})}),z.If({subject:q,isTruthy:z.Div([C({classNames:"pb1",title:"Select a color tag",children:z.Div({class:"mb1 flex items-center",children:z.For({subject:nX,map:(j,_)=>{let O=R(()=>_===f.value?"#999":"#f4f4f4");return z.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:B`border-color: ${O}`,onclick:M(()=>b(_)),children:z.Span({class:B`pa2 br-100`,style:`background-color: ${j}`})})}})})}),C({classNames:"pb3",title:"Status update levels",hideDescription:J,description:`
                  When updating a habit status in a day, we generally have only two levels - "${zX[0]}"
                  or "${zX[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.
                `,children:z.For({subject:F,map:(j,_)=>{let O=$?.value?.levels||[],AX=F.value,{hideAddButton:V0,hideRemoveButton:O0}=w1(O,AX,_),M0=f1(O,AX,_);return z.Div({children:[z.Div({class:"flex items-center justify-between",children:[z.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[XX({classNames:"w1 h2 br3 br--left ml1px",dotClassNames:"br3 br--left",colorIndex:f,level:_,isRectangular:!0,totalLevels:F.value.length}),NX({classNames:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${_}`,disabled:M0,text:j.name,onchange:(k0)=>QX(k0,_)})]}),u1({hideAdd:V0,hideRemove:O0,onAdd:()=>JX(_+1),onRemove:()=>w0(_)})]}),z.If({subject:_<F.value.length-1,isTruthy:z.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),C({title:"Habit completion goal",hideDescription:J,description:B`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>X0(Q.value.milestones,67).label}'. For achieving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.
                `,children:z.For({subject:P,n:0,nthChild:z.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[z.Span({class:"lh-copy",children:""}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),z.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(j,_)=>z.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[z.Span({class:"lh-copy flex items-center",children:[H({className:`mr2 ${j.color}`,size:20,iconName:j.icon}),j.label]}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.If({subject:_===3,isTruthy:z.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:m1({classNames:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:j.percent,onchange:(O)=>f0(O,_)})}),z.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),z.If({subject:W,isFalsy:x({className:"pv2 ph3 flex items-center",onTap:()=>Y.value=!Y.value,children:[H({className:"mr1",iconName:R(()=>Y.value?"remove":"add")}),B`Show ${()=>Y.value?"Less":"More"} Customisations`]})})]})}),B5=w(({editableHabit:X,onMount:$})=>{let Q=k(l.editPage),J=k(!1),W=k(!1),Z=k(""),Y=k(eX()),q=R(()=>X?.value?`Edit '${X.value.title}'`:"Add new habit"),G=()=>J.value=!0,U=()=>J.value=!1,F=()=>{U(),history.go(-2)},P=()=>{if(Z.value=K1(Y.value,!X?.value),Z.value)return;let K=Y.value,V=[...X?.value?.levels||[]],A=E1(V,K.levels,K.tracker);kX({...Y.value,tracker:A}),history.back()};return j0({onMount:()=>{if($)$(),Y.value=X?.value;Q.value=p1()},body:P0({classNames:"bg-white ph3",header:z.Div({class:B`${()=>q.value.length>22?"f2dot66":""}`,children:q}),content:z.Div([z.If({subject:X,isTruthy:z.Div([C({classNames:"pb2",title:"Actions",children:[i1({isOpen:J,habit:Y,onClose:U,onDone:F}),YX({classNames:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:G}),$X({classNames:"bn",isOpen:W,onTapOutside:()=>W.value=!1,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:B`Stop '${()=>Y.value.title}'?`}),z.Div({class:"mb4",children:[`
                          This action is not reversible. You will not be able to resume it again.`,z.Br({}),z.Br({}),`
                          Are you sure, you want to STOP this habit permanently?
                          `]}),z.Div({class:"flex items-center justify-between f6",children:[x({className:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:()=>W.value=!1}),x({className:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:()=>{h1(Y.value),W.value=!1,history.back()}})]})]})}),YX({classNames:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:()=>W.value=!0})]})])}),n1({editableHabit:X,editedHabit:Y,hideDescriptions:R(()=>!Q.value.showHints),showFullCustomisations:S(Q).prop("showFullCustomisation"),onChange:(K)=>Y.value=K})]),bottombar:z.Div({class:"bg-white w-100 pv3",children:[z.If({subject:Z,isTruthy:z.Div({class:"red mb3",children:Z})}),z.Div({class:"flex items-center justify-stretch",children:[o1({classNames:"w4dot50 w4dot25-ns"}),x({className:"w-100 pa3 ml3 b",children:R(()=>X?.value?"Update":"Add"),onTap:P})]})]})})})}),i1=w(({isOpen:X,habit:$,onClose:Q,onDone:J})=>{return $X({classNames:"bn w-30-ns",isOpen:X,onTapOutside:Q,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:B`Delete '${()=>$.value?.title}'?`}),z.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,z.Br({}),z.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),z.Div({class:"flex items-center justify-between f6",children:[x({className:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Q}),x({className:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:()=>{c1($.value.id),J()}})]})]})})}),l1=w(({isOpen:X,habit:$,date:Q,showTitleInHeader:J,onClose:W,onChange:Z})=>{let{levels:Y,tracker:q,colorIndex:G}=S(R(()=>$.value)).props;return $X({classNames:"f5 normal ba bw0 outline-0",isOpen:X,onTapOutside:W,content:z.Div({class:"mnw5",children:[z.Div({class:"f5 b tc pa3",children:B`Change status ${()=>J?.value?`of  '${$.value.title}'`:`for ${Q.value.toDateString()}`}`}),z.Div({class:"f5 mb1",children:z.For({subject:R(()=>Y.value.slice().reverse()||[]),map:(U,F)=>{let P=Y.value.length-1-F,f=B`pointer flex items-center pv3 pa3 bt b--moon-gray ${()=>fX(q.value,Q.value)?.level.code===P?"bg-near-white black fw6":"gray fw5"}`;return z.Div({class:f,onclick:M(()=>Z(P)),children:[XX({classNames:`pa1 mr3 ba b ${P<1?"b--light-silver":"b--transparent"}`,colorIndex:G,level:P,totalLevels:Y.value.length,isRectangular:!0}),z.Span(U.name)]})}})})]})})}),a1=w(({classNames:X,links:$})=>{return z.Div({class:B`flex items-center justify-between pv3 bg-near-white ${X}`,children:z.For({subject:$,map:(Q)=>t1({label:Q.label,icon:Q.icon,isSelected:Q.isSelected,href:Q.href})})})}),t1=w(({classNames:X,label:$,icon:Q,isSelected:J,href:W})=>{return z.Div({class:B`pointer noselect flex flex-column items-center justify-center pb2 ${()=>J.value?"app-theme-color b":"black"} ${X}`,onclick:M(()=>Y1(W.value)),children:[H({size:22,iconName:Q}),z.Div({class:"f7",children:$})]})}),e1=w(({classNames:X,header:$,content:Q,navbarTop:J,route:W})=>{return P0({classNames:X,header:$,content:Q,bottombar:z.Div({children:[z.If({subject:J,isTruthy:J}),a1({classNames:"nl3 nr3 ph4",links:R(()=>[{label:"Today",icon:"calendar_month",isSelected:W.value==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:W.value==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:W.value==="/settings/",href:"/settings/"}])})]})})}),C=w(({classNames:X,contentClassNames:$,title:Q,description:J,hideDescription:W,children:Z})=>{return z.Div({class:B`mt3 mb4 ${X}`,children:[z.Div({class:"mb2 dark-gray f4 b",children:Q}),z.If({subject:R(()=>J?.value&&!W?.value),isTruthy:z.Div({class:"mb3 f6 silver fw5",children:B`${J}`})}),z.Div({class:$,children:Z})]})}),G5=w(({classNames:X,iconSize:$,selectedOptionIndex:Q,onChange:J})=>{let W=k(!1),Z=R(()=>xX[Q.value]),Y=(q)=>{J(q),W.value=!1};return z.Div({class:X,children:[CX({classNames:"pointer",descending:R(()=>Z.value.decending),iconName:R(()=>Z.value.icon),size:R(()=>$?.value??20),onClick:()=>W.value=!0}),$X({classNames:"f5 normal ba bw0 outline-0",isOpen:W,onTapOutside:()=>W.value=!1,content:z.Div({children:[z.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),z.Div({class:"f5 mb1",children:z.For({subject:xX,map:(q,G)=>{let U=B`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${()=>q.label===Z.value.label?"bg-near-white black fw6":"gray fw5"}`;return z.Div({class:U,onclick:M(()=>Y(G)),children:[CX({classNames:"ml1 mr2",descending:q.decending,iconName:q.icon,size:20}),z.Span(q.label)]})}})})]})})]})}),CX=w(({classNames:X,descending:$,iconName:Q,size:J,onClick:W})=>{return z.Span({class:B`flex items-center ${()=>W?"pointer":""} ${X}`,onclick:M(W),children:[H({className:"silver",size:R(()=>4*J.value/5),iconName:R(()=>$.value?"arrow_upward":"arrow_downward")}),H({className:"",size:J,iconName:Q})]})}),K0=new Date,qX=k(!1),t=k(0),UX=k(!1),X5=J1(wX(K0,2),7),D=k(K0),y=R(()=>F1(D.value)),$5=R(()=>{let X=y.value.map((Q)=>fX(Q.tracker,D.value)),$={done:X.reduce((Q,J)=>Q+(J.level.isMaxLevel?1:0),0),started:X.reduce((Q,J)=>Q+(J.level.code>0&&!J.level.isMaxLevel?1:0),0),notDone:X.reduce((Q,J)=>Q+(J.level.code===0?1:0),0)};if($.done===0&&$.started===0&&$.notDone===0)return"";if($.done===0&&$.started===0&&$.notDone>0)return`Update below ${$.notDone} tsaks for the day.`;if($.done>0&&$.started===0&&$.notDone===0)return"Great! All tasks updated.";return`
    ${$.done?`${$.done} done.`:""}
    ${$.started?` ${$.started} started.`:""}
    ${$.notDone?` ${$.notDone} yet to start.`:""}
  `}),r=k(!1),RX=k(0),IX=R(()=>y.value?.[RX.value]||eX()),Q5=()=>{UX.value=T1();let X=setInterval(()=>{if(t.value+=1,t.value>=100)clearInterval(X),UX.value=!1,G0(new Date)},30)},yX=()=>{_0(),D.value=new Date,qX.value=x1()},J5=()=>{Q5(),_0(),yX(),window.addEventListener("pageshow",yX)},W5=j0({classNames:"bg-white",onMount:J5,body:z.Div({children:[l1({isOpen:r,showTitleInHeader:!0,habit:IX,date:D,onClose:()=>{r.value=!1,RX.value=0},onChange:function(X){O1(IX.value,X,D.value),r.value=!1,D.value=new Date(D.value.getTime()+1)}}),z.If({subject:R(()=>UX.value&&t.value<100),isTruthy:z.Div({class:"flex flex-column justify-center items-center vh-100",children:[z.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),z.Div({class:"f3 b mv3",children:"Habits"}),r1({classNames:"w-40",progress:t}),z.Div({class:"mt7 pv4",children:"A Cyfer Product"})]}),isFalsy:e1({classNames:"ph3 bg-white",route:"/",header:"Tasks in a day",content:z.Div(z.If({subject:qX,isTruthy:z.Div({class:"flex flex-column items-center justify-around",children:[z.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),z.Div("Looks like, you just landed here!"),SX({classNames:"pt5",justifyClassNames:"justify-around",label:"Add your first habit"})]}),isFalsy:z.Div({children:[z.Div({onmount:(X)=>X.scrollLeft=X.scrollWidth,class:"sticky top-3 bg-white pb2 flex items-center justify-between z-999 w-100",children:z.For({subject:X5,map:(X)=>{let $=$1(X),Q=p(D.value,X);return z.Div({class:`bw1 ba br-pill ph2 pv3 pb2 tc ${Q?"black b b--silver":$?"light-gray b--transparent":"light-silver pointer b--transparent"}`,onclick:M(()=>!(Q||$)&&(D.value=X)),children:[z.Div({class:"f7 ",children:iX(X.getDay(),3)}),z.Div({class:"mt2 f4",children:("0"+X.getDate()).slice(-2)})]})}})}),z.Div({class:"mt2 mb2 f4 b",children:R(()=>k1(D.value))}),z.Div({class:"mb4 pb2 silver",children:$5}),z.Div({class:"mt4",children:z.For({subject:y,n:1/0,nthChild:YX({classNames:"flex pl5 pr3 nl3 mt4",onClick:aX,children:R(()=>y.value.length===0?"No habit for the day! Add one.":y.value.length<5?`Only ${y.value.length} habits a day! Add more.`:"")}),map:(X,$)=>{let Q=fX(X.tracker,D.value);return z.Div({class:"mt4 flex items-center",children:[XX({classNames:`pa3 mr3 ba b ${Q.level.code<1?"b--light-silver":"b--transparent"}`,colorIndex:X.colorIndex,level:Q.level.code,totalLevels:X.levels.length,icon:"check",iconSize:22,showText:Q.level.code>0,showHeight:!0,onClick:()=>{r.value=!0,RX.value=$}}),z.Div({class:"pointer",onclick:M(()=>q1(X.id)),children:[z.Div({class:"f5 fw6 f4-ns fw4-ns",children:X.title}),z.Div({class:"f6 light-silver pt05",children:R(()=>A1(X.id))})]})]})}})}),z.Div({class:"pv6"})]})})),navbarTop:z.Div(z.If({subject:qX,isFalsy:SX({})}))})})]})}),z5=()=>{T.start("mount"),pX.resetIdCounter(),W5(),T.start("run")};z5();

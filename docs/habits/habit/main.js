var QX=(X)=>{let $=Object.entries(X).sort((Q,J)=>Q[0].localeCompare(J[0]));return $.forEach(([Q,J],Z)=>{if(J&&typeof J==="object"&&!Array.isArray(J))$[Z]=[Q,QX(J)]}),Object.fromEntries($)},UX=(X)=>{if(typeof X!=="object"||X===null||Array.isArray(X))return!1;return Object.prototype.toString.call(X)==="[object Object]"},r=(X)=>{if(Array.isArray(X)){let $=[...X],Q=[];return $.forEach((J)=>{Q.push(r(J))}),Q}if(UX(X)){let $={...X},Q={};return Object.keys($).forEach((J)=>{Q[J]=r($[J])}),Object.freeze(Q)}return X},b=(X)=>{if(Array.isArray(X)){let Q=[...X],J=[];return Q.forEach((Z)=>{J.push(b(Z))}),J}if(UX(X)){let Q={...X},J={};return Object.keys(Q).forEach((Z)=>{J[Z]=b(Q[Z])}),J}return X},DX=(X,$="index")=>X.map((Q,J)=>({[$]:J,value:Q})),w0=(X,$)=>{let Q=QX(X),J=QX($),Z=Object.keys(Q),W=Object.keys(J);if(Z.length!==W.length)return!1;for(let Y of Z)if(!W.includes(Y)||!qX(Q[Y],J[Y]))return!1;return!0},O0=(X,$)=>{if(X.length!==$.length)return!1;if(X.length===0)return!0;for(let Q=0;Q<X.length;Q++)if(!qX(X[Q],$[Q]))return!1;return!0},qX=(X,$)=>{if(typeof X!==typeof $)return!1;if(Array.isArray(X))return O0(X,$);if(X===null||$===null)return X===$;if(typeof X==="object"&&!(X instanceof Set))return w0(X,$);if(typeof X==="bigint"||typeof X==="number"||typeof X==="string"||typeof X==="boolean")return X===$;return X===$},M0=(X,$,Q)=>{let Z=DX(b(X),"index");return DX(b($),"index").map((Y)=>{let U="add",B=-1,q=Y.value;return Z.some((_,j)=>{if(U=qX(_.value,Y.value)?_.index===Y.index?"idle":"shuffle":Q&&_.value[Q]!==void 0&&_.value[Q]===Y.value[Q]?"update":"add",U!=="add")return B=_.index,Z.splice(j,1),!0;return!1}),{type:U,oldIndex:B,value:q}})},N=(X)=>["source-signal","derived-signal"].includes(X?.type),yX=(X,$)=>X?.type==="non-signal"&&(!$||!$.length||$.some((Q)=>typeof X?.value===Q)),GX=(X)=>N(X)||yX(X),gX=(X)=>yX(X,["string"]),bX=(X)=>X?.type==="non-signal"&&Array.isArray(X?.value)&&(X?.value).every(($)=>typeof $==="string"),v=(X)=>GX(X)?X.value:X,s=null,k=(X)=>{let $=r(X),Q=new Set;return{type:"source-signal",get value(){if(s)Q.add(s);return b($)},set value(J){if(J===$)return;$=r(J),Q.forEach((Z)=>Z&&Z())}}},h=(X)=>{s=X,X(),s=null},G=(X)=>{let $,Q=k($);return h(()=>{$=X($),Q.value=$}),{type:"derived-signal",get prevValue(){return $},get value(){return Q.value}}},S=(X)=>{if(!UX(X.value))throw new Error("Thee argument should be a plain object or a signal of plain object");return{prop:($)=>G(()=>X.value[$]),get props(){return Object.keys(X.value).reduce((Q,J)=>{let Z=J;return Q[Z]=this.prop(Z),Q},{})}}},R=(X,...$)=>G(()=>{return X.reduce((Q,J,Z)=>{let W,Y=$[Z];if(typeof Y==="function")W=Y()??"";else if(GX(Y))W=Y.value??"";else W=Y??"";return`${Q}${J}${W.toString()}`},"")}),vX=["onmount","onunmount"],hX=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],A0=[...hX,...vX],D0=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],p,E0=(X)=>{if(!p)p=document.createElement("textarea");return p.innerHTML=X,p.value},k0=()=>{let X=0;return{getNewId:()=>++X,resetIdCounter:()=>X=0}},cX=k0(),T={currentIs:(X)=>window._currentAppPhase===X,start:(X)=>{window._currentAppPhase=X,console.log(`Current phase is ${X}`)}},o=(X)=>Array.isArray(X),d=(X)=>!isNaN(X?.elementId)&&X?.elementId>0,I=(X)=>typeof X==="string"||typeof X==="function"&&X.isElementGetter,RX=(X)=>N(X)&&I(X.value),T0=(X)=>I(X)||RX(X),pX=(X)=>{return N(X)&&(I(X.value)||o(X.value)&&X.value.every(($)=>I($)))},uX=(X)=>{return!N(X)&&(gX(X)||bX(X)||I(X)||o(X)&&X.every(($)=>T0($)))},BX=(X)=>{return pX(X)||uX(X)},EX=!1,L0={},C={},H0=globalThis.MutationObserver,x0=new H0((X)=>{X.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((Q)=>{if(d(Q)){let J=Q,Z=J.elementId;if(C[Z])delete C[Z];else L0[Z]=J.tagName}}),$.removedNodes.forEach((Q)=>{if(d(Q)){let J=Q,Z=J.elementId,W=J.unmountListener;if(W)C[Z]={element:J,unmountListener:W}}})}),Object.entries(C).forEach(([$,Q])=>{let{element:J,unmountListener:Z}=Q;mX(J,Z)})}),mX=(X,$)=>{if(!d(X))return;let Q=X.children;for(let J=0;J<Q.length;J++){let Z=Q[J];mX(Z,Z.unmountListener)}if($&&$(X),C[X.elementId])delete C[X.elementId]},N0=()=>{if(!EX&&!T.currentIs("build"))x0.observe(document.body,{childList:!0,subtree:!0}),EX=!0},rX=(X,$)=>A0.includes(X)&&$===void 0,sX=(X,$)=>hX.includes(X)&&typeof $==="function",oX=(X,$)=>vX.includes(X)&&typeof $==="function",S0=(X,$)=>rX(X,$)||sX(X,$)||oX(X,$),C0=(X,$)=>{Object.entries($).forEach(([Q,J])=>{if(rX(Q,J));else if(sX(Q,J)){let Z=Q.slice(2);X.addEventListener(Z,(W)=>{if(Z==="keypress")W.preventDefault();J(W)})}else if(oX(Q,J)){if(Q==="onmount"&&!T.currentIs("build")){let Z=J;setTimeout(()=>Z(X),0)}if(Q==="onunmount")N0(),X.unmountListener=J}else console.error(`Invalid event key: ${Q} for element with tagName: ${X.tagName}`)})},kX=(X,$,Q)=>{let J=(GX(Q)?Q.value:Q)??"";if(typeof J==="boolean")if(J)X.setAttribute($,"");else X.removeAttribute($);else if($==="value")X.value=J;else if(J)X.setAttribute($,J)},I0=(X,$)=>{let Q={};Object.entries($).forEach((J)=>{let[Z,W]=J;if(N(W))Q[Z]=W;kX(X,Z,W)}),h(()=>{Object.entries(Q).forEach((J)=>{let[Z,W]=J,Y=W.value;if(!T.currentIs("run"))return;kX(X,Z,Y)})})},u=(X)=>{if(RX(X)){let $=X.value;return u($)}if(typeof X==="string")return document.createTextNode(E0(X));if(I(X)){let $=X();if(!d($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof X}`);return $}throw new Error(`Invalid child. Type of child: ${typeof X}`)},y0=(X,$)=>{if(!$)return;if(pX($))h(()=>{let J=$.value,Z=o(J)?J:[J];Z.forEach((Y,U)=>{let B=X.childNodes[U],q=u(Y);if(B&&q)X.replaceChild(q,B);else if(q)X.appendChild(q);else console.error(`No child found for node with tagName: ${X.tagName}`)});let W=Z.length;while(W<X.childNodes.length){let Y=X.childNodes[W];if(Y)X.removeChild(Y)}});if(uX($)){let Q=gX($)?[$.value]:bX($)?$.value:o($)?$:[$],J=[];if(Q.forEach((Z,W)=>{if(RX(Z))J.push({index:W,childSignal:Z});let Y=u(Z),U=X.childNodes[W];if(U&&Y)X.replaceChild(Y,U);else if(!U&&Y)X.appendChild(Y);else console.error(`No child found for node with tagName: ${X.tagName}`)}),J.length)J.forEach(({index:Z,childSignal:W})=>{h(()=>{if(!W.value)return;if(!T.currentIs("run"))return;let Y=u(W.value),U=X.childNodes[Z];if(U&&Y)X.replaceChild(Y,U);else if(!U&&Y)X.appendChild(Y);else console.error(`No child found for node with tagName: ${X.tagName}`)})})}},g0=(X,$)=>{let Q=void 0,J={},Z={};return Object.entries(X).forEach(([W,Y])=>{if(W==="children")if(BX(Y))Q=Y;else throw new Error(`Invalid children prop for node with tagName: ${$}

 ${JSON.stringify(Y)}`);else if(S0(W,Y))J[W]=Y;else Z[W]=Y}),{children:Q,eventProps:J,attributeProps:Z}},b0=(X,$)=>{let Q=()=>{let J=cX.getNewId(),Z=T.currentIs("mount")?document.querySelector(`[data-elem-id="${J}"]`):document.createElement(X);Z.elementId=J,Z.unmountListener=void 0;let W=BX($)?{children:$}:$;if(!T.currentIs("run"))W["data-elem-id"]=Z.elementId.toString();let Y=g0(W,Z.tagName);if(C0(Z,Y.eventProps),I0(Z,Y.attributeProps),y0(Z,Y.children),!T.currentIs("build"))Z.removeAttribute("data-elem-id");return Z};return Q.isElementGetter=!0,Q},TX=(X,$,Q)=>{let J=k($),Z=k(X),W=Q(G(()=>Z.value),G(()=>J.value)),Y,U,B=!1;if(W?.isElementGetter)Y=()=>{if(B&&U)return U;return U=W(),B=!0,U},Y.isElementGetter=!0;else if(typeof W==="string")Y=W;else throw`One of the child, ${W} passed in ForElement is invalid.`;return{indexSignal:J,itemSignal:Z,mappedChild:Y}},LX=(X,$,Q)=>{if($!==void 0&&$>=0&&Q){let J=$>X.length?X.length:$;X.splice(J,0,Q)}return X},v0=({subject:X,itemKey:$,map:Q,n:J,nthChild:Z})=>{if(Z&&J===void 0||J!==void 0&&J>-1&&!Z)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let W=G(()=>{let f=v(X);return Array.isArray(f)?f:[]});if(!$)return G(()=>LX(W.value.map(Q),J,Z));let Y=Z;if(Z&&typeof Z!=="string"){let f=Z(),K=()=>f;K.isElementGetter=!0,Y=K}let U=W.value;if(U.length&&typeof U[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let B=null,q=G((f)=>{return B=f||B,W.value}),_=G((f)=>{if(!f||!B)return q.value.map((D,E)=>TX(D,E,Q));return M0(B,q.value,$).map((w,D)=>{let E=(f||[])[w.oldIndex];if(console.assert(w.type==="add"&&w.oldIndex===-1&&!E||w.oldIndex>-1&&!!E,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),E){if(w.type==="shuffle")E.indexSignal.value=D;if(w.type==="update")E.indexSignal.value=D,E.itemSignal.value={...w.value};return E}return TX(w.value,D,Q)})});return G(()=>LX(_.value.map((f)=>f.mappedChild),J,Y))},h0=({subject:X,isTruthy:$,isFalsy:Q})=>{let J=z.Span({style:"display: none;"}),Z=()=>(v(X)?$:Q)||J;return N(X)?G(Z):Z()},c0=({subject:X,caseMatcher:$,defaultCase:Q,cases:J})=>{let Z=()=>{let W=v(X),Y=void 0;for(let[U,B]of Object.entries(J))if($&&$(X,U)||W===U){Y=B;break}return Y||Q||z.Span({style:"display: none;"})};return N(X)?G(Z):Z()},p0=D0.reduce((X,$)=>{let Q=$.split("").map((Z,W)=>!W?Z.toUpperCase():Z).join(""),J=(Z)=>b0($,Z);return X[Q]=J,X},{}),u0={For:v0,If:h0,Switch:c0},z={...p0,...u0},V=(X)=>($)=>{for(let J of Object.keys($))if($[J]===void 0)delete $[J];let Q=Object.entries($).reduce((J,Z)=>{let[W,Y]=Z,U=typeof Y==="string",B=Array.isArray(Y)&&Y.every((_)=>typeof _==="string"),q=N(Y)||typeof Y==="function"?Y:U||B?{type:"non-signal",get value(){return v(Y)}}:BX(Y)?Y:{type:"non-signal",get value(){return v(Y)}};return J[W]=q,J},{});return X(Q)},dX=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],m0=[1,1,1,1,1,1,1],r0=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],JX=["Not started","Completed"],s0=[70,60,45],HX={id:"analytics",lastInteraction:new Date().getTime()},n={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},xX=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var ZX=86400000,o0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d0=["January","February","March","April","May","June","July","August","September","October","November","December"],nX=(X,$)=>o0[X].substring(0,$),iX=(X,$)=>d0[X].substring(0,$),_X=(X)=>{return new Date(X.getFullYear(),X.getMonth(),X.getDate())},y=(X)=>_X(X).getTime(),i=(X,$)=>y(X)===y($),n0=(X,$)=>{let Q=y(X),J=y($);return Math.round((J-Q)/ZX)},i0=(X,$)=>new Date(X.getFullYear(),X.getMonth(),X.getDate()+$),l0=(X)=>{let $=new Date;return Array(X).fill(0).map((Q,J)=>new Date($.getFullYear(),$.getMonth()-J,1)).reverse()},a0=(X)=>{let $=X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()-$)},t0=(X)=>{let $=6-X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()+$)},e0=(X,$)=>{let Q=y(X),J=y($);if(Q===J)return[_X(new Date(Q))];let Z=Q<J?Q:J,Y=((Q<J?J:Q)-Z)/ZX;return Array(Y+1).fill(0).map((U,B)=>new Date(Z+B*ZX))},X1=(X)=>{if(X<1)throw"";let $=new Date,Q=$.getFullYear(),J=$.getMonth(),Z=new Date(Q,J-(X-1),1),W=new Date(Q,J+1,0);return{startDate:Z,endDate:W}},lX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},$1=(X)=>location.href=X,Q1=()=>location.href=lX.HABITS.NEW.href,J1=(X)=>location.href=`${lX.HABITS.HABIT.EDIT.href}?id=${X}`,Z1=(X)=>{if(!T.currentIs("run"))return"";let $=window.location.search;return new URLSearchParams($).get(X)||""},z1=1.6181,W1=()=>{let $=+Z1("id");if(isNaN($)||!$)return;try{return wX($)}catch(Q){return}},Y1=(X)=>r0.find(($)=>$.code===X),aX=(X,$)=>{return X<0?Y1(-1):{isMaxLevel:X===$.length-1,name:$[X],code:X}},U1=(X)=>({level:aX(-1,[]),date:X}),q1=(X,$,Q)=>({level:aX(X,$),date:Q}),G1=(X,$)=>X.find((Q)=>i(Q.date,$)),FX=(X)=>{let $=_X(new Date(X.id));return{...X,startDate:$,levels:X.levels.map((Q,J)=>({isMaxLevel:J===X.levels.length-1,name:Q,code:J})),tracker:X.tracker.map((Q,J)=>q1(Q,X.levels,i0($,J)))}},tX=(X)=>{return{...X,levels:X.levels.map(($)=>$.name),tracker:X.tracker.map(($,Q)=>$.level.code)}},eX=()=>{let $={id:new Date().getTime(),title:"",frequency:m0,colorIndex:0,levels:JX,tracker:[],milestones:s0,pauses:[],isStopped:!1};return FX($)},X0=(X)=>[{label:"Successful",percent:X[0],icon:"verified_user",color:"green"},{label:"Little more to go",percent:X[1],icon:"done_all",color:"light-blue"},{label:"Going good",percent:X[2],icon:"check",color:"blue"},{label:"Unacceptable",percent:0,icon:"close",color:"red"}],PX=(X,$)=>{let Q=X0(X),J=Q[0];for(let Z=0;Z<Q.length;Z++)if(J=Q[Z],J.percent<$)break;return J},R1=(X,$)=>{if(!X.title)return"Title should not be empty";if($&&S1(X.title))return"A habit with same name already exists";if(X.frequency.every((J)=>!J))return"Select at least one day in a week";if(!X.levels.every((J)=>!!J.name))return"One of the levels is empty";if(X.levels.some((J,Z)=>{for(let W=Z+1;W<X.levels.length;W++)if(X.levels[W].name===J.name)return!0;return!1}))return"Multiple levels have same name";if(!X.milestones.every((J)=>J<=100&&J>=0))return"The milestones should be between 0 and 100 percents";if(!X.milestones.every((J,Z,W)=>Z===0?!0:W[Z-1]>J))return"Milestones should be in order (from high to low)";return""},$0=(X,$,Q)=>{let J=jX(X.tracker,$,Q),Z=X.levels.length-1,W=0,Y=0,U=0,B=0,q=0,_=0;return J.forEach((j,f)=>{if(W+=j.level.code>-1?1:0,Y+=j.level.code>0?1:0,U+=j.level.code>0?j.level.code:0,f===J.length-1)return;let w=j.level.code<1;_=w?_+1:0;let E=100*((j.level.code>0?j.level.code:0)/(X.levels.length-1));B=Math.round(E)>50?B+1:0,q=w?0:q+1}),{title:X.title,aceStreak:B,followStreak:q,missed:_,percent:Math.ceil(100*(U/(W*Z))),totalDays:W,workingDays:Y}},B1=(X,$,Q)=>{let J=!!X.length;if(!J)return{hideAddButton:!1,hideRemoveButton:$.length<3};let Z=$[Q],W=!!(J&&X.find((f)=>f.name===Z.name)),Y=X.length!==$.length,U=$.length<X.length,B=$.length>X.length,q=!Y&&X.length&&X.some((f,K)=>f.name!==$[K].name);return{hideAddButton:U||q||W&&U,hideRemoveButton:U||q||W&&B}},_1=(X,$,Q)=>{let J=!!X.length,Z=$[Q],W=!!(J&&X.find((U)=>U.name===Z.name)),Y=X.length!==$.length;return W&&Y},F1=(X,$,Q,J=!1)=>{let Z=dX[Q],W=X/($-1),U=Math.trunc(Math.pow(W,z1)*255).toString(16),B=U.length===1?`0${U}`:U,q=X<0||B==="0"?"transparent":`${Z}${B}`,_=J?X/($-1)>0.5?"white":"black":X<0?"lightgray":"transparent";return{backgroundColor:q,fontColor:_,peakBackgroundColor:Z,levelPercent:Math.round(W*100)}},P1=(X,$,Q)=>{let J=wX(X.id),Z=J.tracker.map((Y)=>{if(i(Y.date,Q))return{...Y,level:{...Y.level,code:$}};return Y}),W={...J,tracker:Z};U0(W)},j1=(X,$)=>{let Q=[];for(let J of $)if(!X.some((W)=>{if(i(W.date,J))return Q.push(W),!0;return!1}))Q.push(U1(J));return Q},jX=(X,$,Q)=>{let J=e0($,Q);return j1(X,J)},K1=(X)=>{let $=a0(new Date(X.id)),Q=t0(new Date),J=jX(X.tracker,$,Q);return{...X,tracker:J}},f1=(X)=>{let $=K1(X),Q=[];for(let J=0;J<$.tracker.length;J++){let Z=Math.floor(J/7);if(!Q[Z])Q[Z]=[];Q[Z][J%7]=$.tracker[J]}return Q},V1=(X,$,Q)=>{if(!X.length||X.length===$.length)return Q;let J=[...Q],Z=[];return X.forEach((W)=>{let Y=$.find((_)=>_.name===W.name);if(!Y)return;if(Y.code===W.code)return;let q=[];Q.forEach((_,j)=>{if(_.level.code===W.code)q.push(j)}),Z.push({indices:q,newLevel:Y})}),Z.forEach((W)=>{W.indices.forEach((Y)=>{J[Y]={...J[Y],level:W.newLevel}})}),J},w1=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},KX=(X,$,Q)=>{let J=JSON.parse(X||"{}"),Z=J&&typeof J==="object",W=J[$];if(!Z||!(Q?W===Q:!!W))return;return J},A=(X)=>{return(...$)=>{return w1(),N1(new Date),X&&X(...$)}},Q0="analytics",O1="id",M1="analytics",J0=(X)=>{localStorage.setItem(Q0,JSON.stringify(X))},A1=()=>{if(!T.currentIs("run"))return HX;let X=()=>{let J=localStorage.getItem(Q0);return KX(J,O1,M1)};if(!X())J0(HX);let Q=X();if(!Q)throw"Error fetching analytics";return Q},D1=()=>{let X=[];for(let $ in localStorage){if(!localStorage.hasOwnProperty($))continue;X.push($)}return X},E1=(X)=>X.startsWith("h."),fX=(X)=>`h.${X}`,Z0=(X)=>{if(!E1(X))return;let $=localStorage.getItem(X),Q=KX($,"title");if(!Q)return;return Q},z0=()=>{if(!T.currentIs("run"))return[];let X=[];for(let $ of D1()){let Q=Z0($);if(!Q)continue;X.push(Q)}return X},VX=(X)=>{let $=fX(X.id);localStorage.setItem($,JSON.stringify(X))},k1=(X)=>{let $=fX(X);localStorage.removeItem($)},W0="settings",T1="id",L1="local-settings",Y0=(X)=>{localStorage.setItem(W0,JSON.stringify(X))},H1=()=>{if(!T.currentIs("run"))return n;let X=()=>{let J=localStorage.getItem(W0);return KX(J,T1,L1)};if(!X())Y0(n);let Q=X();if(!Q)throw"Error fetching settings";return x1(Q),X()},x1=(X)=>{if(!X.editPage)Y0({...X,editPage:n.editPage})},N1=(X)=>{let $=A1();J0({...$,lastInteraction:X.getTime()})},wX=(X)=>{let $=fX(X),Q=Z0($);if(!Q)throw`Error fetching habit with id '${X}' from storage`;return FX(Q)},S1=(X)=>{let Q=z0().find((J)=>J.title.trim()===X.trim());return Q?FX(Q):void 0},C1=()=>{let X=z0();for(let $ of X){let Q=new Date($.id),J=new Date,Z=n0(Q,J),W=[...$.tracker];if(Z+2<=W.length)continue;let Y=W.length-1,U=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+Y),B=U.getDay();if(i(J,U)){let q=W[Y];W[Y]=$.frequency[B]?q<0?0:q:-1}for(let q=W.length;q<=Z;q++){let j=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+q).getDay();W[q]=$.frequency[j]?0:-1}$.tracker=W,VX($)}},U0=(X)=>{let $=tX(X);VX($)},I1=(X)=>{let $=wX(X),J={...tX($),isStopped:!0};VX(J)},y1=(X)=>k1(X),g1=()=>{return H1().editPage},b1=V(({classNames:X,hideRemove:$,hideAdd:Q,onRemove:J,onAdd:Z})=>{return z.Span({class:R`br3 pb1 f4 bw1 b--light-silver dark-gray ${()=>$?.value&&Q?.value?"bn":"ba"} ${X}`,children:[z.If({subject:$,isFalsy:z.Span({class:R`pointer ph2 pb1 bw1 b--light-silver ${()=>Q?.value?"":"br"}`,onclick:A(J),children:"-"})}),z.If({subject:Q,isFalsy:z.Span({class:"pointer ph2 pb1",onclick:A(Z),children:"+"})})]})}),H=V(({className:X,onTap:$,children:Q})=>z.Button({class:R`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${X}`,onclick:A(()=>$()),children:Q})),L=V(({className:X,size:$,onClick:Q,iconName:J,title:Z})=>z.Span({class:R`material-symbols-outlined ${()=>Q?"pointer":""} ${X}`,style:R`font-size: ${()=>$?.value||"16"}px`,onclick:A(Q),children:J,title:Z})),l=V(({classNames:X,dotClassNames:$,colorIndex:Q,level:J,totalLevels:Z,showText:W,textContent:Y,icon:U,iconSize:B,isRectangular:q,showHeight:_,onClick:j})=>{let f=G(()=>q?.value?"br0":"br-100"),K=G(()=>J.value<0?"bg-transparent":"bg-light-gray"),{peakBackgroundColor:w,backgroundColor:D,fontColor:E,levelPercent:g}=S(G(()=>F1(J.value,Z.value,Q.value,W?.value))).props,c=G(()=>Y?.value||"Î‡"),t=G(()=>_?.value&&U?.value&&g.value>99),e=()=>{if(j&&J.value>=0)j()};return z.Span({class:R`pointer relative overflow-hidden ${f} ${K} ${X}`,onclick:A(e),children:z.If({subject:_,isTruthy:z.Span({class:R`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${$}`,style:R`
            background-color: ${w};
            color: white;
            height: ${g}%;
          `,children:z.If({subject:t,isTruthy:L({iconName:U,size:B})})}),isFalsy:z.Span({class:R`flex items-center justify-around absolute absolute--fill ${$}`,style:R`
            background-color: ${D};
            color: ${E};
          `,children:z.If({subject:U,isTruthy:L({iconName:U,size:B}),isFalsy:z.Span(c)})})})})}),a1=V(({classNames:X})=>{return z.Div({class:R`bb b--light-gray ${X}`})}),NX=V(({classNames:X,href:$,target:Q,onClick:J,children:Z})=>{return z.A({class:R`noselect ${()=>!$&&!J?"":"pointer underline"} ${X}`,href:$,target:Q,onclick:A(J),children:Z})}),a=V(({classNames:X,isOpen:$,content:Q,onTapOutside:J})=>{return z.Dialog({onmount:(Z)=>setTimeout(()=>h(()=>{if($.value)Z.showModal();else Z.close()})),onclick:A(J),class:R`pa0 br3 ${X}`,children:[z.Div({onclick:(Z)=>Z.stopPropagation(),children:Q})]})}),v1=V(({classNames:X,placeholder:$,num:Q,onchange:J})=>{let Z=(W)=>{let Y=W.target.value,U=Number.parseFloat(Number.parseFloat(Y||"0").toFixed(2));J(U)};return z.Input({class:X,type:"number",placeholder:$,value:R`${()=>Q.value??""}`,onchange:Z})}),q0=V(({classNames:X,body:$,onMount:Q})=>{return z.Html({lang:"en",children:[z.Head({children:[z.Title("Habits (by Cyfer)"),z.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),z.Meta({charset:"UTF-8"}),z.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),z.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),z.Link({rel:"stylesheet",href:"/assets/styles.css"}),z.Link({rel:"manifest",href:"/manifest.json"})]}),z.Body({tabindex:"-1",class:X,onmount:Q,children:[z.Script({src:"main.js",defer:"true"}),$]})]})}),t1=V(({progress:X,classNames:$})=>{let Q=R`width: ${()=>X.value<0?0:X.value>100?100:X.value}%;`;return z.Div({class:R`br-pill bg-moon-gray ${$}`,children:z.Div({class:"br-pill bg-app-theme-color pa1",style:Q})})}),OX=V(({classNames:X,header:$,content:Q,bottombar:J})=>{return z.Div({class:"flex-ns justify-center-ns",children:z.Div({class:R`w6-ns ${X}`,children:[z.If({subject:$,isTruthy:z.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),Q,z.Div({class:"pv6 mt5"}),z.If({subject:J,isTruthy:z.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:J})})]})})}),e1=V(({classNames:X,tabItemClassNames:$,selectedTabClassNames:Q,tabs:J,selectedTabIndex:Z,onTabChange:W})=>{return z.Div({class:R`bg-white br3 ${X}`,children:z.Div({class:"flex items-center justify-between pa1",children:z.For({subject:J,map:(Y,U)=>z.Span({class:R`w-100 br3 pv3 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit ${()=>U===Z.value?`b--light-silver b black ${Q?.value}`:"pointer b--transparent b--hover-black silver pointer"} ${$}`,onclick:A(()=>W(U)),children:Y})})})})}),SX=V(({classNames:X,placeholder:$,disabled:Q,text:J,onmount:Z,onchange:W,onkeydown:Y,onfocus:U,onblur:B})=>{let q,_=(K)=>{if(q=K,Z)Z(K)},j=(K)=>{let w=K.target.value;if(W)W(w)},f=(K)=>{let w=K.key.length===1?q.value+K.key:K.key==="Backspace"?q.value.slice(0,-1):q.value,D={key:K.key,text:w};if(Y)Y(D)};return z.Input({onmount:_,class:R`${X}`,type:"text",placeholder:$,disabled:Q,value:J,onchange:j,onkeydown:f,onfocus:U,onblur:B})}),X5=V(({classNames:X,isOn:$,onToggle:Q})=>{return z.Div({class:R`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${X}`,onclick:A(Q),children:[z.Div({class:R`br-100 ba bw1 b--hover-black pa1 ${()=>$?.value?"b--transparent":"b--moon-gray bg-moon-gray"}`}),z.Div({class:"pa05"}),z.Div({class:R`br-100 ba bw1 b--hover-black pa1 ${()=>$?.value?"b--mid-gray bg-mid-gray":"b--transparent"}`})]})}),$5=V(({classNames:X,justifyClassNames:$,label:Q})=>{return z.Div({class:R`w-100 flex ${()=>$?.value||"justify-end"} ${X}`,children:H({className:"pa3 mb3 shadow-4 b flex items-center",children:[L({className:"nl1 mr1",size:22,iconName:"add"}),G(()=>Q?.value||"Add habit")],onTap:Q1})})}),G0=V(({classNames:X})=>{return H({className:R`pa3 flex items-center ${X}`,children:[L({iconName:"arrow_back"}),z.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),h1=V(({classNames:X,habit:$,date:Q,colorIndex:J,totalLevels:Z})=>{let W=G(()=>{let Y=Q.value.getFullYear(),U=Q.value.getMonth(),B=new Date(Y,U,1),q=new Date(Y,U+1,0);return jX($.value.tracker,B,q)});return z.Div({class:R`flex items-center ${X}`,children:[z.Div({class:"f8 b w2 light-silver",children:G(()=>iX(Q.value.getMonth(),3))}),z.Div({class:"w-100 flex items-center justify-between",children:z.For({subject:W,map:(Y)=>l({classNames:"pa1",colorIndex:J,level:Y.level.code,totalLevels:Z})})})]})}),Q5=V(({classNames:X,habit:$,months:Q,onClick:J})=>{let Z=G(()=>$.value),{milestones:W,title:Y,colorIndex:U,levels:B}=S(Z).props,q=G(()=>{let{startDate:w,endDate:D}=X1(Q.value);return $0($.value,w,D).percent}),_=G(()=>PX(W.value,q.value)),{icon:j,color:f}=S(_).props,K=G(()=>l0(Q.value));return z.Div({class:R`pointer bg-white ${X}`,onclick:A(J),children:[z.Div({class:"flex items-center justify-between nt1 mb2",children:[z.Div({class:"f5 dark-gray b",children:Y}),z.Div({class:"f6 silver b flex items-center",children:[L({className:R`mr1 ${f}`,iconName:j}),R`${q}%`]})]}),z.Div({class:"mt2 mb1",children:z.For({subject:K,map:(w)=>h1({classNames:"mb1",habit:$,date:w,colorIndex:U,totalLevels:B.value.length})})})]})}),c1=V(({classNames:X,editableHabit:$,editedHabit:Q,hideDescriptions:J,showFullCustomisations:Z,onChange:W})=>{let Y=k(!1),U=G(()=>{let P=Y.value;return Z?.value||P}),{title:B,frequency:q,levels:_,milestones:j,colorIndex:f}=S(Q).props,K=G(()=>q.value.every((P)=>!!P)),w="bg-mid-gray white",D="bg-near-white light-silver",E=(P)=>{W({...Q.value,title:P})},g=(P)=>{W({...Q.value,colorIndex:P})},c=(P)=>{if(P<-1||P>6)throw"Invalid day index";if(P===-1){W({...Q.value,frequency:[1,1,1,1,1,1,1]});return}let F=K.value?q.value.map((O)=>0):q.value;F[P]=K.value?1:F[P]?0:1,W({...Q.value,frequency:F})},t=(P,F)=>{let O=_.value;O[F]={...O[F],name:P},W({...Q.value,levels:O})},e=(P)=>{let F=_.value,O=P>=F.length;F.splice(P,0,{isMaxLevel:O,name:"",code:P}),W({...Q.value,levels:F})},F0=(P)=>{let F=_.value;if(F.length<3)return;F.splice(P,1);let O=F.length-1;F[O]={...F[O],isMaxLevel:!0},W({...Q.value,levels:F})},P0=(P,F)=>{if(F<0||F>2)throw"Incorrect index of milestone passed. Milestone values should not be more than 3.";let O=[...Q.value.milestones];O[F]=P,W({...Q.value,milestones:O})};return z.Div({class:X,children:[x({classNames:"pb1",title:"Weekdays",children:z.Div({class:"mb3 f6 flex items-center justify-between justify-start-ns",children:z.For({subject:Array(7).fill(0),n:0,nthChild:z.Span({class:R`pointer flex items-center justify-center br-pill h2 ph2 mr3-ns ${()=>K.value?"bg-mid-gray white":"bg-near-white light-silver"}`,children:"Daily",onclick:A(()=>c(-1))}),map:(P,F)=>{let O=G(()=>q.value[F]&&!K.value?"bg-mid-gray white":"bg-near-white light-silver");return z.Span({class:R`pointer flex items-center justify-center br-100 h2 w2 mr3-ns ${O}`,children:nX(F,1),onclick:A(()=>c(F))})}})})}),x({classNames:"pb2",title:"Title of the habit",children:SX({classNames:"ba bw1 b--light-silver br3 pa2 w-100",placeholder:'for example, "wake up at 5am"',text:B,onchange:E})}),z.If({subject:U,isTruthy:z.Div([x({classNames:"pb1",title:"Select a color tag",children:z.Div({class:"mb1 flex items-center",children:z.For({subject:dX,map:(P,F)=>{let O=G(()=>F===f.value?"#999":"#f4f4f4");return z.Span({class:"pointer mb2 mr3 pa1 br-100 bw2 ba flex",style:R`border-color: ${O}`,onclick:A(()=>g(F)),children:z.Span({class:R`pa2 br-100`,style:`background-color: ${P}`})})}})})}),x({classNames:"pb3",title:"Status update levels",hideDescription:J,description:`
                  When updating a habit status in a day, we generally have only two levels - "${JX[0]}"
                  or "${JX[1]}". But a habit can have more than 2 levels as well.
                  Like for example, the habit of 'Drink 2 litres water daily'
                  should ideally have three levels - '0 litre', '1 litre' and '2 litres', from low to high.
                  You can add or remove levels by clicking on + or - buttons. Click on textbox
                  for editing the status level name. The levels from top to bottom should go from lowest
                  to the highest.
                `,children:z.For({subject:_,map:(P,F)=>{let O=$?.value?.levels||[],AX=_.value,{hideAddButton:j0,hideRemoveButton:K0}=B1(O,AX,F),f0=_1(O,AX,F);return z.Div({children:[z.Div({class:"flex items-center justify-between",children:[z.Div({class:"flex items-center ba bw1 b--light-silver br3 w-70 w-80-ns",children:[l({classNames:"w1 h2 br3 br--left ml1px",dotClassNames:"br3 br--left",colorIndex:f,level:F,isRectangular:!0,totalLevels:_.value.length}),SX({classNames:"bn pa2 br3 w-100 outline-0",placeholder:`Level ${F}`,disabled:f0,text:P.name,onchange:(V0)=>t(V0,F)})]}),b1({hideAdd:j0,hideRemove:K0,onAdd:()=>e(F+1),onRemove:()=>F0(F)})]}),z.If({subject:F<_.value.length-1,isTruthy:z.Div({class:"pa2 ml2 pl1 bl bw1 b--silver"})})]})}})}),x({title:"Habit completion goal",hideDescription:J,description:R`
                  Goals are something for long-term. Let's say based on below table, after
                  a month or two, you followed your habit for 67% of the times, then you
                  just crossed the milestone - '${()=>PX(Q.value.milestones,67).label}'. For acheiving your goal (in %), you can set your
                  own custom milestones depending on the difficulty of the habit.
                `,children:z.For({subject:G(()=>X0(j.value)),n:0,nthChild:z.Div({class:"mb1 ph2 pv0 bn bw1 relative ts-white-1",children:[z.Span({class:"lh-copy",children:""}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.Span({class:"w-100 bg-white bn bw1 ph2dot5 di f4 b light-silver pb3 nl1",children:"100"}),z.Span({class:"ph2 bg-white light-silver b pb3 mr1",children:"%"})]})]}),map:(P,F)=>z.Div({class:"mb1 ph4 pv4 ba br3 bw1 b--light-gray relative",children:[z.Span({class:"lh-copy flex items-center",children:[L({className:`mr2 ${P.color}`,size:20,iconName:P.icon}),P.label]}),z.Span({class:"w-30 absolute mt3 right-2 bottom--1dot5 flex items-center z-1",children:[z.If({subject:F===3,isTruthy:z.Span({class:"w-100 bg-white bn bw1 br3 pa2dot5 di f4 b light-silver mb1",children:"00"}),isFalsy:v1({classNames:"w-100 ba bw1 b--light-silver br3 pa2dot5 di f5 b dark-gray",num:P.percent,onchange:(O)=>P0(O,F)})}),z.Span({class:"ph2 bg-white light-silver b",children:"%"})]})]})})})])}),z.If({subject:Z,isFalsy:H({className:"pv2 ph3 flex items-center",onTap:()=>Y.value=!Y.value,children:[L({className:"mr1",iconName:G(()=>Y.value?"remove":"add")}),R`Show ${()=>Y.value?"Less":"More"} Customisations`]})})]})}),J5=V(({editableHabit:X,onMount:$})=>{let Q=k(n.editPage),J=k(!1),Z=k(!1),W=k(""),Y=k(eX()),U=G(()=>X?.value?`Edit '${X.value.title}'`:"Add new habit"),B=()=>J.value=!0,q=()=>J.value=!1,_=()=>{q(),history.go(-2)},j=()=>{if(W.value=R1(Y.value,!X?.value),W.value)return;let K=Y.value,w=[...X?.value?.levels||[]],D=V1(w,K.levels,K.tracker);U0({...Y.value,tracker:D}),history.back()};return q0({onMount:()=>{if($)$(),Y.value=X?.value;Q.value=g1()},body:OX({classNames:"bg-white ph3",header:z.Div({class:R`${()=>U.value.length>22?"f2dot66":""}`,children:U}),content:z.Div([z.If({subject:X,isTruthy:z.Div([x({classNames:"pb2",title:"Actions",children:[R0({isOpen:J,habit:Y,onClose:q,onDone:_}),NX({classNames:"db mb3 f6 red",children:"Delete this habit permanently along with its data",onClick:B}),a({classNames:"bn",isOpen:Z,onTapOutside:()=>Z.value=!1,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:R`Stop '${()=>Y.value.title}'?`}),z.Div({class:"mb4",children:[`
                          This action is not reversible. You will not be able to resume it again.`,z.Br({}),z.Br({}),`
                          Are you sure, you want to STOP this habit permanently?
                          `]}),z.Div({class:"flex items-center justify-between f6",children:[H({className:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:()=>Z.value=!1}),H({className:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:()=>{I1(Y.value.id),Z.value=!1,history.back()}})]})]})}),NX({classNames:"db mb3 f6 gray",children:"Stop this habit permanently and keep it for future",onClick:()=>Z.value=!0})]})])}),c1({editableHabit:X,editedHabit:Y,hideDescriptions:G(()=>!Q.value.showHints),showFullCustomisations:S(Q).prop("showFullCustomisation"),onChange:(K)=>Y.value=K})]),bottombar:z.Div({class:"bg-white w-100 pv3",children:[z.If({subject:W,isTruthy:z.Div({class:"red mb3",children:W})}),z.Div({class:"flex items-center justify-stretch",children:[G0({classNames:"w4dot50 w4dot25-ns"}),H({className:"w-100 pa3 ml3 b",children:G(()=>X?.value?"Update":"Add"),onTap:j})]})]})})})}),R0=V(({isOpen:X,habit:$,onClose:Q,onDone:J})=>{return a({classNames:"bn w-30-ns",isOpen:X,onTapOutside:Q,content:z.Div({class:"pa3 f5",children:[z.Div({class:"mb3 b f4",children:R`Delete '${()=>$.value?.title}'?`}),z.Div({class:"mb4",children:[`
              All the data and the acheivements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,z.Br({}),z.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),z.Div({class:"flex items-center justify-between f6",children:[H({className:"w-25 pv2 ph3 mr1 b",children:"No",onTap:Q}),H({className:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:()=>{y1($.value.id),J()}})]})]})})}),p1=V(({isOpen:X,habit:$,date:Q,showTitleInHeader:J,onClose:Z,onChange:W})=>{let{levels:Y,tracker:U,colorIndex:B}=S(G(()=>$.value)).props;return a({classNames:"f5 normal ba bw0 outline-0",isOpen:X,onTapOutside:Z,content:z.Div({class:"mnw5",children:[z.Div({class:"f5 b tc pa3",children:R`Change status ${()=>J?.value?`of  '${$.value.title}'`:`for ${Q.value.toDateString()}`}`}),z.Div({class:"f5 mb1",children:z.For({subject:G(()=>Y.value.slice().reverse()||[]),map:(q,_)=>{let j=Y.value.length-1-_,f=R`pointer flex items-center pv3 pa3 bt b--moon-gray black ${()=>G1(U.value,Q.value)?.level.code===j?"bg-near-white fw7":"fw5"}`;return z.Div({class:f,onclick:A(()=>W(j)),children:[l({classNames:`pa1 mr3 ba b ${j<1?"b--light-silver":"b--transparent"}`,colorIndex:B,level:j,totalLevels:Y.value.length,isRectangular:!0}),z.Span(q.name)]})}})})]})})}),u1=V(({classNames:X,links:$})=>{return z.Div({class:R`flex items-center justify-between pv3 bg-near-white ${X}`,children:z.For({subject:$,map:(Q)=>m1({label:Q.label,icon:Q.icon,isSelected:Q.isSelected,href:Q.href})})})}),m1=V(({classNames:X,label:$,icon:Q,isSelected:J,href:Z})=>{return z.Div({class:R`pointer noselect flex flex-column items-center justify-center pb2 ${()=>J.value?"app-theme-color b":"black"} ${X}`,onclick:A(()=>$1(Z.value)),children:[L({size:22,iconName:Q}),z.Div({class:"f7",children:$})]})}),Z5=V(({classNames:X,header:$,content:Q,navbarTop:J,route:Z})=>{return OX({classNames:X,header:$,content:Q,bottombar:z.Div({children:[z.If({subject:J,isTruthy:J}),u1({classNames:"nl3 nr3 ph4",links:G(()=>[{label:"Today",icon:"calendar_month",isSelected:Z.value==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Z.value==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Z.value==="/settings/",href:"/settings/"}])})]})})}),x=V(({classNames:X,contentClassNames:$,title:Q,description:J,hideDescription:Z,children:W})=>{return z.Div({class:R`mt3 mb4 ${X}`,children:[z.Div({class:"mb2 dark-gray f4 b",children:Q}),z.If({subject:G(()=>J?.value&&!Z?.value),isTruthy:z.Div({class:"mb3 f6 silver fw5",children:R`${J}`})}),z.Div({class:$,children:W})]})}),z5=V(({classNames:X,iconSize:$,selectedOptionIndex:Q,onChange:J})=>{let Z=k(!1),W=G(()=>xX[Q.value]),Y=(U)=>{J(U),Z.value=!1};return z.Div({class:X,children:[CX({classNames:"pointer",descending:G(()=>W.value.decending),iconName:G(()=>W.value.icon),size:G(()=>$?.value??20),onClick:()=>Z.value=!0}),a({classNames:"f5 normal ba bw0 outline-0",isOpen:Z,onTapOutside:()=>Z.value=!1,content:z.Div({children:[z.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),z.Div({class:"f5 mb1",children:z.For({subject:xX,map:(U,B)=>{let q=R`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray black ${()=>U.label===W.value.label?"bg-near-white fw7":"fw5"}`;return z.Div({class:q,onclick:A(()=>Y(B)),children:[CX({classNames:"ml1 mr2",descending:U.decending,iconName:U.icon,size:20}),z.Span(U.label)]})}})})]})})]})}),CX=V(({classNames:X,descending:$,iconName:Q,size:J,onClick:Z})=>{return z.Span({class:R`flex items-center ${()=>Z?"pointer":""} ${X}`,onclick:A(Z),children:[L({className:"silver",size:G(()=>4*J.value/5),iconName:G(()=>$.value?"arrow_upward":"arrow_downward")}),L({className:"",size:J,iconName:Q})]})}),zX=k(""),M=k(eX()),MX=k(!1),m=k(!1),WX=k({date:new Date,selectedLevelIndex:0}),IX=G(()=>M.value?M.value.title:"Loading.."),r1=G(()=>{let X=M.value;if(!X)return[];let $=X.levels.map((W)=>0),Q=X.tracker.reduce((W,Y)=>{if(Y.level.code>-1)W[Y.level.code]=W[Y.level.code]?W[Y.level.code]+1:1;return W},$),J=Q.reduce((W,Y)=>W+Y);return Q.map((W,Y)=>({level:X.levels[Y],total:W,percent:Math.round(100*W/J)}))}),B0=G(()=>M.value?$0(M.value,new Date(M.value.id),new Date).percent:0),XX=G(()=>{let X=B0.value,$=M.value;return $?PX($.milestones,X):void 0}),$X=G(()=>{let X=M.value;if(!X)return[];return f1(X)}),YX=()=>{let X=W1();if(!X){zX.value="Incorrect habit ID provided in the query params.";return}M.value=X},s1=()=>MX.value=!0,_0=()=>MX.value=!1,o1=()=>{_0(),history.back()},d1=(X)=>{if(!M.value)return;P1(M.value,X,WX.value.date),m.value=!1,YX()},n1=()=>{C1(),YX(),window.addEventListener("pageshow",YX)},i1=q0({onMount:n1,body:OX({classNames:"bg-white ph3",header:z.Div({class:"flex items-start justify-between",children:[z.Div({class:R`${()=>IX.value.length>22?"f2dot66":""}`,children:IX}),z.If({subject:G(()=>M.value?.isStopped),isFalsy:L({className:"mt1 mr1 ba b--silver bw1 br-100 pa1 noselect",size:18,iconName:"edit",onClick:()=>{if(M.value)J1(M.value.id)}})})]}),content:z.Div({children:[R0({isOpen:MX,habit:M,onClose:_0,onDone:o1}),p1({isOpen:m,habit:M,date:S(WX).prop("date"),onClose:()=>m.value=!1,onChange:d1}),z.If({subject:zX,isTruthy:z.Div({class:"red",children:zX}),isFalsy:z.Div(z.If({subject:M,isFalsy:z.Div({class:"",children:"habit.."}),isTruthy:z.Div({children:[z.If({subject:G(()=>!!M.value?.isStopped),isTruthy:z.Div([z.Div({class:"red mb3",children:"Status: STOPPED PERMANENTLY"}),H({className:"pv2 ph3 nt2 mb4 red",onTap:s1,children:"Delete Permanently"})])}),x({classNames:"pb3",title:"Acheivment",children:z.For({subject:r1,n:1/0,nthChild:z.Div({class:"flex items-center justify-between mt2 pt1 bt bw1 b--near-white b mid-gray",children:[z.Div("Overall"),z.Div({class:"flex items-center",children:[L({className:R`mr2 ${()=>XX.value?.color}`,size:20,iconName:G(()=>`${XX.value?.icon}`)}),G(()=>`${XX.value?.label}`),z.Span({class:"ml1"}),z.Div(G(()=>` (${B0.value}%)`))]})]}),map:(X,$)=>z.Div({class:"flex items-center justify-between mb2",children:[z.Div(G(()=>`${X.level.name}`)),z.Div(G(()=>`${X.total} times (${X.percent}%)`))]})})}),x({title:"Tracker",children:[z.Div({class:"mh2 flex items-center justify-between",children:z.For({subject:Array(7).fill(0),map:(X,$)=>z.Div({class:"h2 w2 br-100 gray f7 flex items-center justify-center",children:nX($,1)})})}),z.Div({onmount:(X)=>X.scroll({top:X.scrollHeight-X.clientHeight}),class:"mxh5 mxh6-ns nt2 bb bw1 b--near-white mh2 overflow-y-scroll",children:[z.Div({class:R`absolute left-0 right-0 bg-to-top-white z-999 ${()=>$X.value.length>4?"h3":""}`}),z.Div({children:z.For({subject:$X,n:0,nthChild:z.Div({class:G(()=>$X.value.length>4?"pv3 mt2":"pv2")}),map:(X)=>z.Div({class:"flex items-center h-60",children:[z.Div({class:"w-100 mb3 flex items-center justify-between",children:z.For({subject:X,map:($)=>{let Q=$.date.getDate(),J=$.date.getMonth(),Z=iX(J,3),W=`${Q===1?J===0?$.date.getFullYear().toString():Z:Q}`;return l({classNames:"h2 w2 flex items-center justify-center f7",colorIndex:M.value?.colorIndex??0,level:$.level.code,totalLevels:M.value?.levels.length||2,textContent:W,showText:$.level!==void 0,onClick:()=>{if(M.value?.isStopped)return;m.value=!0,WX.value={date:$.date,selectedLevelIndex:$.level.code}}})}})})]})})})]})]})]})}))})]}),bottombar:z.Div({class:"pb3",children:G0({})})})}),l1=()=>{T.start("mount"),cX.resetIdCounter(),i1(),T.start("run")};l1();

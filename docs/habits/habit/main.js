var zX=(X)=>{const $=Object.entries(X).sort((J,Q)=>J[0].localeCompare(Q[0]));return $.forEach(([J,Q],Z)=>{if(Q&&typeof Q==="object"&&!Array.isArray(Q))$[Z]=[J,zX(Q)]}),Object.fromEntries($)},e=(X)=>{if(typeof X!=="object"||X===null||Array.isArray(X))return!1;return Object.prototype.toString.call(X)==="[object Object]"},a=(X)=>{if(Array.isArray(X)){const $=[...X],J=[];return $.forEach((Q)=>{J.push(a(Q))}),J}if(e(X)){const $={...X},J={};return Object.keys($).forEach((Q)=>{J[Q]=a($[Q])}),Object.freeze(J)}return X},p=(X)=>{if(Array.isArray(X)){const J=[...X],Q=[];return J.forEach((Z)=>{Q.push(p(Z))}),Q}if(e(X)){const J={...X},Q={};return Object.keys(J).forEach((Z)=>{Q[Z]=p(J[Z])}),Q}return X},OX=(X,$="index")=>X.map((J,Q)=>({[$]:Q,value:J})),M0=(X,$)=>{const J=zX(X),Q=zX($),Z=Object.keys(J),q=Object.keys(Q);if(Z.length!==q.length)return!1;for(let Y of Z)if(!q.includes(Y)||!HX(J[Y],Q[Y]))return!1;return!0},T0=(X,$)=>{if(X.length!==$.length)return!1;if(X.length===0)return!0;for(let J=0;J<X.length;J++)if(!HX(X[J],$[J]))return!1;return!0},HX=(X,$)=>{if(typeof X!==typeof $)return!1;if(Array.isArray(X))return T0(X,$);if(X===null||$===null)return X===$;if(typeof X==="object"&&!(X instanceof Set))return M0(X,$);if(typeof X==="bigint"||typeof X==="number"||typeof X==="string"||typeof X==="boolean")return X===$;return X===$},E0=(X,$,J)=>{const Z=OX(p(X),"index");return OX(p($),"index").map((Y)=>{let G="add",R=-1;const U=Y.value;return Z.some((B,K)=>{if(G=HX(B.value,Y.value)?B.index===Y.index?"idle":"shuffle":J&&B.value[J]!==void 0&&B.value[J]===Y.value[J]?"update":"add",G!=="add")return R=B.index,Z.splice(K,1),!0;return!1}),{type:G,oldIndex:R,value:U}})},w0=(X)=>{const $=(J)=>X((Q)=>{const Z=Array.from(Q);return J(Z),Z});return{copyWithin:(...J)=>$((Q)=>Q.copyWithin(...J)),fill:(...J)=>$((Q)=>Q.fill(...J)),pop:(...J)=>$((Q)=>Q.pop(...J)),push:(...J)=>$((Q)=>Q.push(...J)),remove:(...J)=>{const Q=J[0],Z=(...q)=>!Q(...q);J[0]=Z,X((q)=>{return q.filter(...J)})},reverse:(...J)=>$((Q)=>Q.reverse(...J)),shift:(...J)=>$((Q)=>Q.shift(...J)),sort:(...J)=>$((Q)=>Q.sort(...J)),splice:(...J)=>$((Q)=>Q.splice(...J)),unshift:(...J)=>$((Q)=>Q.unshift(...J))}},k0=(X)=>{return{set:($)=>X((J)=>({...J,...$}))}},GX=null,fX=(X)=>GX=X,S=(X)=>{let $=a(X);const J=new Set,Q=()=>{J.forEach((Y)=>{if(Y.canDisposeNow){J.delete(Y);return}Y()})},Z=(Y)=>{$=Y,Q()},q={type:"source-signal",get value(){if(GX)J.add(GX);return p($)},set value(Y){if(Y===$)return;Z(a(Y))}};return Array.isArray(X)?Object.assign(q,w0((Y)=>Z(Y($)))):typeof X==="object"&&X!==null?Object.assign(q,k0((Y)=>Z(Y($)))):q},u=(X)=>{const $=X;return $.canDisposeNow=!1,$.dispose=()=>{$.canDisposeNow=!0},fX($),X(),fX(null),$},_=(X)=>{let $;const J=S($),Q=u(()=>{$=X($),J.value=$});return{type:"derived-signal",get prevValue(){return $},get value(){return J.value},dispose(){Q.dispose()}}},N=(...X)=>{X.forEach(($)=>$.dispose())},D0=(X)=>{return{type:"non-signal",value:X}},z=(X)=>$X(X)?X.value:X,g=(X)=>["source-signal","derived-signal"].includes(X?.type),XX=(X,$)=>X?.type==="non-signal"&&(!$||!$.length||$.some((J)=>typeof X?.value===J)),$X=(X)=>g(X)||XX(X),O=(X,...$)=>{return _(()=>{const J=$.map((Q)=>z(Q));return X(...J)})},A=(X)=>{const $=typeof X==="function"?X:()=>z(X);return{...{get truthy(){return _(()=>!!$())},get falsy(){return _(()=>!$())},get truthyFalsyPair(){return _(()=>{const Q=!!$();return[Q,!Q]})},ternary:(Q,Z)=>_(()=>{return $()?z(Q):z(Z)})},or:(Q)=>A(()=>{return!!($()||z(Q))}),orNot:(Q)=>A(()=>{return!!($()||!z(Q))}),and:(Q)=>A(()=>{return!!($()&&z(Q))}),andNot:(Q)=>A(()=>{return!!($()&&!z(Q))}),equals:(Q)=>A(()=>{return $()===z(Q)}),notEquals:(Q)=>A(()=>{return $()!==z(Q)}),orBothEqual:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)===z(Z);return!!(q||Y)}),orBothUnequal:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)!==z(Z);return!!(q||Y)}),andBothEqual:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)===z(Z);return!!(q&&Y)}),andBothUnequal:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)!==z(Z);return!!(q&&Y)}),orThisIsLT:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)<z(Z);return!!(q||Y)}),orThisIsLTE:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)<=z(Z);return!!(q||Y)}),orThisIsGT:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)>z(Z);return!!(q||Y)}),orThisIsGTE:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)>=z(Z);return!!(q||Y)}),andThisIsLT:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)<z(Z);return!!(q&&Y)}),andThisIsLTE:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)<=z(Z);return!!(q&&Y)}),andThisIsGT:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)>z(Z);return!!(q&&Y)}),andThisIsGTE:(Q,Z)=>A(()=>{const q=$(),Y=z(Q)>=z(Z);return!!(q&&Y)})}},v=(X)=>{const $=typeof X==="function"?X:()=>z(X);return{...A(X),get result(){return _($)},add:(J)=>v(()=>{return $()+z(J)}),sub:(J)=>v(()=>{return $()-z(J)}),mul:(J)=>v(()=>{return $()*z(J)}),div:(J)=>v(()=>{return $()/z(J)}),mod:(J)=>v(()=>{return $()%z(J)}),pow:(J)=>v(()=>{return $()**z(J)}),isBetween:(J,Q,Z=!0,q=!0)=>A(()=>{const Y=$(),G=z(J),R=z(Q),U=Z?Y>=G:Y>G,B=q?Y<=R:Y<R;return U&&B}),isLT:(J)=>A(()=>$()<z(J)),isLTE:(J)=>A(()=>$()<=z(J)),isGT:(J)=>A(()=>$()>z(J)),isGTE:(J)=>A(()=>$()>=z(J))}},O0=(X)=>{const $=typeof X==="function"?X:()=>z(X);return{...A(X),lengthBetween:(J,Q,Z=!0,q=!0)=>A(()=>{const G=$().length,R=z(J),U=z(Q),B=Z?G>=R:G>R,K=q?G<=U:G<U;return B&&K}),lengthEquals:(J)=>A(()=>{return $().length===z(J)}),lengthNotEquals:(J)=>A(()=>{return $().length!==z(J)}),lengthLT:(J)=>A(()=>{return $().length<z(J)}),lengthLTE:(J)=>A(()=>{return $().length<=z(J)}),lengthGT:(J)=>A(()=>{return $().length>z(J)}),lengthGTE:(J)=>A(()=>{return $().length>=z(J)})}},E=(X)=>{const J=(typeof X==="function"?X:()=>z(X))();return typeof J==="number"?v(X):typeof J==="string"||Array.isArray(J)?O0(X):A(X)},AX=(...X)=>X.map(($)=>z($)),r=(X)=>{return{get string(){return _(()=>{const $=z(X);return $===void 0||$===null?void 0:$.toString()})},or:($)=>_(()=>z(X)||z($))}},f0=(X)=>{const J=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce((Q,Z)=>{const q=(...Y)=>{return _(()=>{const G=AX(...Y);return z(X)[Z](...G)})};return Q[Z]=q,Q},{});return{...r(X),...J,concat:(Q)=>_(()=>z(X).concat(z(Q))),every:(Q)=>_(()=>z(X).every(Q)),filter:(Q)=>_(()=>z(X).filter(Q)),find:(Q)=>_(()=>z(X).find(Q)),findIndex:(Q)=>_(()=>z(X).findIndex(Q)),findLast:(Q)=>_(()=>z(X).findLast(Q)),findLastIndex:(Q)=>_(()=>z(X).findLastIndex(Q)),get lastItem(){return _(()=>{return p(z(X)).pop()})},get length(){return _(()=>z(X).length)},map:(Q)=>_(()=>z(X).map(Q)),partition:(Q)=>{const Z=_(()=>z(X).filter(Q)),q=_(()=>z(X).filter((Y,G,R)=>!Q(Y,G,R)));return[Z,q]},reduce:(Q,Z)=>_(()=>z(X).reduce(Q,Z)),reduceRight:(Q,Z)=>_(()=>z(X).reduceRight(Q,Z)),get reversed(){return _(()=>z(X).toReversed())},some:(Q)=>_(()=>z(X).every(Q)),toSorted:(Q)=>_(()=>z(X).toSorted(Q)),toSpliced:(Q,Z,...q)=>_(()=>z(X).toSpliced(z(Q),z(Z),...q))}},S0=(X)=>{const J=["toExponential","toFixed","toPrecision"].reduce((Q,Z)=>{const q=(...Y)=>{return _(()=>{const G=AX(...Y);return z(X)[Z](...G)})};return Q[Z]=q,Q},{});return{...r(X),...J,toConfined:(Q,Z)=>_(()=>z(X)<z(Q)?z(Q):z(X)>z(Z)?z(Z):z(X)),toLocaleString:(Q,Z)=>_(()=>z(X).toLocaleString(z(Q),Z))}},I0=(X)=>{if(!e(z(X)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...r(X),prop:($)=>_(()=>z(X)[$]),get props(){return Object.keys(z(X)).reduce((J,Q)=>{const Z=Q;return J[Z]=this.prop(Z),J},{})},get keys(){return _(()=>Object.keys(z(X)))}}},vX=(X)=>{const J=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce((Q,Z)=>{const q=(...Y)=>{return _(()=>{const G=AX(...Y);return z(X)[Z](...G)})};return Q[Z]=q,Q},{});return{...r(X),...J,get length(){return _(()=>z(X).length)},get lowercase(){return _(()=>z(X).toLowerCase())},get Sentencecase(){return _(()=>{const Q=z(X);return Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase()})},get TitleCase(){return _(()=>z(X).toLowerCase().replace(/\b\w/g,(Q)=>Q.toUpperCase()))},get UPPERCASE(){return _(()=>z(X).toUpperCase())},localeCompare:(Q,Z,q)=>_(()=>z(X).localeCompare(z(Q),z(Z),q)),normalize:(Q)=>_(()=>z(X).normalize(z(Q))),replace:(Q,Z)=>_(()=>z(X).replace(z(Q),z(Z))),replaceAll:(Q,Z)=>_(()=>z(X).replaceAll(z(Q),z(Z))),search:(Q)=>_(()=>z(X).search(Q)),split:(Q,Z)=>_(()=>{const q=Q instanceof RegExp?Q:z(Q);return z(X).split(q,z(Z))}),toLocaleLowerCase:(Q)=>_(()=>z(X).toLocaleLowerCase(z(Q))),toLocaleUpperCase:(Q)=>_(()=>z(X).toLocaleUpperCase(z(Q)))}},V0=S("dksjfbksjnd"),E5=vX(V0).split(""),x=(X)=>{return typeof z(X)==="number"?S0(X):typeof z(X)==="string"?vX(X):Array.isArray(z(X))?f0(X):e(z(X))?I0(X):r(X)},F=(X,...$)=>_(()=>{return X.reduce((J,Q,Z)=>{let q;const Y=$[Z];if(typeof Y==="function")q=Y()??"";else if($X(Y))q=Y.value??"";else q=Y??"";return`${J}${Q}${q.toString()}`},"")}),cX=["onmount","onunmount"],mX=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],y0=[...mX,...cX],g0=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],n,pX=(X)=>{if(!n)n=document.createElement("textarea");return n.innerHTML=X,n.value},C0=(X)=>{try{return decodeURIComponent(X)}catch{return X}},b0=(X)=>{return X.replace(/\\u[\dA-Fa-f]{4}/g,($)=>String.fromCharCode(parseInt($.slice(2),16))).replace(/\\x[\dA-Fa-f]{2}/g,($)=>String.fromCharCode(parseInt($.slice(2),16)))},h0=()=>{let X=0;return{getNewId:()=>++X,resetIdCounter:()=>X=0}},dX=h0(),f={currentIs:(X)=>window._currentAppPhase===X,start:(X)=>{window._currentAppPhase=X,console.log(`Current phase is ${X}`)}},uX=(X,$,J)=>{let Q=X;Q=pX(Q),Q=C0(Q),Q=b0(Q);const Z=Q.trim().toLowerCase();for(let q of $)if(q.test(Z))throw J;return X},v0=(X)=>uX(X,[/^javascript\s*:/i,/^data\s*:/i,/^vbscript\s*:/i,/^file\s*:/i],'The href attribute value starting with one of "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),c0=(X)=>uX(X,[/url\s*\(/i,/expression\s*\(/i,/javascript\s*:/i,/data\s*:/i,/vbscript\s*:/i,/file\s*:/i],'The style attribute value starting with one of "url(..", "expression(..", "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),m0=(X,$)=>{if(X==="href"){if(typeof $==="boolean")throw"The value of 'href' attribute should not be a boolean";return v0($||"")}if(X==="style"){if(typeof $==="boolean")throw"The value of 'style' attribute should not be a boolean";return c0($||"")}return $},jX=(X)=>Array.isArray(X),t=(X)=>!isNaN(X?.elementId)&&X?.elementId>0,y=(X)=>X===void 0||typeof X==="string"||typeof X==="function"&&X.isElementGetter,rX=(X)=>jX(X)&&X.every(($)=>y($)),oX=(X)=>y(X)||rX(X),iX=(X)=>XX(X)&&y(X.value),RX=(X)=>g(X)&&y(X.value),p0=(X)=>XX(X)&&oX(X.value),sX=(X)=>g(X)&&oX(X.value),nX=(X)=>jX(X)&&X.every(($)=>y($)||iX($)||RX($)),d0=(X)=>!g(X)&&(y(X)||p0(X)||nX(X)),lX=(X)=>d0(X)||sX(X),SX=!1,u0={},m={},r0=globalThis.MutationObserver,o0=new r0((X)=>{X.forEach(($)=>{if($.type==="childList")$.addedNodes.forEach((J)=>{if(t(J)){const Q=J,Z=Q.elementId;if(m[Z])delete m[Z];else u0[Z]=Q.tagName}}),$.removedNodes.forEach((J)=>{if(t(J)){const Q=J,Z=Q.elementId,q=Q.unmountListener;if(q)m[Z]={element:Q,unmountListener:q}}})}),Object.entries(m).forEach(([$,J])=>{const{element:Q,unmountListener:Z}=J;aX(Q,Z)})}),aX=(X,$)=>{if(!t(X))return;const J=X.children;for(let Q=0;Q<J.length;Q++){const Z=J[Q];aX(Z,Z.unmountListener)}if($&&$(X),m[X.elementId])delete m[X.elementId]},i0=()=>{if(!SX&&!f.currentIs("build"))o0.observe(document.body,{childList:!0,subtree:!0}),SX=!0},tX=(X,$)=>y0.includes(X)&&$===void 0,eX=(X,$)=>mX.includes(X)&&typeof $==="function",X0=(X,$)=>cX.includes(X)&&typeof $==="function",s0=(X,$)=>tX(X,$)||eX(X,$)||X0(X,$),n0=(X,$)=>{Object.entries($).forEach(([J,Q])=>{if(tX(J,Q));else if(eX(J,Q)){const Z=J.slice(2);X.addEventListener(Z,(q)=>{if(Z==="keypress")q.preventDefault();Q(q)})}else if(X0(J,Q)){if(J==="onmount"&&!f.currentIs("build")){const Z=Q;setTimeout(()=>Z(X),0)}if(J==="onunmount"){i0();const Z=X.unmountListener;X.unmountListener=(q)=>{if(Q(q),typeof Z==="function")Z(q)}}}else console.error(`Invalid event key: ${J} for element with tagName: ${X.tagName}`)})},IX=(X,$,J)=>{const Q=$X(J)?J.value:J,Z=m0($,Q);if(typeof Z==="boolean")if(Z)X.setAttribute($,"");else X.removeAttribute($);else if($==="value")X.value=Z||"";else X.setAttribute($,Z||"")},l0=(X,$)=>{const J={};Object.entries($).forEach((Z)=>{const[q,Y]=Z;if(g(Y))J[q]=Y;IX(X,q,Y)});const Q=u(()=>{Object.entries(J).forEach((Z)=>{const[q,Y]=Z,G=Y.value;if(!f.currentIs("run"))return;IX(X,q,G)})});X.effects.push(Q)},a0=(X)=>{if(!X||typeof X==="string")return document.createTextNode(pX(X||""));if(y(X)){const $=X();if(!t($))throw new Error(`Invalid MHtml element getter child. Type: ${typeof X}`);return $}throw new Error(`Invalid child. Type of child: ${typeof X}`)},qX=(X,$,J)=>{const Q=X.childNodes[J],Z=a0($);if(Q&&Z)X.replaceChild(Z,Q);else if(Z)X.appendChild(Z);else console.error(`No child found for node with tagName: ${X.tagName}`)},t0=(X,$)=>{if(!$)return;if(sX($)){const Z=u(()=>{const q=$.value,Y=jX(q)?q:[q];Y.forEach((R,U)=>qX(X,R,U));const G=Y.length;while(G<X.childNodes.length){const R=X.childNodes[G];if(R)X.removeChild(R)}});X.effects.push(Z)}const J=y($)?[$]:XX($)?y($.value)?[$.value]:rX($.value)?$.value:[]:nX($)?$.map((Z)=>RX(Z)?Z:iX(Z)?Z.value:Z):[],Q=[];if(J.forEach((Z,q)=>{if(RX(Z))Q.push({index:q,signalChild:Z});const Y=z(Z);qX(X,Y,q)}),Q.length)Q.forEach(({index:Z,signalChild:q})=>{const Y=u(()=>{const G=q.value;if(!f.currentIs("run"))return;qX(X,G,Z)});X.effects.push(Y)})},e0=(X,$)=>{let J=void 0;const Q={},Z={};return Object.entries(X).forEach(([q,Y])=>{if(q==="children")if(lX(Y))J=Y;else throw new Error(`Invalid children prop for node with tagName: ${$}\n\n ${JSON.stringify(Y)}`);else if(s0(q,Y))Q[q]=Y;else Z[q]=Y}),{children:J,eventProps:Q,attributeProps:Z}},X1=(X,$)=>{const J=()=>{const Q=dX.getNewId(),Z=f.currentIs("mount")?document.querySelector(`[data-elem-id="${Q}"]`):document.createElement(X);Z.elementId=Q,Z.effects=[],Z.unmountListener=()=>{Z.effects.forEach((G)=>G.dispose())};const q=lX($)?{children:$}:$;if(!f.currentIs("run"))q["data-elem-id"]=Z.elementId.toString();const Y=e0(q,Z.tagName);if(n0(Z,Y.eventProps),l0(Z,Y.attributeProps),t0(Z,Y.children),!f.currentIs("build"))Z.removeAttribute("data-elem-id");return Z};return J.isElementGetter=!0,J},VX=(X,$,J)=>{const Q=S($),Z=S(X),q=J(_(()=>Z.value),_(()=>Q.value));let Y,G,R=!1;if(q?.isElementGetter)Y=()=>{if(R&&G)return G;return G=q(),R=!0,G},Y.isElementGetter=!0;else if(!q||typeof q==="string")Y=q||"";else throw`One of the child, ${q} passed in ForElement is invalid.`;return{indexSignal:Q,itemSignal:Z,mappedChild:Y}},YX=(X,$,J)=>{if($!==void 0&&$>=0&&J){const Q=$>X.length?X.length:$;X.splice(Q,0,J)}return X},$1=({subject:X,itemKey:$,map:J,n:Q,nthChild:Z})=>{if(Z&&Q===void 0||Q!==void 0&&Q>-1&&!Z)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let q=Z;if(Z&&typeof Z!=="string"){const P=Z(),L=()=>P;L.isElementGetter=!0,q=L}if(!g(X))return YX(z(X).map(J),Q,q);const Y=_(()=>{const P=z(X);return Array.isArray(P)?P:[]});if(!$)return _(()=>YX(Y.value.map(J),Q,q));const G=Y.value;if(G.length&&typeof G[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let R=null;const U=_((P)=>{return R=P||R,Y.value}),B=_((P)=>{if(!P||!R)return U.value.map((T,M)=>VX(T,M,J));return E0(R,U.value,$).map((j,T)=>{const M=(P||[])[j.oldIndex];if(console.assert(j.type==="add"&&j.oldIndex===-1&&!M||j.oldIndex>-1&&!!M,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),M){if(j.type==="shuffle")M.indexSignal.value=T;if(j.type==="update")M.indexSignal.value=T,M.itemSignal.value={...j.value};return M}return VX(j.value,T,J)})});return _(()=>YX(B.value.map((P)=>P.mappedChild),Q,q))},Q1=({subject:X,isTruthy:$,isFalsy:J})=>{const Q=W.Span({style:"display: none;"}),Z=()=>z(X)?$?$(X):Q:J?J(X):Q;return g(X)?_(Z):Z()},J1=({subject:X,caseMatcher:$,defaultCase:J,cases:Q})=>{const Z=()=>{const q=z(X),Y=z(Q);let G=void 0;for(let[R,U]of Object.entries(Y)){const B=$&&$(q,R),K=`${q}`===R;if(B||K){G=U();break}}return G||J&&J()||W.Span({style:"display: none;"})};return g(X)?_(Z):Z()},Z1=g0.reduce((X,$)=>{const J=$.split("").map((Z,q)=>!q?Z.toUpperCase():Z).join(""),Q=(Z)=>X1($,Z);return X[J]=Q,X},{}),q1={For:$1,If:Q1,Switch:J1},W={...Z1,...q1},Y1=(X)=>{const $=z(X);return Array.isArray($)&&$.some((J)=>$X(J))},H=(X)=>($)=>{for(let Q of Object.keys($))if($[Q]===void 0)delete $[Q];const J=Object.entries($).reduce((Q,Z)=>{const[q,Y]=Z,G=g(Y)||typeof Y==="function"?Y:Y1(Y)?z(Y):D0(z(Y));return Q[q]=G,Q},{});return X(J)},W1=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],z1=[1,1,1,1,1,1,1],G1=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],R1=["Not started","Completed"],_1=[70,60,45],yX={id:"analytics",lastInteraction:(new Date()).getTime()},gX=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var _X=86400000,U1=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],B1=["January","February","March","April","May","June","July","August","September","October","November","December"],$0=(X,$)=>U1[X].substring(0,$),Q0=(X,$)=>B1[X].substring(0,$),NX=(X)=>{return new Date(X.getFullYear(),X.getMonth(),X.getDate())},b=(X)=>NX(X).getTime(),o=(X,$)=>b(X)===b($),F1=(X,$)=>{const J=$||new Date;return b(X)>b(J)},J0=(X,$)=>{const J=b(X),Q=b($);return Math.round((Q-J)/_X)},K1=(X)=>J0(new Date,X),Z0=(X,$)=>new Date(X.getFullYear(),X.getMonth(),X.getDate()+$),P1=(X)=>{const $=new Date;return Array(X).fill(0).map((J,Q)=>new Date($.getFullYear(),$.getMonth()-Q,1)).reverse()},H1=(X)=>{const $=X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()-$)},A1=(X)=>{const $=6-X.getDay();return new Date(X.getFullYear(),X.getMonth(),X.getDate()+$)},j1=(X,$)=>{const J=b(X),Q=b($);if(J===Q)return[NX(new Date(J))];const Z=J<Q?J:Q,Y=((J<Q?Q:J)-Z)/_X;return Array(Y+1).fill(0).map((G,R)=>new Date(Z+R*_X))},N1=(X)=>{if(X<1)throw"";const $=new Date,J=$.getFullYear(),Q=$.getMonth(),Z=new Date(J,Q-(X-1),1),q=new Date(J,Q+1,0);return{startDate:Z,endDate:q}},LX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},L1=(X)=>location.href=X,x1=()=>location.href=LX.HABITS.NEW.href,M1=(X)=>location.href=`${LX.HABITS.HABIT.href}?id=${X}`,T1=(X)=>location.href=`${LX.HABITS.HABIT.EDIT.href}?id=${X}`,E1=(X)=>{if(!f.currentIs("run"))return"";const $=window.location.search;return new URLSearchParams($).get(X)||""},w1=1.6181,k1=()=>{const $=+E1("id");if(isNaN($)||!$)return;try{return EX($)}catch(J){return}},D1=(X)=>G1.find(($)=>$.code===X),q0=(X,$)=>{return X<0?D1(-1):{isMaxLevel:X===$.length-1,name:$[X],code:X}},O1=(X)=>({key:X.getTime(),level:q0(-1,[]),date:X}),f1=(X,$,J)=>({key:J.getTime(),level:q0(X,$),date:J}),Y0=(X,$)=>X.find((J)=>o(J.date,$)),W0=(X)=>{const $=NX(new Date(X.id));return{...X,startDate:$,levels:X.levels.map((J,Q)=>({isMaxLevel:Q===X.levels.length-1,name:J,code:Q})),tracker:X.tracker.map((J,Q)=>f1(J,X.levels,Z0($,Q))),milestones:V1(X.milestones)}},S1=(X)=>{return{...X,levels:X.levels.map(($)=>$.name),tracker:X.tracker.map(($,J)=>$.level.code),milestones:y1(X.milestones)}},I1=()=>{const $={id:(new Date()).getTime(),title:"",frequency:z1,colorIndex:0,levels:R1,tracker:[],milestones:_1,pauses:[],isStopped:!1};return W0($)},V1=(X)=>[{label:"Successful",upperLimit:100,percent:X[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:X[0],percent:X[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:X[1],percent:X[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:X[2],percent:0,icon:"close",color:"red"}],y1=(X)=>X.filter(($)=>!!$.percent).map(($)=>$.percent),z0=(X,$)=>{let J=X[0];for(let Q=0;Q<X.length;Q++)if(J=X[Q],J.percent<=$)break;return{label:J.label,icon:J.icon,color:J.color}},xX=(X,$,J)=>{const Q=MX(X.tracker,$,J),Z=X.levels.length-1;let q=0,Y=0,G=0,R=0,U=0,B=0;return Q.forEach((K,P)=>{if(q+=K.level.code>-1?1:0,Y+=K.level.code>0?1:0,G+=K.level.code>0?K.level.code:0,P===Q.length-1)return;const j=K.level.code<1;B=j?B+1:0;const M=100*((K.level.code>0?K.level.code:0)/(X.levels.length-1));R=Math.round(M)>50?R+1:0,U=j?0:U+1}),{title:X.title,aceStreak:R,followStreak:U,missed:B,percent:Math.round(100*(G/(q*Z))),totalDays:q,workingDays:Y}},g1=(X,$,J,Q=!1)=>{const Z=W1[J],q=X/($-1),G=Math.trunc(Math.pow(q,w1)*255).toString(16),R=G.length===1?`0${G}`:G,U=X<0||R==="0"?"transparent":`${Z}${R}`,B=Q?X/($-1)>0.5?"white":"black":X<0?"lightgray":"transparent";return{backgroundColor:U,fontColor:B,peakBackgroundColor:Z,levelPercent:Math.round(q*100)}},C1=(X,$,J)=>{const Q=EX(X.id),Z=Q.tracker.map((Y)=>{if(o(Y.date,J))return{...Y,level:{...Y.level,code:$}};return Y}),q={...Q,tracker:Z};e1(q)},b1=(X,$)=>{const J=[];for(let Q of $)if(!X.some((q)=>{if(o(q.date,Q))return J.push(q),!0;return!1}))J.push(O1(Q));return J},MX=(X,$,J)=>{const Q=j1($,J);return b1(X,Q)},h1=(X)=>{const $=H1(new Date(X.id)),J=A1(new Date),Q=MX(X.tracker,$,J);return{...X,tracker:Q}},G0=(X)=>{const $=h1(X),J=[];for(let Q=0;Q<$.tracker.length;Q++){const Z=Math.floor(Q/7);if(!J[Z])J[Z]=[];J[Z][Q%7]=$.tracker[Q]}return J.reverse(),J},v1=(X)=>{const $=new Date,J=new Date(X),Q=-K1(J);if(Q===0)return"Just created this habit today";if(Q===1)return"This habit started from yesterday";if(Q>1&&Q<5)return`Started following this ${Q} back`;const{aceStreak:Z,followStreak:q,missed:Y}=xX(EX(X),Z0($,-Q),$);if(Z>=12)return`Nailed ${Z} days in a row. Woah! Don't stop.`;if(Z>=4)return`Doing good for ${Z} days straight! Keep it up.`;if(q>=15)return`Didn't miss for ${q} days in a row. Kudos!`;if(q>=4)return`${q} days in a row. Nice! keep going.`;if(Y)`Missed ${Y} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},c1=(X)=>{const $=X.levels.map((q)=>0),J=X.tracker.reduce((q,Y)=>{if(Y.level.code>-1)q[Y.level.code]=q[Y.level.code]?q[Y.level.code]+1:1;return q},$),Q=J.reduce((q,Y)=>q+Y),Z=J.map((q,Y)=>({level:X.levels[Y],count:q,weightage:q*(Y/(X.levels.length-1)),percent:Math.round(100*q/Q)}));return Z.reverse(),Z},m1=(X)=>{return`${X.reduce(($,J)=>$+J.weightage,0).toFixed(1)} / ${X.reduce(($,J)=>$+J.count,0)}`},p1=(X)=>[{label:"Today",icon:"calendar_month",isSelected:X==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:X==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:X==="/settings/",href:"/settings/"}],d1=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},R0=(X,$,J)=>{const Q=JSON.parse(X||"{}"),Z=Q&&typeof Q==="object",q=Q[$];if(!Z||!(J?q===J:!!q))return;return Q},w=(X)=>{return(...$)=>{return d1(),a1(new Date),X&&X(...$)}},_0="analytics",u1="id",r1="analytics",U0=(X)=>{localStorage.setItem(_0,JSON.stringify(X))},o1=()=>{if(!f.currentIs("run"))return yX;const X=()=>{const Q=localStorage.getItem(_0);return R0(Q,u1,r1)};if(!X())U0(yX);const J=X();if(!J)throw"Error fetching analytics";return J},i1=()=>{const X=[];for(let $ in localStorage){if(!localStorage.hasOwnProperty($))continue;X.push($)}return X},s1=(X)=>X.startsWith("h."),TX=(X)=>`h.${X}`,B0=(X)=>{if(!s1(X))return;const $=localStorage.getItem(X),J=R0($,"title");if(!J)return;return J},n1=()=>{if(!f.currentIs("run"))return[];const X=[];for(let $ of i1()){const J=B0($);if(!J)continue;X.push(J)}return X},F0=(X)=>{const $=TX(X.id);localStorage.setItem($,JSON.stringify(X))},l1=(X)=>{const $=TX(X);localStorage.removeItem($)},a1=(X)=>{const $=o1();U0({...$,lastInteraction:X.getTime()})},EX=(X)=>{const $=TX(X),J=B0($);if(!J)throw`Error fetching habit with id '${X}' from storage`;return W0(J)},t1=()=>{const X=n1();for(let $ of X){const J=new Date($.id),Q=new Date,Z=J0(J,Q),q=[...$.tracker];if(Z+2<=q.length)continue;const Y=q.length-1,G=new Date(J.getFullYear(),J.getMonth(),J.getDate()+Y),R=G.getDay();if(o(Q,G)){const U=q[Y];q[Y]=$.frequency[R]?U<0?0:U:-1}for(let U=q.length;U<=Z;U++){const K=new Date(J.getFullYear(),J.getMonth(),J.getDate()+U).getDay();q[U]=$.frequency[K]?0:-1}$.tracker=q,F0($)}},e1=(X)=>{const $=S1(X);F0($)},X5=(X)=>l1(X),w5=H(({cssClasses:X,hideRemove:$,hideAdd:J,onRemove:Q,onAdd:Z})=>{const q=E($).and(J).ternary("bn","ba"),Y=F`br3 pb1 f4 bw1 b--light-silver dark-gray ${q} ${X}`,G=E(J).ternary("","br"),R=F`pointer ph2 pb1 bw1 b--light-silver ${G}`,U=()=>N(q,Y,G,R);return W.Span({onunmount:U,class:Y,children:[W.If({subject:$,isFalsy:()=>W.Span({class:R,onclick:w(Q),children:"-"})}),W.If({subject:J,isFalsy:()=>W.Span({class:"pointer ph2 pb1",onclick:w(Z),children:"+"})})]})}),h=H(({cssClasses:X,onTap:$,onUnmount:J,children:Q})=>{const Z=F`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${X}`,q=()=>{if(N(Z),J)J()};return W.Button({onunmount:q,class:Z,onclick:w(()=>$()),children:Q})}),k5=H(({cssClasses:X})=>{const $=F`bb b--light-gray ${X}`;return W.Div({onunmount:()=>N($),class:$})}),V=H(({cssClasses:X,size:$,onClick:J,iconName:Q,title:Z})=>{const Y=F`material-symbols-outlined ${J?"pointer":""} ${X}`,G=x($).or(16),R=F`font-size: ${G}px`;return W.Span({onunmount:()=>N(Y,G,R),class:Y,style:R,onclick:w(J),children:Q,title:Z})}),D5=H(({cssClasses:X,href:$,target:J,onClick:Q,children:Z})=>{const q=E($).or(Q).ternary("pointer underline",""),Y=F`w-fit-content noselect ${q} ${X}`;return W.A({onunmount:()=>N(q,Y),...$?{href:$}:{},class:Y,target:J,onclick:w(Q),children:Z})}),QX=H(({cssClasses:X,isOpen:$,content:J,onTapOutside:Q,onUnmount:Z})=>{const q=F`pa0 br3 ${X}`,Y=(R)=>{setTimeout(()=>u(()=>{if($.value)R.showModal();else R.close()}))},G=()=>{if(N(q),Z)Z()};return W.Dialog({onmount:Y,onunmount:G,onclick:w(Q),class:q,children:[W.Div({onclick:(R)=>R.stopPropagation(),children:J})]})}),O5=H(({cssClasses:X,placeholder:$,num:J,onchange:Q})=>{const Z=x(J).string,q=(Y)=>{const G=Y.target.value,R=Number.parseFloat(Number.parseFloat(G||"0").toFixed(2));Q(R)};return W.Input({onunmount:()=>N(Z),class:X,type:"number",placeholder:$,value:Z,onchange:q})}),$5=H(({progress:X,cssClasses:$})=>{const J=F`br-pill bg-moon-gray ${$}`,Q=F`width: ${x(X).toConfined(0,100)}%;`;return W.Div({onunmount:()=>N(J,Q),class:J,children:W.Div({class:"br-pill bg-app-theme-color pa1",style:Q})})}),K0=H(({cssClasses:X,header:$,content:J,bottombar:Q})=>{const Z=F`w6-ns ${X}`;return W.Div({onunmount:()=>N(Z),class:"flex-ns justify-center-ns",children:W.Div({class:Z,children:[W.If({subject:$,isTruthy:()=>W.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:$})}),J,W.Div({class:"pv6 mt5"}),W.If({subject:Q,isTruthy:()=>W.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:Q})})]})})}),f5=H(({cssClasses:X,tabs:$,onTabChange:J})=>{const Q=F`bg-white br3 ${X}`,Z=x($).map((q)=>{return{tabClasses:`
                w-100 br3 pv2dot5 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${q.isSelected?`b--light-silver b black ${q.classes||""}`:"pointer b--transparent b--hover-black silver pointer"} ${q.classes}`,label:q.label}});return W.Div({onunmount:()=>N(Q,Z),class:Q,children:W.Div({class:"flex items-center justify-between pa1",children:W.For({subject:Z,itemKey:"label",map:(q,Y)=>{const{tabClasses:G,label:R}=x(q).props;return W.Span({onunmount:()=>N(G,R),onclick:w(()=>J(Y.value)),class:G,children:R})}})})})}),S5=H(({cssClasses:X,placeholder:$,disabled:J,text:Q,onmount:Z,onchange:q,onkeydown:Y,onfocus:G,onblur:R})=>{let U;const B=E(J).truthy,K=(j)=>{if(U=j,Z)Z(j)},P=(j)=>{const T=j.target.value;if(q)q(T)},L=(j)=>{const T=j.key.length===1?U.value+j.key:j.key==="Backspace"?U.value.slice(0,-1):U.value,M={key:j.key,text:T};if(Y)Y(M)};return W.Input({onmount:K,onunmount:()=>N(B),class:X,type:"text",placeholder:$,disabled:B,value:Q,onchange:P,onkeydown:L,onfocus:G,onblur:R})}),I5=H(({cssClasses:X,isOn:$,onToggle:J})=>{const Q=F`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${X}`,q=F`${"br-100 ba bw1 b--hover-black pa1"} ${()=>$.value?"b--transparent":"b--moon-gray bg-moon-gray"}`,Y=F`${"br-100 ba bw1 b--hover-black pa1"} ${()=>$.value?"b--mid-gray bg-mid-gray":"b--transparent"}`;return W.Div({onunmount:()=>N(Q,q,Y),class:Q,onclick:w(J),children:[W.Div({class:q}),W.Div({class:"pa05"}),W.Div({class:Y})]})}),Q5=H(({cssClasses:X,justifyCssClasses:$,label:J})=>{const Q=x($).or("justify-end"),Z=x(J).or("Add habit"),q=F`w-100 flex ${Q} ${X}`;return W.Div({onunmount:()=>N(Q,Z,q),class:q,children:h({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[V({cssClasses:"nl1 mr1",size:22,iconName:"add"}),Z],onTap:x1})})}),i=H(({cssClasses:X,dotCssClasses:$,colorIndex:J,level:Q,totalLevels:Z,showText:q,textContent:Y,icon:G,iconSize:R,isRectangular:U,showHeight:B,onClick:K})=>{const P=E(U).ternary("br0","br-100"),L=E(Q).isLT(0).ternary("bg-transparent","bg-light-gray"),j=O(g1,Q,Z,J,q),{peakBackgroundColor:T,backgroundColor:M,fontColor:k,levelPercent:D}=x(j).props,C=x(Y).or("\u0387"),c=E(B).and(G).andThisIsGT(D,99).truthy,JX=F`pointer relative overflow-hidden ${P} ${L} ${X}`,s=F`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${$}`,ZX=F`
      background-color: ${T};
      color: white;
      height: ${D}%;`,kX=F`flex items-center justify-around absolute absolute--fill ${$}`,DX=F`
      background-color: ${M};
      color: ${k};`,N0=()=>{if(K&&Q.value>=0)K()},L0=()=>{N(P,L,j,T,M,k,D,C,c,JX,s,ZX,kX,DX)};return W.Span({onunmount:L0,class:JX,onclick:w(N0),children:W.If({subject:B,isTruthy:()=>W.Span({class:s,style:ZX,children:W.If({subject:c,isTruthy:()=>V({iconName:G,size:R})})}),isFalsy:()=>W.Span({class:kX,style:DX,children:W.If({subject:G,isTruthy:(x0)=>V({iconName:x0,size:R}),isFalsy:()=>W.Span(C)})})})})}),V5=H(({habit:X,day:$,onColorDotClick:J})=>{const{id:Q,title:Z,colorIndex:q,levels:Y,tracker:G}=x(X).props,R=x(Y).length,U=_(()=>{return Y0(G.value,$.value).level.code}),B=E(U).isGT(0).truthy,K=E(U).isLT(1).ternary("b--light-silver","b--transparent"),P=F`pa3 mr3 ba b ${K}`,L=()=>N(Q,Z,q,Y,G,R,U,B,K);return W.Div({onunmount:L,class:"mt4 flex items-center",children:[i({cssClasses:P,colorIndex:q,level:U,totalLevels:R,icon:"check",iconSize:22,showText:B,showHeight:!0,onClick:J}),W.Div({class:"pointer",onclick:w(()=>M1(Q.value)),children:[W.Div({class:"f5 fw6 f4-ns fw4-ns",children:Z}),W.Div({class:"f6 light-silver pt05",children:v1(Q.value)})]})]})}),J5=H(({cssClasses:X})=>{const $=F`pa3 flex items-center ${X}`;return h({onUnmount:()=>N($),cssClasses:$,children:[V({iconName:"arrow_back"}),W.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),Z5=H(({cssClasses:X,milestones:$,achievedMilestone:J,completionPercent:Q})=>{const Z=x(J).prop("color"),q=O((P)=>P>53?"Average completion":P>43?"Avg completion":P>35?"Completion":"",Q),Y=F`center ${X}`,G=F`nt3dot6 h1dot2 bw1 relative br b--${Z}`,R=F`width: ${Q}%;`,U=F`absolute right-0 pr1 b f6 ${Z}`,B=F`${Q}%`,K=()=>N(Z,q,Y,G,R,U,B);return W.Div({onunmount:K,class:Y,children:[W.Div({class:"pb2 w-100 relative",children:W.For({subject:$,map:(P,L)=>{return q5({colorCss:`bg-${P.color}`,percent:P.upperLimit,hideUpperLimit:L===0})}})}),W.Div({class:G,style:R,children:W.Div({class:"relative flex items-start nt1 justify-between f7 mid-gray",children:[W.Div(q),W.Div({class:U,children:B})]})})]})}),q5=H(({colorCss:X,hideUpperLimit:$,percent:J})=>{const Q=E($).ternary("",F`${J}%`),Z=F`width: ${J}%;`,q=F`absolute absolute-fill h0dot15 w-100 ${X}`;return W.Div({onunmount:()=>N(Q,Z,q),class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:Z,children:[W.Div({class:q}),W.Div({class:"flex justify-end w-100 pt2 f7",children:W.Div({class:"nr3 pb2 light-silver b",children:Q})})]})}),Y5=H(({cssClasses:X,habit:$,date:J,colorIndex:Q,totalLevels:Z})=>{const q=_(()=>{const U=J.value.getFullYear(),B=J.value.getMonth(),K=new Date(U,B,1),P=new Date(U,B+1,0);return MX($.value.tracker,K,P).map((L)=>({...L,level:L.level.code}))}),Y=F`flex items-center ${X}`,G=_(()=>Q0(J.value.getMonth(),3)),R=()=>N(q,Y,G);return W.Div({onunmount:R,class:Y,children:[W.Div({class:"f8 b w2 light-silver",children:G}),W.Div({class:"w-100 flex items-center justify-between",children:W.For({subject:q,itemKey:"key",map:(U)=>{const B=x(U).prop("level");return i({cssClasses:"pa1",colorIndex:Q,level:B,totalLevels:Z})}})})]})}),y5=H(({cssClasses:X,habit:$,months:J,onClick:Q})=>{const{milestones:Z,title:q,colorIndex:Y,levels:G}=x($).props,R=O((k,D)=>{const{startDate:C,endDate:c}=N1(k);return xX(D,C,c).percent},J,$),U=O(z0,Z,R),{icon:B,color:K}=x(U).props,P=O((k)=>P1(k).map((D)=>({monthFirstDate:D,index:D.getTime()})),J),L=F`pointer bg-white ${X}`,j=F`mr1 ${K}`,T=F`${R}%`,M=()=>{N(Z,q,Y,G,R,U,B,K,P,L,j,T)};return W.Div({onunmount:M,class:L,onclick:w(Q),children:[W.Div({class:"flex items-center justify-between nt1 mb2",children:[W.Div({class:"f5 dark-gray b",children:q}),W.Div({class:"f6 silver b flex items-center",children:[V({cssClasses:j,iconName:B}),T]})]}),W.Div({class:"mt2 mb1",children:W.For({subject:P,itemKey:"index",map:(k)=>{return Y5({cssClasses:"mb1",habit:$,date:x(k).prop("monthFirstDate"),colorIndex:Y,totalLevels:G.value.length})}})})]})}),g5=H(({cssClasses:X})=>{const $=F`flex flex-column items-center justify-around ${X}`;return W.Div({onunmount:()=>N($),class:$,children:[W.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),W.Div("Looks like, you just landed here!"),Q5({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),W5=H(({isOpen:X,habit:$,onClose:J,onDone:Q})=>{const Z=F`Delete '${()=>$.value.title}'?`,q=()=>{X5($.value.id),Q()};return QX({onUnmount:()=>N(Z),cssClasses:"bn w-30-ns",isOpen:X,onTapOutside:J,content:W.Div({class:"pa3 f5",children:[W.Div({class:"mb3 b f4",children:Z}),W.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,W.Br({}),W.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),W.Div({class:"flex items-center justify-between f6",children:[h({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:J}),h({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:q})]})]})})}),z5=H(({isOpen:X,habit:$,date:J,showTitleInHeader:Q,onClose:Z,onChange:q})=>{const{title:Y,levels:G,tracker:R,colorIndex:U}=x($).props,B=_(()=>Q?.value?`Change status of  '${Y.value}'`:`Change status for ${J.value.toDateString()}`),K=O(Y0,R,J),P=x(G).length,L=_(()=>{const T=[...G.value];return T.reverse(),T.map((M,k)=>{const D=P.value-1-k,c=`pointer flex items-center pv3 pa3 bt b--moon-gray ${K.value?.level.code===D?"bg-near-white black fw6":"gray fw5"}`,s=`pa1 mr3 ba b ${D<1?"b--light-silver":"b--transparent"}`;return{levelName:M.name,levelCode:D,levelTileCSS:c,dotClasses:s}})});return QX({onUnmount:()=>N(Y,G,R,U,B,K,P,L),cssClasses:"f5 normal ba bw0 outline-0",isOpen:X,onTapOutside:Z,content:W.Div({class:"mnw5",children:[W.Div({class:"f5 b tc pa3",children:B}),W.Div({class:"f5 mb1",children:W.For({subject:L,map:(T)=>{const{levelName:M,levelCode:k,levelTileCSS:D,dotClasses:C}=x(T).props;return W.Div({onunmount:()=>N(M,k,D,C),class:D,onclick:w(()=>q(k.value)),children:[i({cssClasses:C,colorIndex:U,level:k,totalLevels:G.value.length,isRectangular:!0}),W.Span(M)]})}})})]})})}),C5=H(({isOpen:X,habit:$,onClose:J,onDone:Q})=>{const Z=F`Stop '${()=>$.value.title}'?`;return QX({onUnmount:()=>N(Z),cssClasses:"bn",isOpen:X,onTapOutside:J,content:W.Div({class:"pa3 f5",children:[W.Div({class:"mb3 b f4",children:Z}),W.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",W.Br({}),W.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),W.Div({class:"flex items-center justify-between f6",children:[h({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:J}),h({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:Q})]})]})})}),G5=H(({cssClasses:X,links:$})=>{const J=F`flex items-center justify-between pv3 bg-near-white ${X}`;return W.Div({onunmount:()=>N(J),class:J,children:W.For({subject:$,map:(Q)=>R5({label:Q.label,icon:Q.icon,isSelected:Q.isSelected,href:Q.href})})})}),R5=H(({cssClasses:X,label:$,icon:J,isSelected:Q,href:Z})=>{const q=E(Q).ternary("app-theme-color b","black"),Y=F`pointer noselect flex flex-column items-center justify-center pb2 ${q} ${X}`;return W.Div({onunmount:()=>N(q,Y),class:Y,onclick:w(()=>L1(Z.value)),children:[V({size:22,iconName:J}),W.Div({class:"f7",children:$})]})}),b5=H(({cssClasses:X,header:$,content:J,navbarTop:Q,route:Z})=>{return K0({cssClasses:X,header:$,content:J,bottombar:W.Div({children:[W.If({subject:Q,isTruthy:()=>Q}),G5({cssClasses:"nl3 nr3 ph4",links:O(p1,Z)})]})})}),_5=H(({cssClasses:X,body:$,onMount:J,onUnMount:Q})=>{const Z=S("stylesheet");return W.Html({lang:"en",children:[W.Head({onmount:()=>Z.value="stylesheet",children:[W.Meta({"http-equiv":"Content-Security-Policy",content:`
                default-src 'self';
                script-src 'self';
                style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
                font-src https://fonts.gstatic.com;
                object-src 'none';
                base-uri 'none';
              `}),W.Meta({charset:"UTF-8"}),W.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),W.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),W.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),W.Link({rel:Z,href:"/assets/styles.css",as:"style"}),W.Link({rel:"manifest",href:"/manifest.json"}),W.Title("Habits (by Cyfer)")]}),W.Body({tabindex:"-1",class:X,onmount:J,onunmount:Q,children:[W.Script({src:"main.js",defer:!0}),$]})]})}),CX=H(({cssClasses:X,contentCssClasses:$,title:J,description:Q,hideDescription:Z,children:q})=>{const Y=F`mt3 mb4 ${X}`,G=E(Q).andNot(Z).truthy;return W.Div({onunmount:()=>N(Y,G),class:Y,children:[W.Div({class:"mb2 dark-gray f4 b",children:J}),W.If({subject:G,isTruthy:()=>W.Div({class:"mb3 f6 silver fw5",children:Q})}),W.Div({class:$,children:q})]})}),h5=H(({cssClasses:X,iconSize:$,selectedOptionIndex:J,onChange:Q})=>{const Z=S(!1),q=_(()=>gX[J.value]),Y=x(q).prop("decending"),G=x(q).prop("icon"),R=x($).or(20),U=()=>Z.value=!0,B=()=>Z.value=!1,K=(L)=>L===q.value.label?"bg-near-white black fw6":"gray fw5",P=(L)=>{Q(L),B()};return W.Div({onunmount:()=>N(q,Y,G,R),class:X,children:[bX({cssClasses:"pointer",descending:Y,iconName:G,size:R,onClick:U}),QX({cssClasses:"f5 normal ba bw0 outline-0",isOpen:Z,onTapOutside:B,content:W.Div({children:[W.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),W.Div({class:"f5 mb1",children:W.For({subject:gX,map:(L,j)=>W.Div({class:`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${K(L.label)}`,onclick:w(()=>P(j)),children:[bX({cssClasses:"ml1 mr2",descending:L.decending,iconName:L.icon,size:20}),W.Span(L.label)]})})})]})})]})}),bX=H(({cssClasses:X,descending:$,iconName:J,size:Q,onClick:Z})=>{const q=Z?"pointer":"",Y=E($).ternary("arrow_upward","arrow_downward"),G=E(Q).mul(4).div(5).result;return W.Span({class:F`flex items-center ${q} ${X}`,onclick:w(Z),children:[V({cssClasses:"silver",iconName:Y,size:G}),V({size:Q,iconName:J})]})}),v5=H(({cssClasses:X,progress:$})=>{const J=F`flex flex-column justify-center items-center vh-100 ${X}`;return W.Div({onunmount:()=>N(J),class:J,children:[W.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),W.Div({class:"f3 b mv3",children:"Habits"}),$5({cssClasses:"w-40",progress:$}),W.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),c5=H(({date:X,selectedDate:$,onChange:J})=>{const Q=O(F1,X),Z=O(o,$,X),q=E(Q).ternary("light-gray b--transparent","light-silver pointer b--transparent"),Y=E(Z).ternary("black b b--silver",q),G=F`bw1 ba br-pill ph2 pv3 pb2 tc ${Y}`,R=_(()=>$0(X.value.getDay(),3)),U=_(()=>("0"+X.value.getDate()).slice(-2)),B=()=>{if(Z.value||Q.value)return;J(X.value)},K=()=>N(Q,Z,q,Y,G,R,U);return W.Div({onunmount:K,class:G,onclick:w(B),children:[W.Div({class:"f7 ",children:R}),W.Div({class:"mt2 f4",children:U})]})}),U5=H(({cssClasses:X,habit:$,onDateClick:J})=>{const Q=O(G0,$),{colorIndex:Z,levels:q}=x($).props;return W.Div({class:X,children:[W.Div({class:"mb2 flex items-center justify-between",children:W.For({subject:Array(7).fill(0),map:(Y,G)=>W.Div({class:"h2 w2 br-100 gray f7 flex items-center justify-center",children:$0(G,1)})})}),W.Div({children:W.For({subject:Q,map:(Y)=>W.Div({class:"flex items-center h-60",children:[W.Div({class:"w-100 mb3 flex items-center justify-between",children:W.For({subject:Y,map:(G)=>{const R=G.date.getDate(),U=G.date.getMonth(),B=Q0(U,3),K=`${R===1?U===0?G.date.getFullYear().toString():B:R}`;return i({cssClasses:"h2 w2 flex items-center justify-center f7",colorIndex:Z,level:G.level.code,totalLevels:q.value.length||2,textContent:K,showText:G.level!==void 0,onClick:()=>J(G)})}})})]})})})]})}),UX=S(""),I=S(I1()),{id:P0,title:hX,colorIndex:B5,levels:F5,milestones:BX,isStopped:WX}=x(I).props,d=S(!1),wX=S(!1),l=S(!1),FX=S({date:new Date,selectedLevelIndex:0}),H0=O(c1,I),K5=O(m1,H0),KX=_(()=>xX(I.value,new Date(P0.value),new Date).percent),A0=O(z0,BX,KX),{icon:P5,label:H5,color:A5}=x(A0).props,m5=O(G0,I),PX=()=>{const X=k1();if(!X){UX.value="Incorrect habit ID provided in the query params.";return}I.value=X},j5=()=>wX.value=!0,j0=()=>wX.value=!1,N5=()=>{j0(),history.back()},L5=(X)=>{if(!I.value)return;C1(I.value,X,FX.value.date),l.value=!1,PX()},x5=()=>{t1(),PX(),window.addEventListener("pageshow",PX)},M5=_5({onMount:x5,body:K0({cssClasses:"bg-white ph3",header:W.Div({class:"flex items-start justify-between",children:[W.Div({class:E(hX).lengthGT(22).ternary("f2dot66",""),children:hX}),W.If({subject:WX,isFalsy:()=>V({cssClasses:"mt1 mr1 ba b--silver bw1 br-100 pa1 noselect",size:18,iconName:"edit",onClick:()=>T1(P0.value)})})]}),content:W.Div({children:[W5({isOpen:wX,habit:I,onClose:j0,onDone:N5}),z5({isOpen:l,habit:I,date:x(FX).prop("date"),onClose:()=>l.value=!1,onChange:L5}),W.If({subject:UX,isTruthy:()=>W.Div({class:"red",children:UX}),isFalsy:()=>W.Div(W.If({subject:I,isFalsy:()=>W.Div({class:"",children:"habit.."}),isTruthy:()=>W.Div({children:[W.If({subject:WX,isTruthy:()=>W.Div([W.Div({class:"red mb3",children:"Status: STOPPED PERMANENTLY"}),h({cssClasses:"pv2 ph3 nt2 mb4 red",onTap:j5,children:"Delete Permanently"})])}),CX({cssClasses:"pb3",title:F`Completion status ${()=>d.value?"":`(target ${BX.value[0].percent}%)`}`,children:[W.Div({class:"mt3",children:W.For({subject:H0,n:1/0,nthChild:W.Div({class:"flex items-center justify-between mt2 pt1 bt bw1 b--near-white b mid-gray",children:[W.Div({class:"flex items-center",children:[V({cssClasses:F`mr1 ${A5}`,size:12,iconName:P5}),H5]}),W.Div({class:"flex items-center",children:[K5,W.Span({class:"ml1"}),W.Div(F` (${KX}%)`)]})]}),map:(X)=>W.Div({class:"flex items-center justify-between mb2",children:[W.Div({class:"flex items-center",children:[i({cssClasses:"pa1 mr2",colorIndex:B5,level:X.level.code,totalLevels:F5.value.length,isRectangular:!0}),W.Div(X.level.name)]}),W.Div(`${X.count} times (${X.percent}%)`)]})})}),W.If({subject:d,isTruthy:()=>Z5({cssClasses:"pt4 mt3 mb3",milestones:BX,achievedMilestone:A0,completionPercent:KX})}),h({cssClasses:"pa2 ph3 mt4 mb2",children:F`${E(d).ternary("Hide","Show")} target goal status`,onTap:()=>d.value=!d.value})]}),CX({title:"Tracker",children:U5({habit:I,onDateClick:(X)=>{if(WX.value)return;l.value=!0,FX.value={date:X.date,selectedLevelIndex:X.level.code}}})})]})}))})]}),bottombar:W.Div({class:"pb3",children:J5({})})})}),T5=()=>{f.start("mount"),dX.resetIdCounter(),M5(),f.start("run")};T5();

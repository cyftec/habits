var WQ=(Q)=>{const X=Object.entries(Q).sort((J,$)=>J[0].localeCompare($[0]));return X.forEach(([J,$],q)=>{if($&&typeof $==="object"&&!Array.isArray($))X[q]=[J,WQ($)]}),Object.fromEntries(X)},a=(Q)=>{if(typeof Q!=="object"||Q===null||Array.isArray(Q))return!1;return Object.prototype.toString.call(Q)==="[object Object]"},i=(Q)=>{if(Array.isArray(Q)){const X=[...Q],J=[];return X.forEach(($)=>{J.push(i($))}),J}if(a(Q)){const X={...Q},J={};return Object.keys(X).forEach(($)=>{J[$]=i(X[$])}),Object.freeze(J)}return Q},c=(Q)=>{if(Array.isArray(Q)){const J=[...Q],$=[];return J.forEach((q)=>{$.push(c(q))}),$}if(a(Q)){const J={...Q},$={};return Object.keys(J).forEach((q)=>{$[q]=c(J[q])}),$}return Q},fQ=(Q,X="index")=>Q.map((J,$)=>({[X]:$,value:J})),xX=(Q,X)=>{const J=WQ(Q),$=WQ(X),q=Object.keys(J),Z=Object.keys($);if(q.length!==Z.length)return!1;for(let W of q)if(!Z.includes(W)||!AQ(J[W],$[W]))return!1;return!0},wX=(Q,X)=>{if(Q.length!==X.length)return!1;if(Q.length===0)return!0;for(let J=0;J<Q.length;J++)if(!AQ(Q[J],X[J]))return!1;return!0},AQ=(Q,X)=>{if(typeof Q!==typeof X)return!1;if(Array.isArray(Q))return wX(Q,X);if(Q===null||X===null)return Q===X;if(typeof Q==="object"&&!(Q instanceof Set))return xX(Q,X);if(typeof Q==="bigint"||typeof Q==="number"||typeof Q==="string"||typeof Q==="boolean")return Q===X;return Q===X},DX=(Q,X,J)=>{const q=fQ(c(Q),"index");return fQ(c(X),"index").map((W)=>{let G="add",R=-1;const B=W.value;return q.some((F,K)=>{if(G=AQ(F.value,W.value)?F.index===W.index?"idle":"shuffle":J&&F.value[J]!==void 0&&F.value[J]===W.value[J]?"update":"add",G!=="add")return R=F.index,q.splice(K,1),!0;return!1}),{type:G,oldIndex:R,value:B}})},EX=(Q)=>{const X=(J)=>Q(($)=>{const q=Array.from($);return J(q),q});return{copyWithin:(...J)=>X(($)=>$.copyWithin(...J)),fill:(...J)=>X(($)=>$.fill(...J)),pop:(...J)=>X(($)=>$.pop(...J)),push:(...J)=>X(($)=>$.push(...J)),remove:(...J)=>{const $=J[0],q=(...Z)=>!$(...Z);J[0]=q,Q((Z)=>{return Z.filter(...J)})},reverse:(...J)=>X(($)=>$.reverse(...J)),shift:(...J)=>X(($)=>$.shift(...J)),sort:(...J)=>X(($)=>$.sort(...J)),splice:(...J)=>X(($)=>$.splice(...J)),unshift:(...J)=>X(($)=>$.unshift(...J))}},TX=(Q)=>{return{set:(X)=>Q((J)=>({...J,...X}))}},YQ=null,SQ=(Q)=>YQ=Q,S=(Q)=>{let X=i(Q);const J=new Set,$=()=>{J.forEach((W)=>{if(W.canDisposeNow){J.delete(W);return}W()})},q=(W)=>{X=W,$()},Z={type:"source-signal",get value(){if(YQ)J.add(YQ);return c(X)},set value(W){if(W===X)return;q(i(W))}};return Array.isArray(Q)?Object.assign(Z,EX((W)=>q(W(X)))):typeof Q==="object"&&Q!==null?Object.assign(Z,TX((W)=>q(W(X)))):Z},d=(Q)=>{const X=Q;return X.canDisposeNow=!1,X.dispose=()=>{X.canDisposeNow=!0},SQ(X),Q(),SQ(null),X},U=(Q)=>{let X;const J=S(X),$=d(()=>{X=Q(X),J.value=X});return{type:"derived-signal",get prevValue(){return X},get value(){return J.value},dispose(){$.dispose()}}},L=(...Q)=>{Q.forEach((X)=>X.dispose())},OX=(Q)=>{return{type:"non-signal",value:Q}},z=(Q)=>e(Q)?Q.value:Q,V=(Q)=>["source-signal","derived-signal"].includes(Q?.type),t=(Q,X)=>Q?.type==="non-signal"&&(!X||!X.length||X.some((J)=>typeof Q?.value===J)),e=(Q)=>V(Q)||t(Q),f=(Q,...X)=>{return U(()=>{const J=X.map(($)=>z($));return Q(...J)})},P=(Q)=>{const X=typeof Q==="function"?Q:()=>z(Q);return{...{get truthy(){return U(()=>!!X())},get falsy(){return U(()=>!X())},get truthyFalsyPair(){return U(()=>{const $=!!X();return[$,!$]})},ternary:($,q)=>U(()=>{return X()?z($):z(q)})},or:($)=>P(()=>{return!!(X()||z($))}),orNot:($)=>P(()=>{return!!(X()||!z($))}),and:($)=>P(()=>{return!!(X()&&z($))}),andNot:($)=>P(()=>{return!!(X()&&!z($))}),equals:($)=>P(()=>{return X()===z($)}),notEquals:($)=>P(()=>{return X()!==z($)}),orBothEqual:($,q)=>P(()=>{const Z=X(),W=z($)===z(q);return!!(Z||W)}),orBothUnequal:($,q)=>P(()=>{const Z=X(),W=z($)!==z(q);return!!(Z||W)}),andBothEqual:($,q)=>P(()=>{const Z=X(),W=z($)===z(q);return!!(Z&&W)}),andBothUnequal:($,q)=>P(()=>{const Z=X(),W=z($)!==z(q);return!!(Z&&W)}),orThisIsLT:($,q)=>P(()=>{const Z=X(),W=z($)<z(q);return!!(Z||W)}),orThisIsLTE:($,q)=>P(()=>{const Z=X(),W=z($)<=z(q);return!!(Z||W)}),orThisIsGT:($,q)=>P(()=>{const Z=X(),W=z($)>z(q);return!!(Z||W)}),orThisIsGTE:($,q)=>P(()=>{const Z=X(),W=z($)>=z(q);return!!(Z||W)}),andThisIsLT:($,q)=>P(()=>{const Z=X(),W=z($)<z(q);return!!(Z&&W)}),andThisIsLTE:($,q)=>P(()=>{const Z=X(),W=z($)<=z(q);return!!(Z&&W)}),andThisIsGT:($,q)=>P(()=>{const Z=X(),W=z($)>z(q);return!!(Z&&W)}),andThisIsGTE:($,q)=>P(()=>{const Z=X(),W=z($)>=z(q);return!!(Z&&W)})}},b=(Q)=>{const X=typeof Q==="function"?Q:()=>z(Q);return{...P(Q),get result(){return U(X)},add:(J)=>b(()=>{return X()+z(J)}),sub:(J)=>b(()=>{return X()-z(J)}),mul:(J)=>b(()=>{return X()*z(J)}),div:(J)=>b(()=>{return X()/z(J)}),mod:(J)=>b(()=>{return X()%z(J)}),pow:(J)=>b(()=>{return X()**z(J)}),isBetween:(J,$,q=!0,Z=!0)=>P(()=>{const W=X(),G=z(J),R=z($),B=q?W>=G:W>G,F=Z?W<=R:W<R;return B&&F}),isLT:(J)=>P(()=>X()<z(J)),isLTE:(J)=>P(()=>X()<=z(J)),isGT:(J)=>P(()=>X()>z(J)),isGTE:(J)=>P(()=>X()>=z(J))}},fX=(Q)=>{const X=typeof Q==="function"?Q:()=>z(Q);return{...P(Q),lengthBetween:(J,$,q=!0,Z=!0)=>P(()=>{const G=X().length,R=z(J),B=z($),F=q?G>=R:G>R,K=Z?G<=B:G<B;return F&&K}),lengthEquals:(J)=>P(()=>{return X().length===z(J)}),lengthNotEquals:(J)=>P(()=>{return X().length!==z(J)}),lengthLT:(J)=>P(()=>{return X().length<z(J)}),lengthLTE:(J)=>P(()=>{return X().length<=z(J)}),lengthGT:(J)=>P(()=>{return X().length>z(J)}),lengthGTE:(J)=>P(()=>{return X().length>=z(J)})}},w=(Q)=>{const J=(typeof Q==="function"?Q:()=>z(Q))();return typeof J==="number"?b(Q):typeof J==="string"||Array.isArray(J)?fX(Q):P(Q)},PQ=(...Q)=>Q.map((X)=>z(X)),u=(Q)=>{return{get string(){return U(()=>{const X=z(Q);return X===void 0||X===null?void 0:X.toString()})},or:(X)=>U(()=>z(Q)||z(X))}},SX=(Q)=>{const J=["at","copyWithin","fill","includes","indexOf","join","lastIndexOf","slice","with"].reduce(($,q)=>{const Z=(...W)=>{return U(()=>{const G=PQ(...W);return z(Q)[q](...G)})};return $[q]=Z,$},{});return{...u(Q),...J,concat:($)=>U(()=>z(Q).concat(z($))),every:($)=>U(()=>z(Q).every($)),filter:($)=>U(()=>z(Q).filter($)),find:($)=>U(()=>z(Q).find($)),findIndex:($)=>U(()=>z(Q).findIndex($)),findLast:($)=>U(()=>z(Q).findLast($)),findLastIndex:($)=>U(()=>z(Q).findLastIndex($)),get lastItem(){return U(()=>{return c(z(Q)).pop()})},get length(){return U(()=>z(Q).length)},map:($)=>U(()=>z(Q).map($)),partition:($)=>{const q=U(()=>z(Q).filter($)),Z=U(()=>z(Q).filter((W,G,R)=>!$(W,G,R)));return[q,Z]},reduce:($,q)=>U(()=>z(Q).reduce($,q)),reduceRight:($,q)=>U(()=>z(Q).reduceRight($,q)),get reversed(){return U(()=>z(Q).toReversed())},some:($)=>U(()=>z(Q).every($)),toSorted:($)=>U(()=>z(Q).toSorted($)),toSpliced:($,q,...Z)=>U(()=>z(Q).toSpliced(z($),z(q),...Z))}},IX=(Q)=>{const J=["toExponential","toFixed","toPrecision"].reduce(($,q)=>{const Z=(...W)=>{return U(()=>{const G=PQ(...W);return z(Q)[q](...G)})};return $[q]=Z,$},{});return{...u(Q),...J,toConfined:($,q)=>U(()=>z(Q)<z($)?z($):z(Q)>z(q)?z(q):z(Q)),toLocaleString:($,q)=>U(()=>z(Q).toLocaleString(z($),q))}},VX=(Q)=>{if(!a(z(Q)))throw new Error("Thee argument should be a plain object or a signal of plain object");return{...u(Q),prop:(X)=>U(()=>z(Q)[X]),get props(){return Object.keys(z(Q)).reduce((J,$)=>{const q=$;return J[q]=this.prop(q),J},{})},get keys(){return U(()=>Object.keys(z(Q)))}}},vQ=(Q)=>{const J=["at","charAt","charCodeAt","codePointAt","concat","endsWith","includes","indexOf","lastIndexOf","padEnd","padStart","repeat","slice","startsWith","substring","trim","trimEnd","trimStart"].reduce(($,q)=>{const Z=(...W)=>{return U(()=>{const G=PQ(...W);return z(Q)[q](...G)})};return $[q]=Z,$},{});return{...u(Q),...J,get length(){return U(()=>z(Q).length)},get lowercase(){return U(()=>z(Q).toLowerCase())},get Sentencecase(){return U(()=>{const $=z(Q);return $.charAt(0).toUpperCase()+$.slice(1).toLowerCase()})},get TitleCase(){return U(()=>z(Q).toLowerCase().replace(/\b\w/g,($)=>$.toUpperCase()))},get UPPERCASE(){return U(()=>z(Q).toUpperCase())},localeCompare:($,q,Z)=>U(()=>z(Q).localeCompare(z($),z(q),Z)),normalize:($)=>U(()=>z(Q).normalize(z($))),replace:($,q)=>U(()=>z(Q).replace(z($),z(q))),replaceAll:($,q)=>U(()=>z(Q).replaceAll(z($),z(q))),search:($)=>U(()=>z(Q).search($)),split:($,q)=>U(()=>{const Z=$ instanceof RegExp?$:z($);return z(Q).split(Z,z(q))}),toLocaleLowerCase:($)=>U(()=>z(Q).toLocaleLowerCase(z($))),toLocaleUpperCase:($)=>U(()=>z(Q).toLocaleUpperCase(z($)))}},yX=S("dksjfbksjnd"),G1=vQ(yX).split(""),M=(Q)=>{return typeof z(Q)==="number"?IX(Q):typeof z(Q)==="string"?vQ(Q):Array.isArray(z(Q))?SX(Q):a(z(Q))?VX(Q):u(Q)},_=(Q,...X)=>U(()=>{return Q.reduce((J,$,q)=>{let Z;const W=X[q];if(typeof W==="function")Z=W()??"";else if(e(W))Z=W.value??"";else Z=W??"";return`${J}${$}${Z.toString()}`},"")}),cQ=["onmount","onunmount"],mQ=["onerror","onload","onresize","onblur","onchange","oncontextmenu","onfocus","oninput","oninvalid","onreset","onselect","onsubmit","onkeydown","onkeypress","onkeyup","onclick","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onabort","oncanplay","oncanplaythrough","ondurationchange","onemptied","onended","onerror","onloadeddata","onloadedmetadata","onloadstart","onpause","onplay","onplaying","onprogress","onratechange","onseeked","onseeking","onstalled","onsuspend","ontimeupdate","onvolumechange","onwaiting"],CX=[...mQ,...cQ],gX=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"],o,pQ=(Q)=>{if(!o)o=document.createElement("textarea");return o.innerHTML=Q,o.value},bX=(Q)=>{try{return decodeURIComponent(Q)}catch{return Q}},hX=(Q)=>{return Q.replace(/\\u[\dA-Fa-f]{4}/g,(X)=>String.fromCharCode(parseInt(X.slice(2),16))).replace(/\\x[\dA-Fa-f]{2}/g,(X)=>String.fromCharCode(parseInt(X.slice(2),16)))},vX=()=>{let Q=0;return{getNewId:()=>++Q,resetIdCounter:()=>Q=0}},dQ=vX(),O={currentIs:(Q)=>window._currentAppPhase===Q,start:(Q)=>{window._currentAppPhase=Q,console.log(`Current phase is ${Q}`)}},uQ=(Q,X,J)=>{let $=Q;$=pQ($),$=bX($),$=hX($);const q=$.trim().toLowerCase();for(let Z of X)if(Z.test(q))throw J;return Q},cX=(Q)=>uQ(Q,[/^javascript\s*:/i,/^data\s*:/i,/^vbscript\s*:/i,/^file\s*:/i],'The href attribute value starting with one of "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),mX=(Q)=>uQ(Q,[/url\s*\(/i,/expression\s*\(/i,/javascript\s*:/i,/data\s*:/i,/vbscript\s*:/i,/file\s*:/i],'The style attribute value starting with one of "url(..", "expression(..", "javascript:", "data:", "vbscript:" or "file:" is not allowed.'),pX=(Q,X)=>{if(Q==="href"){if(typeof X==="boolean")throw"The value of 'href' attribute should not be a boolean";return cX(X||"")}if(Q==="style"){if(typeof X==="boolean")throw"The value of 'style' attribute should not be a boolean";return mX(X||"")}return X},LQ=(Q)=>Array.isArray(Q),s=(Q)=>!isNaN(Q?.elementId)&&Q?.elementId>0,I=(Q)=>Q===void 0||typeof Q==="string"||typeof Q==="function"&&Q.isElementGetter,rQ=(Q)=>LQ(Q)&&Q.every((X)=>I(X)),oQ=(Q)=>I(Q)||rQ(Q),iQ=(Q)=>t(Q)&&I(Q.value),zQ=(Q)=>V(Q)&&I(Q.value),dX=(Q)=>t(Q)&&oQ(Q.value),sQ=(Q)=>V(Q)&&oQ(Q.value),nQ=(Q)=>LQ(Q)&&Q.every((X)=>I(X)||iQ(X)||zQ(X)),uX=(Q)=>!V(Q)&&(I(Q)||dX(Q)||nQ(Q)),lQ=(Q)=>uX(Q)||sQ(Q),IQ=!1,rX={},v={},oX=globalThis.MutationObserver,iX=new oX((Q)=>{Q.forEach((X)=>{if(X.type==="childList")X.addedNodes.forEach((J)=>{if(s(J)){const $=J,q=$.elementId;if(v[q])delete v[q];else rX[q]=$.tagName}}),X.removedNodes.forEach((J)=>{if(s(J)){const $=J,q=$.elementId,Z=$.unmountListener;if(Z)v[q]={element:$,unmountListener:Z}}})}),Object.entries(v).forEach(([X,J])=>{const{element:$,unmountListener:q}=J;aQ($,q)})}),aQ=(Q,X)=>{if(!s(Q))return;const J=Q.children;for(let $=0;$<J.length;$++){const q=J[$];aQ(q,q.unmountListener)}if(X&&X(Q),v[Q.elementId])delete v[Q.elementId]},sX=()=>{if(!IQ&&!O.currentIs("build"))iX.observe(document.body,{childList:!0,subtree:!0}),IQ=!0},tQ=(Q,X)=>CX.includes(Q)&&X===void 0,eQ=(Q,X)=>mQ.includes(Q)&&typeof X==="function",QX=(Q,X)=>cQ.includes(Q)&&typeof X==="function",nX=(Q,X)=>tQ(Q,X)||eQ(Q,X)||QX(Q,X),lX=(Q,X)=>{Object.entries(X).forEach(([J,$])=>{if(tQ(J,$));else if(eQ(J,$)){const q=J.slice(2);Q.addEventListener(q,(Z)=>{if(q==="keypress")Z.preventDefault();$(Z)})}else if(QX(J,$)){if(J==="onmount"&&!O.currentIs("build")){const q=$;setTimeout(()=>q(Q),0)}if(J==="onunmount"){sX();const q=Q.unmountListener;Q.unmountListener=(Z)=>{if($(Z),typeof q==="function")q(Z)}}}else console.error(`Invalid event key: ${J} for element with tagName: ${Q.tagName}`)})},VQ=(Q,X,J)=>{const $=e(J)?J.value:J,q=pX(X,$);if(typeof q==="boolean")if(q)Q.setAttribute(X,"");else Q.removeAttribute(X);else if(X==="value")Q.value=q||"";else Q.setAttribute(X,q||"")},aX=(Q,X)=>{const J={};Object.entries(X).forEach((q)=>{const[Z,W]=q;if(V(W))J[Z]=W;VQ(Q,Z,W)});const $=d(()=>{Object.entries(J).forEach((q)=>{const[Z,W]=q,G=W.value;if(!O.currentIs("run"))return;VQ(Q,Z,G)})});Q.effects.push($)},tX=(Q)=>{if(!Q||typeof Q==="string")return document.createTextNode(pQ(Q||""));if(I(Q)){const X=Q();if(!s(X))throw new Error(`Invalid MHtml element getter child. Type: ${typeof Q}`);return X}throw new Error(`Invalid child. Type of child: ${typeof Q}`)},qQ=(Q,X,J)=>{const $=Q.childNodes[J],q=tX(X);if($&&q)Q.replaceChild(q,$);else if(q)Q.appendChild(q);else console.error(`No child found for node with tagName: ${Q.tagName}`)},eX=(Q,X)=>{if(!X)return;if(sQ(X)){const q=d(()=>{const Z=X.value,W=LQ(Z)?Z:[Z];W.forEach((R,B)=>qQ(Q,R,B));const G=W.length;while(G<Q.childNodes.length){const R=Q.childNodes[G];if(R)Q.removeChild(R)}});Q.effects.push(q)}const J=I(X)?[X]:t(X)?I(X.value)?[X.value]:rQ(X.value)?X.value:[]:nQ(X)?X.map((q)=>zQ(q)?q:iQ(q)?q.value:q):[],$=[];if(J.forEach((q,Z)=>{if(zQ(q))$.push({index:Z,signalChild:q});const W=z(q);qQ(Q,W,Z)}),$.length)$.forEach(({index:q,signalChild:Z})=>{const W=d(()=>{const G=Z.value;if(!O.currentIs("run"))return;qQ(Q,G,q)});Q.effects.push(W)})},Q0=(Q,X)=>{let J=void 0;const $={},q={};return Object.entries(Q).forEach(([Z,W])=>{if(Z==="children")if(lQ(W))J=W;else throw new Error(`Invalid children prop for node with tagName: ${X}\n\n ${JSON.stringify(W)}`);else if(nX(Z,W))$[Z]=W;else q[Z]=W}),{children:J,eventProps:$,attributeProps:q}},X0=(Q,X)=>{const J=()=>{const $=dQ.getNewId(),q=O.currentIs("mount")?document.querySelector(`[data-elem-id="${$}"]`):document.createElement(Q);q.elementId=$,q.effects=[],q.unmountListener=()=>{q.effects.forEach((G)=>G.dispose())};const Z=lQ(X)?{children:X}:X;if(!O.currentIs("run"))Z["data-elem-id"]=q.elementId.toString();const W=Q0(Z,q.tagName);if(lX(q,W.eventProps),aX(q,W.attributeProps),eX(q,W.children),!O.currentIs("build"))q.removeAttribute("data-elem-id");return q};return J.isElementGetter=!0,J},yQ=(Q,X,J)=>{const $=S(X),q=S(Q),Z=J(U(()=>q.value),U(()=>$.value));let W,G,R=!1;if(Z?.isElementGetter)W=()=>{if(R&&G)return G;return G=Z(),R=!0,G},W.isElementGetter=!0;else if(!Z||typeof Z==="string")W=Z||"";else throw`One of the child, ${Z} passed in ForElement is invalid.`;return{indexSignal:$,itemSignal:q,mappedChild:W}},ZQ=(Q,X,J)=>{if(X!==void 0&&X>=0&&J){const $=X>Q.length?Q.length:X;Q.splice($,0,J)}return Q},$0=({subject:Q,itemKey:X,map:J,n:$,nthChild:q})=>{if(q&&$===void 0||$!==void 0&&$>-1&&!q)throw new Error("Either both 'n' and 'nthChild' be passed or none of them.");let Z=q;if(q&&typeof q!=="string"){const A=q(),N=()=>A;N.isElementGetter=!0,Z=N}if(!V(Q))return ZQ(z(Q).map(J),$,Z);const W=U(()=>{const A=z(Q);return Array.isArray(A)?A:[]});if(!X)return U(()=>ZQ(W.value.map(J),$,Z));const G=W.value;if(G.length&&typeof G[0]!=="object")throw new Error("for mutable map, item in the list must be an object");let R=null;const B=U((A)=>{return R=A||R,W.value}),F=U((A)=>{if(!A||!R)return B.value.map((x,k)=>yQ(x,k,J));return DX(R,B.value,X).map((H,x)=>{const k=(A||[])[H.oldIndex];if(console.assert(H.type==="add"&&H.oldIndex===-1&&!k||H.oldIndex>-1&&!!k,"In case of mutation type 'add' oldIndex should be '-1', or else oldIndex should always be a non-negative integer."),k){if(H.type==="shuffle")k.indexSignal.value=x;if(H.type==="update")k.indexSignal.value=x,k.itemSignal.value={...H.value};return k}return yQ(H.value,x,J)})});return U(()=>ZQ(F.value.map((A)=>A.mappedChild),$,Z))},J0=({subject:Q,isTruthy:X,isFalsy:J})=>{const $=Y.Span({style:"display: none;"}),q=()=>z(Q)?X?X(Q):$:J?J(Q):$;return V(Q)?U(q):q()},q0=({subject:Q,caseMatcher:X,defaultCase:J,cases:$})=>{const q=()=>{const Z=z(Q),W=z($);let G=void 0;for(let[R,B]of Object.entries(W)){const F=X&&X(Z,R),K=`${Z}`===R;if(F||K){G=B();break}}return G||J&&J()||Y.Span({style:"display: none;"})};return V(Q)?U(q):q()},Z0=gX.reduce((Q,X)=>{const J=X.split("").map((q,Z)=>!Z?q.toUpperCase():q).join(""),$=(q)=>X0(X,q);return Q[J]=$,Q},{}),W0={For:$0,If:J0,Switch:q0},Y={...Z0,...W0},Y0=(Q)=>{const X=z(Q);return Array.isArray(X)&&X.some((J)=>e(J))},j=(Q)=>(X)=>{for(let $ of Object.keys(X))if(X[$]===void 0)delete X[$];const J=Object.entries(X).reduce(($,q)=>{const[Z,W]=q,G=V(W)||typeof W==="function"?W:Y0(W)?z(W):OX(z(W));return $[Z]=G,$},{});return Q(J)},z0=["#e87b52","#F5E06F","#A3BA64","#7095C9","#A59EE3","#D89DBF"],G0=[{name:"Not Applicable",code:-1,isMaxLevel:!1},{name:"Paused",code:-2,isMaxLevel:!1},{name:"Stopped",code:-3,isMaxLevel:!1}],CQ={id:"analytics",lastInteraction:(new Date()).getTime()},n={id:"local-settings",habitsPage:{tabIndex:0,sortOptionIndex:0},editPage:{showHints:!0,showFullCustomisation:!1}},XX=[{label:"This month",months:1},{label:"2 months",months:2},{label:"5 months",months:5}],GQ=[{icon:"calendar_month",decending:!0,label:"Date created (Newest first)"},{icon:"calendar_month",decending:!1,label:"Date created (Oldest first)"},{icon:"task_alt",decending:!0,label:"Completion (Highest first)"},{icon:"task_alt",decending:!1,label:"Completion (Lowest first)"}];var RQ=86400000,R0=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],B0=["January","February","March","April","May","June","July","August","September","October","November","December"],U0=(Q,X)=>R0[Q].substring(0,X),F0=(Q,X)=>B0[Q].substring(0,X),jQ=(Q)=>{return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate())},C=(Q)=>jQ(Q).getTime(),QQ=(Q,X)=>C(Q)===C(X),_0=(Q,X)=>{const J=X||new Date;return C(Q)>C(J)},$X=(Q,X)=>{const J=C(Q),$=C(X);return Math.round(($-J)/RQ)},K0=(Q)=>$X(new Date,Q),JX=(Q,X)=>new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+X),A0=(Q)=>{const X=new Date;return Array(Q).fill(0).map((J,$)=>new Date(X.getFullYear(),X.getMonth()-$,1)).reverse()},P0=(Q,X)=>{const J=C(Q),$=C(X);if(J===$)return[jQ(new Date(J))];const q=J<$?J:$,W=((J<$?$:J)-q)/RQ;return Array(W+1).fill(0).map((G,R)=>new Date(q+R*RQ))},qX=(Q)=>{if(Q<1)throw"";const X=new Date,J=X.getFullYear(),$=X.getMonth(),q=new Date(J,$-(Q-1),1),Z=new Date(J,$+1,0);return{startDate:q,endDate:Z}},ZX={href:"/",HABITS:{href:"/habits/",NEW:{href:"/habits/new/"},HABIT:{href:"/habits/habit/",EDIT:{href:"/habits/habit/edit/"}}},SETTINGS:{href:"/settings/",PRIVACY_POLICY:{href:"/settings/privacy-policy/"}}},L0=(Q)=>location.href=Q,j0=()=>location.href=ZX.HABITS.NEW.href,BQ=(Q)=>location.href=`${ZX.HABITS.HABIT.href}?id=${Q}`,H0=1.6181,N0=(Q)=>G0.find((X)=>X.code===Q),WX=(Q,X)=>{return Q<0?N0(-1):{isMaxLevel:Q===X.length-1,name:X[Q],code:Q}},M0=(Q)=>({key:Q.getTime(),level:WX(-1,[]),date:Q}),k0=(Q,X,J)=>({key:J.getTime(),level:WX(Q,X),date:J}),YX=(Q,X)=>Q.find((J)=>QQ(J.date,X)),zX=(Q)=>{const X=jQ(new Date(Q.id));return{...Q,startDate:X,levels:Q.levels.map((J,$)=>({isMaxLevel:$===Q.levels.length-1,name:J,code:$})),tracker:Q.tracker.map((J,$)=>k0(J,Q.levels,JX(X,$))),milestones:x0(Q.milestones)}},x0=(Q)=>[{label:"Successful",upperLimit:100,percent:Q[0],icon:"verified_user",color:"green"},{label:"Little more to go",upperLimit:Q[0],percent:Q[1],icon:"done_all",color:"light-blue"},{label:"Going good",upperLimit:Q[1],percent:Q[2],icon:"check",color:"blue"},{label:"Unacceptable",upperLimit:Q[2],percent:0,icon:"close",color:"red"}],w0=(Q,X)=>{let J=Q[0];for(let $=0;$<Q.length;$++)if(J=Q[$],J.percent<=X)break;return{label:J.label,icon:J.icon,color:J.color}},HQ=(Q,X,J)=>{const $=GX(Q.tracker,X,J),q=Q.levels.length-1;let Z=0,W=0,G=0,R=0,B=0,F=0;return $.forEach((K,A)=>{if(Z+=K.level.code>-1?1:0,W+=K.level.code>0?1:0,G+=K.level.code>0?K.level.code:0,A===$.length-1)return;const H=K.level.code<1;F=H?F+1:0;const k=100*((K.level.code>0?K.level.code:0)/(Q.levels.length-1));R=Math.round(k)>50?R+1:0,B=H?0:B+1}),{title:Q.title,aceStreak:R,followStreak:B,missed:F,percent:Math.round(100*(G/(Z*q))),totalDays:Z,workingDays:W}},D0=(Q,X,J,$=!1)=>{const q=z0[J],Z=Q/(X-1),G=Math.trunc(Math.pow(Z,H0)*255).toString(16),R=G.length===1?`0${G}`:G,B=Q<0||R==="0"?"transparent":`${q}${R}`,F=$?Q/(X-1)>0.5?"white":"black":Q<0?"lightgray":"transparent";return{backgroundColor:B,fontColor:F,peakBackgroundColor:q,levelPercent:Math.round(Z*100)}},E0=(Q,X)=>{const J=[];for(let $ of X)if(!Q.some((Z)=>{if(QQ(Z.date,$))return J.push(Z),!0;return!1}))J.push(M0($));return J},GX=(Q,X,J)=>{const $=P0(X,J);return E0(Q,$)},T0=(Q)=>{const X=new Date,J=new Date(Q),$=-K0(J);if($===0)return"Just created this habit today";if($===1)return"This habit started from yesterday";if($>1&&$<5)return`Started following this ${$} back`;const{aceStreak:q,followStreak:Z,missed:W}=HQ(p0(Q),JX(X,-$),X);if(q>=12)return`Nailed ${q} days in a row. Woah! Don't stop.`;if(q>=4)return`Doing good for ${q} days straight! Keep it up.`;if(Z>=15)return`Didn't miss for ${Z} days in a row. Kudos!`;if(Z>=4)return`${Z} days in a row. Nice! keep going.`;if(W)`Missed ${W} days. Impossible is I M Possible.`;return"Just stick to it. Patience is the key."},O0=(Q,X,J)=>{const $=GQ[X],{startDate:q,endDate:Z}=qX(J),W=$.label,G=Q.map((R)=>({...R,completion:HQ(R,q,Z).percent}));return G.sort((R,B)=>{if(W==="Completion (Highest first)")return B.completion-R.completion;if(W==="Completion (Lowest first)")return R.completion-B.completion;if(W==="Date created (Oldest first)")return R.id-B.id;return B.id-R.id}),G},f0=(Q)=>[{label:"Today",icon:"calendar_month",isSelected:Q==="/",href:"/"},{label:"Habits",icon:"checklist",isSelected:Q==="/habits/",href:"/habits/"},{label:"Settings",icon:"settings",isSelected:Q==="/settings/",href:"/settings/"}],S0=()=>{if(window.navigator?.vibrate)window.navigator.vibrate(3)},NQ=(Q,X,J)=>{const $=JSON.parse(Q||"{}"),q=$&&typeof $==="object",Z=$[X];if(!q||!(J?Z===J:!!Z))return;return $},D=(Q)=>{return(...X)=>{return S0(),m0(new Date),Q&&Q(...X)}},RX="analytics",I0="id",V0="analytics",BX=(Q)=>{localStorage.setItem(RX,JSON.stringify(Q))},y0=()=>{if(!O.currentIs("run"))return CQ;const Q=()=>{const $=localStorage.getItem(RX);return NQ($,I0,V0)};if(!Q())BX(CQ);const J=Q();if(!J)throw"Error fetching analytics";return J},UX=()=>{const Q=[];for(let X in localStorage){if(!localStorage.hasOwnProperty(X))continue;Q.push(X)}return Q},FX=(Q)=>Q.startsWith("h."),MQ=(Q)=>`h.${Q}`,_X=(Q)=>{if(!FX(Q))return;const X=localStorage.getItem(Q),J=NQ(X,"title");if(!J)return;return J},C0=()=>{for(let Q of UX())if(FX(Q))return!1;return!0},KX=()=>{if(!O.currentIs("run"))return[];const Q=[];for(let X of UX()){const J=_X(X);if(!J)continue;Q.push(J)}return Q},g0=(Q)=>{const X=MQ(Q.id);localStorage.setItem(X,JSON.stringify(Q))},b0=(Q)=>{const X=MQ(Q);localStorage.removeItem(X)},AX="settings",h0="id",v0="local-settings",kQ=(Q)=>{localStorage.setItem(AX,JSON.stringify(Q))},PX=()=>{if(!O.currentIs("run"))return n;const Q=()=>{const $=localStorage.getItem(AX);return NQ($,h0,v0)};if(!Q())kQ(n);const J=Q();if(!J)throw"Error fetching settings";return c0(J),Q()},c0=(Q)=>{if(!Q.editPage)kQ({...Q,editPage:n.editPage})},m0=(Q)=>{const X=y0();BX({...X,lastInteraction:Q.getTime()})},xQ=()=>{return PX().habitsPage},LX=(Q)=>{const X=PX();kQ({...X,habitsPage:Q})},p0=(Q)=>{const X=MQ(Q),J=_X(X);if(!J)throw`Error fetching habit with id '${Q}' from storage`;return zX(J)},d0=()=>{return KX().map((X)=>zX(X))},u0=()=>{const Q=KX();for(let X of Q){const J=new Date(X.id),$=new Date,q=$X(J,$),Z=[...X.tracker];if(q+2<=Z.length)continue;const W=Z.length-1,G=new Date(J.getFullYear(),J.getMonth(),J.getDate()+W),R=G.getDay();if(QQ($,G)){const B=Z[W];Z[W]=X.frequency[R]?B<0?0:B:-1}for(let B=Z.length;B<=q;B++){const K=new Date(J.getFullYear(),J.getMonth(),J.getDate()+B).getDay();Z[B]=X.frequency[K]?0:-1}X.tracker=Z,g0(X)}},r0=(Q)=>b0(Q),R1=j(({cssClasses:Q,hideRemove:X,hideAdd:J,onRemove:$,onAdd:q})=>{const Z=w(X).and(J).ternary("bn","ba"),W=_`br3 pb1 f4 bw1 b--light-silver dark-gray ${Z} ${Q}`,G=w(J).ternary("","br"),R=_`pointer ph2 pb1 bw1 b--light-silver ${G}`,B=()=>L(Z,W,G,R);return Y.Span({onunmount:B,class:W,children:[Y.If({subject:X,isFalsy:()=>Y.Span({class:R,onclick:D($),children:"-"})}),Y.If({subject:J,isFalsy:()=>Y.Span({class:"pointer ph2 pb1",onclick:D(q),children:"+"})})]})}),m=j(({cssClasses:Q,onTap:X,onUnmount:J,children:$})=>{const q=_`pointer noselect br-pill ba bw1 b--light-silver b--hover-black bg-white black ${Q}`,Z=()=>{if(L(q),J)J()};return Y.Button({onunmount:Z,class:q,onclick:D(()=>X()),children:$})}),B1=j(({cssClasses:Q})=>{const X=_`bb b--light-gray ${Q}`;return Y.Div({onunmount:()=>L(X),class:X})}),g=j(({cssClasses:Q,size:X,onClick:J,iconName:$,title:q})=>{const W=_`material-symbols-outlined ${J?"pointer":""} ${Q}`,G=M(X).or(16),R=_`font-size: ${G}px`;return Y.Span({onunmount:()=>L(W,G,R),class:W,style:R,onclick:D(J),children:$,title:q})}),U1=j(({cssClasses:Q,href:X,target:J,onClick:$,children:q})=>{const Z=w(X).or($).ternary("pointer underline",""),W=_`w-fit-content noselect ${Z} ${Q}`;return Y.A({onunmount:()=>L(Z,W),...X?{href:X}:{},class:W,target:J,onclick:D($),children:q})}),XQ=j(({cssClasses:Q,isOpen:X,content:J,onTapOutside:$,onUnmount:q})=>{const Z=_`pa0 br3 ${Q}`,W=(R)=>{setTimeout(()=>d(()=>{if(X.value)R.showModal();else R.close()}))},G=()=>{if(L(Z),q)q()};return Y.Dialog({onmount:W,onunmount:G,onclick:D($),class:Z,children:[Y.Div({onclick:(R)=>R.stopPropagation(),children:J})]})}),F1=j(({cssClasses:Q,placeholder:X,num:J,onchange:$})=>{const q=M(J).string,Z=(W)=>{const G=W.target.value,R=Number.parseFloat(Number.parseFloat(G||"0").toFixed(2));$(R)};return Y.Input({onunmount:()=>L(q),class:Q,type:"number",placeholder:X,value:q,onchange:Z})}),o0=j(({progress:Q,cssClasses:X})=>{const J=_`br-pill bg-moon-gray ${X}`,$=_`width: ${M(Q).toConfined(0,100)}%;`;return Y.Div({onunmount:()=>L(J,$),class:J,children:Y.Div({class:"br-pill bg-app-theme-color pa1",style:$})})}),i0=j(({cssClasses:Q,header:X,content:J,bottombar:$})=>{const q=_`w6-ns ${Q}`;return Y.Div({onunmount:()=>L(q),class:"flex-ns justify-center-ns",children:Y.Div({class:q,children:[Y.If({subject:X,isTruthy:()=>Y.Div({class:"overflow-break-word sticky top-0 left-0 right-0 bg-inherit z-999 f2dot33 b pv3 mt2",children:X})}),J,Y.Div({class:"pv6 mt5"}),Y.If({subject:$,isTruthy:()=>Y.Div({class:"sticky bottom-0 left-0 right-0 z-9999",children:$})})]})})}),s0=j(({cssClasses:Q,tabs:X,onTabChange:J})=>{const $=_`bg-white br3 ${Q}`,q=M(X).map((Z)=>{return{tabClasses:`
                w-100 br3 pv2dot5 ph2 flex justify-center noselect br-pill ba bw1 bg-inherit
                ${Z.isSelected?`b--light-silver b black ${Z.classes||""}`:"pointer b--transparent b--hover-black silver pointer"} ${Z.classes}`,label:Z.label}});return Y.Div({onunmount:()=>L($,q),class:$,children:Y.Div({class:"flex items-center justify-between pa1",children:Y.For({subject:q,itemKey:"label",map:(Z,W)=>{const{tabClasses:G,label:R}=M(Z).props;return Y.Span({onunmount:()=>L(G,R),onclick:D(()=>J(W.value)),class:G,children:R})}})})})}),_1=j(({cssClasses:Q,placeholder:X,disabled:J,text:$,onmount:q,onchange:Z,onkeydown:W,onfocus:G,onblur:R})=>{let B;const F=w(J).truthy,K=(H)=>{if(B=H,q)q(H)},A=(H)=>{const x=H.target.value;if(Z)Z(x)},N=(H)=>{const x=H.key.length===1?B.value+H.key:H.key==="Backspace"?B.value.slice(0,-1):B.value,k={key:H.key,text:x};if(W)W(k)};return Y.Input({onmount:K,onunmount:()=>L(F),class:Q,type:"text",placeholder:X,disabled:F,value:$,onchange:A,onkeydown:N,onfocus:G,onblur:R})}),K1=j(({cssClasses:Q,isOn:X,onToggle:J})=>{const $=_`flex items-center pointer noselect br-pill ba bw1dot5 b--mid-gray b--hover-black bg-white pa05 black ${Q}`,Z=_`${"br-100 ba bw1 b--hover-black pa1"} ${()=>X.value?"b--transparent":"b--moon-gray bg-moon-gray"}`,W=_`${"br-100 ba bw1 b--hover-black pa1"} ${()=>X.value?"b--mid-gray bg-mid-gray":"b--transparent"}`;return Y.Div({onunmount:()=>L($,Z,W),class:$,onclick:D(J),children:[Y.Div({class:Z}),Y.Div({class:"pa05"}),Y.Div({class:W})]})}),UQ=j(({cssClasses:Q,justifyCssClasses:X,label:J})=>{const $=M(X).or("justify-end"),q=M(J).or("Add habit"),Z=_`w-100 flex ${$} ${Q}`;return Y.Div({onunmount:()=>L($,q,Z),class:Z,children:m({cssClasses:"pa3 mb3 shadow-4 b flex items-center",children:[g({cssClasses:"nl1 mr1",size:22,iconName:"add"}),q],onTap:j0})})}),wQ=j(({cssClasses:Q,dotCssClasses:X,colorIndex:J,level:$,totalLevels:q,showText:Z,textContent:W,icon:G,iconSize:R,isRectangular:B,showHeight:F,onClick:K})=>{const A=w(B).ternary("br0","br-100"),N=w($).isLT(0).ternary("bg-transparent","bg-light-gray"),H=f(D0,$,q,J,Z),{peakBackgroundColor:x,backgroundColor:k,fontColor:E,levelPercent:T}=M(H).props,y=M(W).or("\u0387"),h=w(F).and(G).andThisIsGT(T,99).truthy,$Q=_`pointer relative overflow-hidden ${A} ${N} ${Q}`,r=_`flex items-center justify-around absolute left-0 right-0 bottom-0 br0 ${X}`,JQ=_`
      background-color: ${x};
      color: white;
      height: ${T}%;`,TQ=_`flex items-center justify-around absolute absolute--fill ${X}`,OQ=_`
      background-color: ${k};
      color: ${E};`,NX=()=>{if(K&&$.value>=0)K()},MX=()=>{L(A,N,H,x,k,E,T,y,h,$Q,r,JQ,TQ,OQ)};return Y.Span({onunmount:MX,class:$Q,onclick:D(NX),children:Y.If({subject:F,isTruthy:()=>Y.Span({class:r,style:JQ,children:Y.If({subject:h,isTruthy:()=>g({iconName:G,size:R})})}),isFalsy:()=>Y.Span({class:TQ,style:OQ,children:Y.If({subject:G,isTruthy:(kX)=>g({iconName:kX,size:R}),isFalsy:()=>Y.Span(y)})})})})}),A1=j(({habit:Q,day:X,onColorDotClick:J})=>{const{id:$,title:q,colorIndex:Z,levels:W,tracker:G}=M(Q).props,R=M(W).length,B=U(()=>{return YX(G.value,X.value).level.code}),F=w(B).isGT(0).truthy,K=w(B).isLT(1).ternary("b--light-silver","b--transparent"),A=_`pa3 mr3 ba b ${K}`,N=()=>L($,q,Z,W,G,R,B,F,K);return Y.Div({onunmount:N,class:"mt4 flex items-center",children:[wQ({cssClasses:A,colorIndex:Z,level:B,totalLevels:R,icon:"check",iconSize:22,showText:F,showHeight:!0,onClick:J}),Y.Div({class:"pointer",onclick:D(()=>BQ($.value)),children:[Y.Div({class:"f5 fw6 f4-ns fw4-ns",children:q}),Y.Div({class:"f6 light-silver pt05",children:T0($.value)})]})]})}),P1=j(({cssClasses:Q})=>{const X=_`pa3 flex items-center ${Q}`;return m({onUnmount:()=>L(X),cssClasses:X,children:[g({iconName:"arrow_back"}),Y.Span({class:"ml1",children:"Go Back"})],onTap:()=>history.back()})}),L1=j(({cssClasses:Q,milestones:X,achievedMilestone:J,completionPercent:$})=>{const q=M(J).prop("color"),Z=f((A)=>A>53?"Average completion":A>43?"Avg completion":A>35?"Completion":"",$),W=_`center ${Q}`,G=_`nt3dot6 h1dot2 bw1 relative br b--${q}`,R=_`width: ${$}%;`,B=_`absolute right-0 pr1 b f6 ${q}`,F=_`${$}%`,K=()=>L(q,Z,W,G,R,B,F);return Y.Div({onunmount:K,class:W,children:[Y.Div({class:"pb2 w-100 relative",children:Y.For({subject:X,map:(A,N)=>{return n0({colorCss:`bg-${A.color}`,percent:A.upperLimit,hideUpperLimit:N===0})}})}),Y.Div({class:G,style:R,children:Y.Div({class:"relative flex items-start nt1 justify-between f7 mid-gray",children:[Y.Div(Z),Y.Div({class:B,children:F})]})})]})}),n0=j(({colorCss:Q,hideUpperLimit:X,percent:J})=>{const $=w(X).ternary("",_`${J}%`),q=_`width: ${J}%;`,Z=_`absolute absolute-fill h0dot15 w-100 ${Q}`;return Y.Div({onunmount:()=>L($,q,Z),class:"absolute flex items-start h0dot5 bl br b--light-silver bw1",style:q,children:[Y.Div({class:Z}),Y.Div({class:"flex justify-end w-100 pt2 f7",children:Y.Div({class:"nr3 pb2 light-silver b",children:$})})]})}),l0=j(({cssClasses:Q,habit:X,date:J,colorIndex:$,totalLevels:q})=>{const Z=U(()=>{const B=J.value.getFullYear(),F=J.value.getMonth(),K=new Date(B,F,1),A=new Date(B,F+1,0);return GX(X.value.tracker,K,A).map((N)=>({...N,level:N.level.code}))}),W=_`flex items-center ${Q}`,G=U(()=>F0(J.value.getMonth(),3)),R=()=>L(Z,W,G);return Y.Div({onunmount:R,class:W,children:[Y.Div({class:"f8 b w2 light-silver",children:G}),Y.Div({class:"w-100 flex items-center justify-between",children:Y.For({subject:Z,itemKey:"key",map:(B)=>{const F=M(B).prop("level");return wQ({cssClasses:"pa1",colorIndex:$,level:F,totalLevels:q})}})})]})}),gQ=j(({cssClasses:Q,habit:X,months:J,onClick:$})=>{const{milestones:q,title:Z,colorIndex:W,levels:G}=M(X).props,R=f((E,T)=>{const{startDate:y,endDate:h}=qX(E);return HQ(T,y,h).percent},J,X),B=f(w0,q,R),{icon:F,color:K}=M(B).props,A=f((E)=>A0(E).map((T)=>({monthFirstDate:T,index:T.getTime()})),J),N=_`pointer bg-white ${Q}`,H=_`mr1 ${K}`,x=_`${R}%`,k=()=>{L(q,Z,W,G,R,B,F,K,A,N,H,x)};return Y.Div({onunmount:k,class:N,onclick:D($),children:[Y.Div({class:"flex items-center justify-between nt1 mb2",children:[Y.Div({class:"f5 dark-gray b",children:Z}),Y.Div({class:"f6 silver b flex items-center",children:[g({cssClasses:H,iconName:F}),x]})]}),Y.Div({class:"mt2 mb1",children:Y.For({subject:A,itemKey:"index",map:(E)=>{return l0({cssClasses:"mb1",habit:X,date:M(E).prop("monthFirstDate"),colorIndex:W,totalLevels:G.value.length})}})})]})}),j1=j(({cssClasses:Q})=>{const X=_`flex flex-column items-center justify-around ${Q}`;return Y.Div({onunmount:()=>L(X),class:X,children:[Y.Img({class:"mt3 pt4",src:"/assets/images/just_landed.png",height:"200"}),Y.Div("Looks like, you just landed here!"),UQ({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]})}),H1=j(({isOpen:Q,habit:X,onClose:J,onDone:$})=>{const q=_`Delete '${()=>X.value.title}'?`,Z=()=>{r0(X.value.id),$()};return XQ({onUnmount:()=>L(q),cssClasses:"bn w-30-ns",isOpen:Q,onTapOutside:J,content:Y.Div({class:"pa3 f5",children:[Y.Div({class:"mb3 b f4",children:q}),Y.Div({class:"mb4",children:[`
              All the data and the achievements associated with this habit will be lost forever
              with this action, and cannot be reversed.
              `,Y.Br({}),Y.Br({}),`
              Are you sure, you want to DELETE this habit permanently?
              `]}),Y.Div({class:"flex items-center justify-between f6",children:[m({cssClasses:"w-25 pv2 ph3 mr1 b",children:"No",onTap:J}),m({cssClasses:"pv2 ph3 ml2 b red",children:"Yes, delete permanently",onTap:Z})]})]})})}),N1=j(({isOpen:Q,habit:X,date:J,showTitleInHeader:$,onClose:q,onChange:Z})=>{const{title:W,levels:G,tracker:R,colorIndex:B}=M(X).props,F=U(()=>$?.value?`Change status of  '${W.value}'`:`Change status for ${J.value.toDateString()}`),K=f(YX,R,J),A=M(G).length,N=U(()=>{const x=[...G.value];return x.reverse(),x.map((k,E)=>{const T=A.value-1-E,h=`pointer flex items-center pv3 pa3 bt b--moon-gray ${K.value?.level.code===T?"bg-near-white black fw6":"gray fw5"}`,r=`pa1 mr3 ba b ${T<1?"b--light-silver":"b--transparent"}`;return{levelName:k.name,levelCode:T,levelTileCSS:h,dotClasses:r}})});return XQ({onUnmount:()=>L(W,G,R,B,F,K,A,N),cssClasses:"f5 normal ba bw0 outline-0",isOpen:Q,onTapOutside:q,content:Y.Div({class:"mnw5",children:[Y.Div({class:"f5 b tc pa3",children:F}),Y.Div({class:"f5 mb1",children:Y.For({subject:N,map:(x)=>{const{levelName:k,levelCode:E,levelTileCSS:T,dotClasses:y}=M(x).props;return Y.Div({onunmount:()=>L(k,E,T,y),class:T,onclick:D(()=>Z(E.value)),children:[wQ({cssClasses:y,colorIndex:B,level:E,totalLevels:G.value.length,isRectangular:!0}),Y.Span(k)]})}})})]})})}),M1=j(({isOpen:Q,habit:X,onClose:J,onDone:$})=>{const q=_`Stop '${()=>X.value.title}'?`;return XQ({onUnmount:()=>L(q),cssClasses:"bn",isOpen:Q,onTapOutside:J,content:Y.Div({class:"pa3 f5",children:[Y.Div({class:"mb3 b f4",children:q}),Y.Div({class:"mb4",children:["This action is not reversible. You will not be able to resume it again.",Y.Br({}),Y.Br({}),"Are you sure, you want to STOP this habit permanently?"]}),Y.Div({class:"flex items-center justify-between f6",children:[m({cssClasses:"w-100 pv2 ph3 mr2",children:"No, go back",onTap:J}),m({cssClasses:"w-100 pv2 ph3 ml2 b",children:"Yes, stop this",onTap:$})]})]})})}),a0=j(({cssClasses:Q,links:X})=>{const J=_`flex items-center justify-between pv3 bg-near-white ${Q}`;return Y.Div({onunmount:()=>L(J),class:J,children:Y.For({subject:X,map:($)=>t0({label:$.label,icon:$.icon,isSelected:$.isSelected,href:$.href})})})}),t0=j(({cssClasses:Q,label:X,icon:J,isSelected:$,href:q})=>{const Z=w($).ternary("app-theme-color b","black"),W=_`pointer noselect flex flex-column items-center justify-center pb2 ${Z} ${Q}`;return Y.Div({onunmount:()=>L(Z,W),class:W,onclick:D(()=>L0(q.value)),children:[g({size:22,iconName:J}),Y.Div({class:"f7",children:X})]})}),e0=j(({cssClasses:Q,header:X,content:J,navbarTop:$,route:q})=>{return i0({cssClasses:Q,header:X,content:J,bottombar:Y.Div({children:[Y.If({subject:$,isTruthy:()=>$}),a0({cssClasses:"nl3 nr3 ph4",links:f(f0,q)})]})})}),Q1=j(({cssClasses:Q,body:X,onMount:J,onUnMount:$})=>{const q=S("stylesheet");return Y.Html({lang:"en",children:[Y.Head({onmount:()=>q.value="stylesheet",children:[Y.Meta({"http-equiv":"Content-Security-Policy",content:`
                default-src 'self';
                script-src 'self';
                style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com;
                font-src https://fonts.gstatic.com;
                object-src 'none';
                base-uri 'none';
              `}),Y.Meta({charset:"UTF-8"}),Y.Meta({"http-equiv":"X-UA-Compatible",content:"IE=edge"}),Y.Meta({name:"viewport",content:"width=device-width, initial-scale=1.0"}),Y.Link({rel:"icon",type:"image/x-icon",href:"/assets/images/favicon.ico"}),Y.Link({rel:q,href:"/assets/styles.css",as:"style"}),Y.Link({rel:"manifest",href:"/manifest.json"}),Y.Title("Habits (by Cyfer)")]}),Y.Body({tabindex:"-1",class:Q,onmount:J,onunmount:$,children:[Y.Script({src:"main.js",defer:!0}),X]})]})}),k1=j(({cssClasses:Q,contentCssClasses:X,title:J,description:$,hideDescription:q,children:Z})=>{const W=_`mt3 mb4 ${Q}`,G=w($).andNot(q).truthy;return Y.Div({onunmount:()=>L(W,G),class:W,children:[Y.Div({class:"mb2 dark-gray f4 b",children:J}),Y.If({subject:G,isTruthy:()=>Y.Div({class:"mb3 f6 silver fw5",children:$})}),Y.Div({class:X,children:Z})]})}),X1=j(({cssClasses:Q,iconSize:X,selectedOptionIndex:J,onChange:$})=>{const q=S(!1),Z=U(()=>GQ[J.value]),W=M(Z).prop("decending"),G=M(Z).prop("icon"),R=M(X).or(20),B=()=>q.value=!0,F=()=>q.value=!1,K=(N)=>N===Z.value.label?"bg-near-white black fw6":"gray fw5",A=(N)=>{$(N),F()};return Y.Div({onunmount:()=>L(Z,W,G,R),class:Q,children:[bQ({cssClasses:"pointer",descending:W,iconName:G,size:R,onClick:B}),XQ({cssClasses:"f5 normal ba bw0 outline-0",isOpen:q,onTapOutside:F,content:Y.Div({children:[Y.Div({class:"f5 b tc pv3",children:"Sort habit cards by"}),Y.Div({class:"f5 mb1",children:Y.For({subject:GQ,map:(N,H)=>Y.Div({class:`pointer flex items-center pv3 pl2 pr3 bt b--moon-gray ${K(N.label)}`,onclick:D(()=>A(H)),children:[bQ({cssClasses:"ml1 mr2",descending:N.decending,iconName:N.icon,size:20}),Y.Span(N.label)]})})})]})})]})}),bQ=j(({cssClasses:Q,descending:X,iconName:J,size:$,onClick:q})=>{const Z=q?"pointer":"",W=w(X).ternary("arrow_upward","arrow_downward"),G=w($).mul(4).div(5).result;return Y.Span({class:_`flex items-center ${Z} ${Q}`,onclick:D(q),children:[g({cssClasses:"silver",iconName:W,size:G}),g({size:$,iconName:J})]})}),x1=j(({cssClasses:Q,progress:X})=>{const J=_`flex flex-column justify-center items-center vh-100 ${Q}`;return Y.Div({onunmount:()=>L(J),class:J,children:[Y.Img({class:"mt6 br4",src:"/assets/images/habits-logo.png",height:"100",width:"100"}),Y.Div({class:"f3 b mv3",children:"Habits"}),o0({cssClasses:"w-40",progress:X}),Y.Div({class:"mt7 pv4",children:"A Cyfer Product"})]})}),w1=j(({date:Q,selectedDate:X,onChange:J})=>{const $=f(_0,Q),q=f(QQ,X,Q),Z=w($).ternary("light-gray b--transparent","light-silver pointer b--transparent"),W=w(q).ternary("black b b--silver",Z),G=_`bw1 ba br-pill ph2 pv3 pb2 tc ${W}`,R=U(()=>U0(Q.value.getDay(),3)),B=U(()=>("0"+Q.value.getDate()).slice(-2)),F=()=>{if(q.value||$.value)return;J(Q.value)},K=()=>L($,q,Z,W,G,R,B);return Y.Div({onunmount:K,class:G,onclick:D(F),children:[Y.Div({class:"f7 ",children:R}),Y.Div({class:"mt2 f4",children:B})]})}),FQ=S(!1),p=S(n.habitsPage),{tabIndex:DQ,sortOptionIndex:EQ}=M(p).props,$1=U(()=>XX.map((Q,X)=>({label:Q.label,isSelected:X===DQ.value}))),l=f((Q)=>XX[Q].months,DQ),jX=S([]),HX=f(O0,jX,EQ,l),[_Q,KQ]=M(HX).partition((Q)=>Q.isStopped),J1=(Q)=>{LX({...p.value,sortOptionIndex:Q}),p.value=xQ()},q1=(Q)=>{LX({...p.value,tabIndex:Q}),p.value=xQ()},hQ=()=>{jX.value=d0(),p.value=xQ(),FQ.value=C0()},Z1=()=>{u0(),hQ(),window.addEventListener("pageshow",hQ)},W1=()=>{L(DQ,EQ,l,HX,_Q,KQ)},Y1=Q1({cssClasses:"bg-white",onMount:Z1,onUnMount:W1,body:e0({cssClasses:"ph3 bg-white",route:"/habits/",header:Y.Div({class:"flex items-start justify-between bg-white",children:["All habits",X1({cssClasses:"mt2 mr2",iconSize:22,selectedOptionIndex:EQ,onChange:J1})]}),content:Y.Div(Y.If({subject:FQ,isTruthy:()=>Y.Div({class:"flex flex-column items-center justify-around",children:[Y.Img({class:"mt3 pt4",src:"/assets/images/empty.png",height:"200"}),Y.Div("It's all empty here!"),UQ({cssClasses:"pt5",justifyCssClasses:"justify-around",label:"Add your first habit"})]}),isFalsy:()=>Y.Div([s0({cssClasses:"nl1 f6",tabs:$1,onTabChange:q1}),Y.Div(Y.For({subject:KQ,itemKey:"id",n:0,nthChild:Y.Div({class:"silver f6 mt3 pt1 mb4",children:["ACTIVE HABITS",Y.If({subject:M(KQ).length,isFalsy:()=>Y.Div({class:"mt3",children:"None"})})]}),map:(Q)=>gQ({cssClasses:"mb4",habit:Q,months:l,onClick:()=>BQ(Q.value.id)})})),Y.Div(Y.For({subject:_Q,itemKey:"id",n:0,nthChild:Y.Div({class:"silver f6 mt5 mb2",children:["STOPPED HABITS",Y.If({subject:M(_Q).length,isFalsy:()=>Y.Div({class:"mt3",children:"None"})})]}),map:(Q)=>gQ({cssClasses:"mb4",habit:Q,months:l,onClick:()=>BQ(Q.value.id)})}))])})),navbarTop:Y.Div(Y.If({subject:FQ,isFalsy:()=>UQ({})}))})}),z1=()=>{O.start("mount"),dQ.resetIdCounter(),Y1(),O.start("run")};z1();
